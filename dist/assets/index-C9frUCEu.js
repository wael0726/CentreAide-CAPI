function Yk(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function ty(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var I1={exports:{}},ad={},P1={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yl=Symbol.for("react.element"),Jk=Symbol.for("react.portal"),Zk=Symbol.for("react.fragment"),eN=Symbol.for("react.strict_mode"),tN=Symbol.for("react.profiler"),nN=Symbol.for("react.provider"),rN=Symbol.for("react.context"),sN=Symbol.for("react.forward_ref"),iN=Symbol.for("react.suspense"),oN=Symbol.for("react.memo"),aN=Symbol.for("react.lazy"),rw=Symbol.iterator;function lN(t){return t===null||typeof t!="object"?null:(t=rw&&t[rw]||t["@@iterator"],typeof t=="function"?t:null)}var A1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R1=Object.assign,x1={};function Ho(t,e,n){this.props=t,this.context=e,this.refs=x1,this.updater=n||A1}Ho.prototype.isReactComponent={};Ho.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ho.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function C1(){}C1.prototype=Ho.prototype;function ny(t,e,n){this.props=t,this.context=e,this.refs=x1,this.updater=n||A1}var ry=ny.prototype=new C1;ry.constructor=ny;R1(ry,Ho.prototype);ry.isPureReactComponent=!0;var sw=Array.isArray,b1=Object.prototype.hasOwnProperty,sy={current:null},k1={key:!0,ref:!0,__self:!0,__source:!0};function N1(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)b1.call(e,r)&&!k1.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Yl,type:t,key:i,ref:o,props:s,_owner:sy.current}}function uN(t,e){return{$$typeof:Yl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function iy(t){return typeof t=="object"&&t!==null&&t.$$typeof===Yl}function cN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var iw=/\/+/g;function Bf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?cN(""+t.key):e.toString(36)}function Pc(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Yl:case Jk:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Bf(o,0):r,sw(s)?(n="",t!=null&&(n=t.replace(iw,"$&/")+"/"),Pc(s,e,n,"",function(c){return c})):s!=null&&(iy(s)&&(s=uN(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(iw,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",sw(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Bf(i,a);o+=Pc(i,e,n,l,s)}else if(l=lN(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Bf(i,a++),o+=Pc(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function $u(t,e,n){if(t==null)return t;var r=[],s=0;return Pc(t,r,"","",function(i){return e.call(n,i,s++)}),r}function hN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var $t={current:null},Ac={transition:null},dN={ReactCurrentDispatcher:$t,ReactCurrentBatchConfig:Ac,ReactCurrentOwner:sy};function O1(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:$u,forEach:function(t,e,n){$u(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $u(t,function(){e++}),e},toArray:function(t){return $u(t,function(e){return e})||[]},only:function(t){if(!iy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=Ho;re.Fragment=Zk;re.Profiler=tN;re.PureComponent=ny;re.StrictMode=eN;re.Suspense=iN;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dN;re.act=O1;re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=R1({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=sy.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)b1.call(e,l)&&!k1.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Yl,type:t.type,key:s,ref:i,props:r,_owner:o}};re.createContext=function(t){return t={$$typeof:rN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:nN,_context:t},t.Consumer=t};re.createElement=N1;re.createFactory=function(t){var e=N1.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:sN,render:t}};re.isValidElement=iy;re.lazy=function(t){return{$$typeof:aN,_payload:{_status:-1,_result:t},_init:hN}};re.memo=function(t,e){return{$$typeof:oN,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=Ac.transition;Ac.transition={};try{t()}finally{Ac.transition=e}};re.unstable_act=O1;re.useCallback=function(t,e){return $t.current.useCallback(t,e)};re.useContext=function(t){return $t.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return $t.current.useDeferredValue(t)};re.useEffect=function(t,e){return $t.current.useEffect(t,e)};re.useId=function(){return $t.current.useId()};re.useImperativeHandle=function(t,e,n){return $t.current.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return $t.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return $t.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return $t.current.useMemo(t,e)};re.useReducer=function(t,e,n){return $t.current.useReducer(t,e,n)};re.useRef=function(t){return $t.current.useRef(t)};re.useState=function(t){return $t.current.useState(t)};re.useSyncExternalStore=function(t,e,n){return $t.current.useSyncExternalStore(t,e,n)};re.useTransition=function(){return $t.current.useTransition()};re.version="18.3.1";P1.exports=re;var O=P1.exports;const ye=ty(O),fN=Yk({__proto__:null,default:ye},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pN=O,mN=Symbol.for("react.element"),gN=Symbol.for("react.fragment"),yN=Object.prototype.hasOwnProperty,vN=pN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_N={key:!0,ref:!0,__self:!0,__source:!0};function D1(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)yN.call(e,r)&&!_N.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:mN,type:t,key:i,ref:o,props:s,_owner:vN.current}}ad.Fragment=gN;ad.jsx=D1;ad.jsxs=D1;I1.exports=ad;var k=I1.exports,Jp={},L1={exports:{}},fn={},V1={exports:{}},M1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,H){var G=B.length;B.push(H);e:for(;0<G;){var ge=G-1>>>1,ne=B[ge];if(0<s(ne,H))B[ge]=H,B[G]=ne,G=ge;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var H=B[0],G=B.pop();if(G!==H){B[0]=G;e:for(var ge=0,ne=B.length,le=ne>>>1;ge<le;){var ze=2*(ge+1)-1,Ke=B[ze],at=ze+1,Lt=B[at];if(0>s(Ke,G))at<ne&&0>s(Lt,Ke)?(B[ge]=Lt,B[at]=G,ge=at):(B[ge]=Ke,B[ze]=G,ge=ze);else if(at<ne&&0>s(Lt,G))B[ge]=Lt,B[at]=G,ge=at;else break e}}return H}function s(B,H){var G=B.sortIndex-H.sortIndex;return G!==0?G:B.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,f=3,y=!1,w=!1,T=!1,P=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(B){for(var H=n(c);H!==null;){if(H.callback===null)r(c);else if(H.startTime<=B)r(c),H.sortIndex=H.expirationTime,e(l,H);else break;H=n(c)}}function x(B){if(T=!1,_(B),!w)if(n(l)!==null)w=!0,Dt(D);else{var H=n(c);H!==null&&oe(x,H.startTime-B)}}function D(B,H){w=!1,T&&(T=!1,E(v),v=-1),y=!0;var G=f;try{for(_(H),d=n(l);d!==null&&(!(d.expirationTime>H)||B&&!R());){var ge=d.callback;if(typeof ge=="function"){d.callback=null,f=d.priorityLevel;var ne=ge(d.expirationTime<=H);H=t.unstable_now(),typeof ne=="function"?d.callback=ne:d===n(l)&&r(l),_(H)}else r(l);d=n(l)}if(d!==null)var le=!0;else{var ze=n(c);ze!==null&&oe(x,ze.startTime-H),le=!1}return le}finally{d=null,f=G,y=!1}}var V=!1,S=null,v=-1,A=5,C=-1;function R(){return!(t.unstable_now()-C<A)}function N(){if(S!==null){var B=t.unstable_now();C=B;var H=!0;try{H=S(!0,B)}finally{H?b():(V=!1,S=null)}}else V=!1}var b;if(typeof g=="function")b=function(){g(N)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,de=Z.port2;Z.port1.onmessage=N,b=function(){de.postMessage(null)}}else b=function(){P(N,0)};function Dt(B){S=B,V||(V=!0,b())}function oe(B,H){v=P(function(){B(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){w||y||(w=!0,Dt(D))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(f){case 1:case 2:case 3:var H=3;break;default:H=f}var G=f;f=H;try{return B()}finally{f=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,H){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var G=f;f=B;try{return H()}finally{f=G}},t.unstable_scheduleCallback=function(B,H,G){var ge=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ge+G:ge):G=ge,B){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=G+ne,B={id:h++,callback:H,priorityLevel:B,startTime:G,expirationTime:ne,sortIndex:-1},G>ge?(B.sortIndex=G,e(c,B),n(l)===null&&B===n(c)&&(T?(E(v),v=-1):T=!0,oe(x,G-ge))):(B.sortIndex=ne,e(l,B),w||y||(w=!0,Dt(D))),B},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(B){var H=f;return function(){var G=f;f=H;try{return B.apply(this,arguments)}finally{f=G}}}})(M1);V1.exports=M1;var wN=V1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EN=O,hn=wN;function j(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var F1=new Set,ml={};function Ii(t,e){Po(t,e),Po(t+"Capture",e)}function Po(t,e){for(ml[t]=e,t=0;t<e.length;t++)F1.add(e[t])}var Nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zp=Object.prototype.hasOwnProperty,TN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ow={},aw={};function SN(t){return Zp.call(aw,t)?!0:Zp.call(ow,t)?!1:TN.test(t)?aw[t]=!0:(ow[t]=!0,!1)}function IN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function PN(t,e,n,r){if(e===null||typeof e>"u"||IN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function zt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var gt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){gt[t]=new zt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];gt[e]=new zt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){gt[t]=new zt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){gt[t]=new zt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){gt[t]=new zt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){gt[t]=new zt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){gt[t]=new zt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){gt[t]=new zt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){gt[t]=new zt(t,5,!1,t.toLowerCase(),null,!1,!1)});var oy=/[\-:]([a-z])/g;function ay(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(oy,ay);gt[e]=new zt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(oy,ay);gt[e]=new zt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(oy,ay);gt[e]=new zt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){gt[t]=new zt(t,1,!1,t.toLowerCase(),null,!1,!1)});gt.xlinkHref=new zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){gt[t]=new zt(t,1,!1,t.toLowerCase(),null,!0,!0)});function ly(t,e,n,r){var s=gt.hasOwnProperty(e)?gt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(PN(e,n,s,r)&&(n=null),r||s===null?SN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var jr=EN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zu=Symbol.for("react.element"),qi=Symbol.for("react.portal"),Ki=Symbol.for("react.fragment"),uy=Symbol.for("react.strict_mode"),em=Symbol.for("react.profiler"),U1=Symbol.for("react.provider"),j1=Symbol.for("react.context"),cy=Symbol.for("react.forward_ref"),tm=Symbol.for("react.suspense"),nm=Symbol.for("react.suspense_list"),hy=Symbol.for("react.memo"),Xr=Symbol.for("react.lazy"),B1=Symbol.for("react.offscreen"),lw=Symbol.iterator;function _a(t){return t===null||typeof t!="object"?null:(t=lw&&t[lw]||t["@@iterator"],typeof t=="function"?t:null)}var Fe=Object.assign,$f;function ba(t){if($f===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);$f=e&&e[1]||""}return`
`+$f+t}var zf=!1;function Wf(t,e){if(!t||zf)return"";zf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{zf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ba(t):""}function AN(t){switch(t.tag){case 5:return ba(t.type);case 16:return ba("Lazy");case 13:return ba("Suspense");case 19:return ba("SuspenseList");case 0:case 2:case 15:return t=Wf(t.type,!1),t;case 11:return t=Wf(t.type.render,!1),t;case 1:return t=Wf(t.type,!0),t;default:return""}}function rm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ki:return"Fragment";case qi:return"Portal";case em:return"Profiler";case uy:return"StrictMode";case tm:return"Suspense";case nm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case j1:return(t.displayName||"Context")+".Consumer";case U1:return(t._context.displayName||"Context")+".Provider";case cy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case hy:return e=t.displayName||null,e!==null?e:rm(t.type)||"Memo";case Xr:e=t._payload,t=t._init;try{return rm(t(e))}catch{}}return null}function RN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rm(e);case 8:return e===uy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ws(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function $1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function xN(t){var e=$1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Wu(t){t._valueTracker||(t._valueTracker=xN(t))}function z1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=$1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function nh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function sm(t,e){var n=e.checked;return Fe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function uw(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ws(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function W1(t,e){e=e.checked,e!=null&&ly(t,"checked",e,!1)}function im(t,e){W1(t,e);var n=ws(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?om(t,e.type,n):e.hasOwnProperty("defaultValue")&&om(t,e.type,ws(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function cw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function om(t,e,n){(e!=="number"||nh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ka=Array.isArray;function co(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ws(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function am(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(j(91));return Fe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function hw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(j(92));if(ka(n)){if(1<n.length)throw Error(j(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ws(n)}}function H1(t,e){var n=ws(e.value),r=ws(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function dw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function q1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?q1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Hu,K1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Hu=Hu||document.createElement("div"),Hu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Hu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function gl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ga={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CN=["Webkit","ms","Moz","O"];Object.keys(Ga).forEach(function(t){CN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ga[e]=Ga[t]})});function G1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ga.hasOwnProperty(t)&&Ga[t]?(""+e).trim():e+"px"}function Q1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=G1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var bN=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function um(t,e){if(e){if(bN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(j(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(j(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(j(61))}if(e.style!=null&&typeof e.style!="object")throw Error(j(62))}}function cm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hm=null;function dy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var dm=null,ho=null,fo=null;function fw(t){if(t=eu(t)){if(typeof dm!="function")throw Error(j(280));var e=t.stateNode;e&&(e=dd(e),dm(t.stateNode,t.type,e))}}function X1(t){ho?fo?fo.push(t):fo=[t]:ho=t}function Y1(){if(ho){var t=ho,e=fo;if(fo=ho=null,fw(t),e)for(t=0;t<e.length;t++)fw(e[t])}}function J1(t,e){return t(e)}function Z1(){}var Hf=!1;function eI(t,e,n){if(Hf)return t(e,n);Hf=!0;try{return J1(t,e,n)}finally{Hf=!1,(ho!==null||fo!==null)&&(Z1(),Y1())}}function yl(t,e){var n=t.stateNode;if(n===null)return null;var r=dd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(j(231,e,typeof n));return n}var fm=!1;if(Nr)try{var wa={};Object.defineProperty(wa,"passive",{get:function(){fm=!0}}),window.addEventListener("test",wa,wa),window.removeEventListener("test",wa,wa)}catch{fm=!1}function kN(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Qa=!1,rh=null,sh=!1,pm=null,NN={onError:function(t){Qa=!0,rh=t}};function ON(t,e,n,r,s,i,o,a,l){Qa=!1,rh=null,kN.apply(NN,arguments)}function DN(t,e,n,r,s,i,o,a,l){if(ON.apply(this,arguments),Qa){if(Qa){var c=rh;Qa=!1,rh=null}else throw Error(j(198));sh||(sh=!0,pm=c)}}function Pi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function tI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function pw(t){if(Pi(t)!==t)throw Error(j(188))}function LN(t){var e=t.alternate;if(!e){if(e=Pi(t),e===null)throw Error(j(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return pw(s),t;if(i===r)return pw(s),e;i=i.sibling}throw Error(j(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(j(189))}}if(n.alternate!==r)throw Error(j(190))}if(n.tag!==3)throw Error(j(188));return n.stateNode.current===n?t:e}function nI(t){return t=LN(t),t!==null?rI(t):null}function rI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=rI(t);if(e!==null)return e;t=t.sibling}return null}var sI=hn.unstable_scheduleCallback,mw=hn.unstable_cancelCallback,VN=hn.unstable_shouldYield,MN=hn.unstable_requestPaint,qe=hn.unstable_now,FN=hn.unstable_getCurrentPriorityLevel,fy=hn.unstable_ImmediatePriority,iI=hn.unstable_UserBlockingPriority,ih=hn.unstable_NormalPriority,UN=hn.unstable_LowPriority,oI=hn.unstable_IdlePriority,ld=null,er=null;function jN(t){if(er&&typeof er.onCommitFiberRoot=="function")try{er.onCommitFiberRoot(ld,t,void 0,(t.current.flags&128)===128)}catch{}}var Mn=Math.clz32?Math.clz32:zN,BN=Math.log,$N=Math.LN2;function zN(t){return t>>>=0,t===0?32:31-(BN(t)/$N|0)|0}var qu=64,Ku=4194304;function Na(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function oh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Na(a):(i&=o,i!==0&&(r=Na(i)))}else o=n&~s,o!==0?r=Na(o):i!==0&&(r=Na(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Mn(e),s=1<<n,r|=t[n],e&=~s;return r}function WN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Mn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=WN(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function mm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function aI(){var t=qu;return qu<<=1,!(qu&4194240)&&(qu=64),t}function qf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Jl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Mn(e),t[e]=n}function qN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Mn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function py(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Mn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ve=0;function lI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var uI,my,cI,hI,dI,gm=!1,Gu=[],as=null,ls=null,us=null,vl=new Map,_l=new Map,Jr=[],KN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gw(t,e){switch(t){case"focusin":case"focusout":as=null;break;case"dragenter":case"dragleave":ls=null;break;case"mouseover":case"mouseout":us=null;break;case"pointerover":case"pointerout":vl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_l.delete(e.pointerId)}}function Ea(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=eu(e),e!==null&&my(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function GN(t,e,n,r,s){switch(e){case"focusin":return as=Ea(as,t,e,n,r,s),!0;case"dragenter":return ls=Ea(ls,t,e,n,r,s),!0;case"mouseover":return us=Ea(us,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return vl.set(i,Ea(vl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,_l.set(i,Ea(_l.get(i)||null,t,e,n,r,s)),!0}return!1}function fI(t){var e=Qs(t.target);if(e!==null){var n=Pi(e);if(n!==null){if(e=n.tag,e===13){if(e=tI(n),e!==null){t.blockedOn=e,dI(t.priority,function(){cI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Rc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ym(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);hm=r,n.target.dispatchEvent(r),hm=null}else return e=eu(n),e!==null&&my(e),t.blockedOn=n,!1;e.shift()}return!0}function yw(t,e,n){Rc(t)&&n.delete(e)}function QN(){gm=!1,as!==null&&Rc(as)&&(as=null),ls!==null&&Rc(ls)&&(ls=null),us!==null&&Rc(us)&&(us=null),vl.forEach(yw),_l.forEach(yw)}function Ta(t,e){t.blockedOn===e&&(t.blockedOn=null,gm||(gm=!0,hn.unstable_scheduleCallback(hn.unstable_NormalPriority,QN)))}function wl(t){function e(s){return Ta(s,t)}if(0<Gu.length){Ta(Gu[0],t);for(var n=1;n<Gu.length;n++){var r=Gu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(as!==null&&Ta(as,t),ls!==null&&Ta(ls,t),us!==null&&Ta(us,t),vl.forEach(e),_l.forEach(e),n=0;n<Jr.length;n++)r=Jr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Jr.length&&(n=Jr[0],n.blockedOn===null);)fI(n),n.blockedOn===null&&Jr.shift()}var po=jr.ReactCurrentBatchConfig,ah=!0;function XN(t,e,n,r){var s=ve,i=po.transition;po.transition=null;try{ve=1,gy(t,e,n,r)}finally{ve=s,po.transition=i}}function YN(t,e,n,r){var s=ve,i=po.transition;po.transition=null;try{ve=4,gy(t,e,n,r)}finally{ve=s,po.transition=i}}function gy(t,e,n,r){if(ah){var s=ym(t,e,n,r);if(s===null)np(t,e,r,lh,n),gw(t,r);else if(GN(s,t,e,n,r))r.stopPropagation();else if(gw(t,r),e&4&&-1<KN.indexOf(t)){for(;s!==null;){var i=eu(s);if(i!==null&&uI(i),i=ym(t,e,n,r),i===null&&np(t,e,r,lh,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else np(t,e,r,null,n)}}var lh=null;function ym(t,e,n,r){if(lh=null,t=dy(r),t=Qs(t),t!==null)if(e=Pi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=tI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return lh=t,null}function pI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(FN()){case fy:return 1;case iI:return 4;case ih:case UN:return 16;case oI:return 536870912;default:return 16}default:return 16}}var ns=null,yy=null,xc=null;function mI(){if(xc)return xc;var t,e=yy,n=e.length,r,s="value"in ns?ns.value:ns.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return xc=s.slice(t,1<r?1-r:void 0)}function Cc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Qu(){return!0}function vw(){return!1}function pn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Qu:vw,this.isPropagationStopped=vw,this}return Fe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qu)},persist:function(){},isPersistent:Qu}),e}var qo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vy=pn(qo),Zl=Fe({},qo,{view:0,detail:0}),JN=pn(Zl),Kf,Gf,Sa,ud=Fe({},Zl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_y,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Sa&&(Sa&&t.type==="mousemove"?(Kf=t.screenX-Sa.screenX,Gf=t.screenY-Sa.screenY):Gf=Kf=0,Sa=t),Kf)},movementY:function(t){return"movementY"in t?t.movementY:Gf}}),_w=pn(ud),ZN=Fe({},ud,{dataTransfer:0}),eO=pn(ZN),tO=Fe({},Zl,{relatedTarget:0}),Qf=pn(tO),nO=Fe({},qo,{animationName:0,elapsedTime:0,pseudoElement:0}),rO=pn(nO),sO=Fe({},qo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),iO=pn(sO),oO=Fe({},qo,{data:0}),ww=pn(oO),aO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cO(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=uO[t])?!!e[t]:!1}function _y(){return cO}var hO=Fe({},Zl,{key:function(t){if(t.key){var e=aO[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Cc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?lO[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_y,charCode:function(t){return t.type==="keypress"?Cc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Cc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),dO=pn(hO),fO=Fe({},ud,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ew=pn(fO),pO=Fe({},Zl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_y}),mO=pn(pO),gO=Fe({},qo,{propertyName:0,elapsedTime:0,pseudoElement:0}),yO=pn(gO),vO=Fe({},ud,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),_O=pn(vO),wO=[9,13,27,32],wy=Nr&&"CompositionEvent"in window,Xa=null;Nr&&"documentMode"in document&&(Xa=document.documentMode);var EO=Nr&&"TextEvent"in window&&!Xa,gI=Nr&&(!wy||Xa&&8<Xa&&11>=Xa),Tw=" ",Sw=!1;function yI(t,e){switch(t){case"keyup":return wO.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Gi=!1;function TO(t,e){switch(t){case"compositionend":return vI(e);case"keypress":return e.which!==32?null:(Sw=!0,Tw);case"textInput":return t=e.data,t===Tw&&Sw?null:t;default:return null}}function SO(t,e){if(Gi)return t==="compositionend"||!wy&&yI(t,e)?(t=mI(),xc=yy=ns=null,Gi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return gI&&e.locale!=="ko"?null:e.data;default:return null}}var IO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Iw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!IO[t.type]:e==="textarea"}function _I(t,e,n,r){X1(r),e=uh(e,"onChange"),0<e.length&&(n=new vy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ya=null,El=null;function PO(t){bI(t,0)}function cd(t){var e=Yi(t);if(z1(e))return t}function AO(t,e){if(t==="change")return e}var wI=!1;if(Nr){var Xf;if(Nr){var Yf="oninput"in document;if(!Yf){var Pw=document.createElement("div");Pw.setAttribute("oninput","return;"),Yf=typeof Pw.oninput=="function"}Xf=Yf}else Xf=!1;wI=Xf&&(!document.documentMode||9<document.documentMode)}function Aw(){Ya&&(Ya.detachEvent("onpropertychange",EI),El=Ya=null)}function EI(t){if(t.propertyName==="value"&&cd(El)){var e=[];_I(e,El,t,dy(t)),eI(PO,e)}}function RO(t,e,n){t==="focusin"?(Aw(),Ya=e,El=n,Ya.attachEvent("onpropertychange",EI)):t==="focusout"&&Aw()}function xO(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cd(El)}function CO(t,e){if(t==="click")return cd(e)}function bO(t,e){if(t==="input"||t==="change")return cd(e)}function kO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Bn=typeof Object.is=="function"?Object.is:kO;function Tl(t,e){if(Bn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Zp.call(e,s)||!Bn(t[s],e[s]))return!1}return!0}function Rw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function xw(t,e){var n=Rw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Rw(n)}}function TI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?TI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function SI(){for(var t=window,e=nh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=nh(t.document)}return e}function Ey(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function NO(t){var e=SI(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&TI(n.ownerDocument.documentElement,n)){if(r!==null&&Ey(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=xw(n,i);var o=xw(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var OO=Nr&&"documentMode"in document&&11>=document.documentMode,Qi=null,vm=null,Ja=null,_m=!1;function Cw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_m||Qi==null||Qi!==nh(r)||(r=Qi,"selectionStart"in r&&Ey(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ja&&Tl(Ja,r)||(Ja=r,r=uh(vm,"onSelect"),0<r.length&&(e=new vy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Qi)))}function Xu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Xi={animationend:Xu("Animation","AnimationEnd"),animationiteration:Xu("Animation","AnimationIteration"),animationstart:Xu("Animation","AnimationStart"),transitionend:Xu("Transition","TransitionEnd")},Jf={},II={};Nr&&(II=document.createElement("div").style,"AnimationEvent"in window||(delete Xi.animationend.animation,delete Xi.animationiteration.animation,delete Xi.animationstart.animation),"TransitionEvent"in window||delete Xi.transitionend.transition);function hd(t){if(Jf[t])return Jf[t];if(!Xi[t])return t;var e=Xi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in II)return Jf[t]=e[n];return t}var PI=hd("animationend"),AI=hd("animationiteration"),RI=hd("animationstart"),xI=hd("transitionend"),CI=new Map,bw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cs(t,e){CI.set(t,e),Ii(e,[t])}for(var Zf=0;Zf<bw.length;Zf++){var ep=bw[Zf],DO=ep.toLowerCase(),LO=ep[0].toUpperCase()+ep.slice(1);Cs(DO,"on"+LO)}Cs(PI,"onAnimationEnd");Cs(AI,"onAnimationIteration");Cs(RI,"onAnimationStart");Cs("dblclick","onDoubleClick");Cs("focusin","onFocus");Cs("focusout","onBlur");Cs(xI,"onTransitionEnd");Po("onMouseEnter",["mouseout","mouseover"]);Po("onMouseLeave",["mouseout","mouseover"]);Po("onPointerEnter",["pointerout","pointerover"]);Po("onPointerLeave",["pointerout","pointerover"]);Ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ii("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VO=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oa));function kw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,DN(r,e,void 0,t),t.currentTarget=null}function bI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;kw(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;kw(s,a,c),i=l}}}if(sh)throw t=pm,sh=!1,pm=null,t}function xe(t,e){var n=e[Im];n===void 0&&(n=e[Im]=new Set);var r=t+"__bubble";n.has(r)||(kI(e,t,2,!1),n.add(r))}function tp(t,e,n){var r=0;e&&(r|=4),kI(n,t,r,e)}var Yu="_reactListening"+Math.random().toString(36).slice(2);function Sl(t){if(!t[Yu]){t[Yu]=!0,F1.forEach(function(n){n!=="selectionchange"&&(VO.has(n)||tp(n,!1,t),tp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Yu]||(e[Yu]=!0,tp("selectionchange",!1,e))}}function kI(t,e,n,r){switch(pI(e)){case 1:var s=XN;break;case 4:s=YN;break;default:s=gy}n=s.bind(null,e,n,t),s=void 0,!fm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function np(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Qs(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}eI(function(){var c=i,h=dy(n),d=[];e:{var f=CI.get(t);if(f!==void 0){var y=vy,w=t;switch(t){case"keypress":if(Cc(n)===0)break e;case"keydown":case"keyup":y=dO;break;case"focusin":w="focus",y=Qf;break;case"focusout":w="blur",y=Qf;break;case"beforeblur":case"afterblur":y=Qf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=_w;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=eO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=mO;break;case PI:case AI:case RI:y=rO;break;case xI:y=yO;break;case"scroll":y=JN;break;case"wheel":y=_O;break;case"copy":case"cut":case"paste":y=iO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Ew}var T=(e&4)!==0,P=!T&&t==="scroll",E=T?f!==null?f+"Capture":null:f;T=[];for(var g=c,_;g!==null;){_=g;var x=_.stateNode;if(_.tag===5&&x!==null&&(_=x,E!==null&&(x=yl(g,E),x!=null&&T.push(Il(g,x,_)))),P)break;g=g.return}0<T.length&&(f=new y(f,w,null,n,h),d.push({event:f,listeners:T}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",f&&n!==hm&&(w=n.relatedTarget||n.fromElement)&&(Qs(w)||w[Or]))break e;if((y||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,y?(w=n.relatedTarget||n.toElement,y=c,w=w?Qs(w):null,w!==null&&(P=Pi(w),w!==P||w.tag!==5&&w.tag!==6)&&(w=null)):(y=null,w=c),y!==w)){if(T=_w,x="onMouseLeave",E="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(T=Ew,x="onPointerLeave",E="onPointerEnter",g="pointer"),P=y==null?f:Yi(y),_=w==null?f:Yi(w),f=new T(x,g+"leave",y,n,h),f.target=P,f.relatedTarget=_,x=null,Qs(h)===c&&(T=new T(E,g+"enter",w,n,h),T.target=_,T.relatedTarget=P,x=T),P=x,y&&w)t:{for(T=y,E=w,g=0,_=T;_;_=Mi(_))g++;for(_=0,x=E;x;x=Mi(x))_++;for(;0<g-_;)T=Mi(T),g--;for(;0<_-g;)E=Mi(E),_--;for(;g--;){if(T===E||E!==null&&T===E.alternate)break t;T=Mi(T),E=Mi(E)}T=null}else T=null;y!==null&&Nw(d,f,y,T,!1),w!==null&&P!==null&&Nw(d,P,w,T,!0)}}e:{if(f=c?Yi(c):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var D=AO;else if(Iw(f))if(wI)D=bO;else{D=xO;var V=RO}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(D=CO);if(D&&(D=D(t,c))){_I(d,D,n,h);break e}V&&V(t,f,c),t==="focusout"&&(V=f._wrapperState)&&V.controlled&&f.type==="number"&&om(f,"number",f.value)}switch(V=c?Yi(c):window,t){case"focusin":(Iw(V)||V.contentEditable==="true")&&(Qi=V,vm=c,Ja=null);break;case"focusout":Ja=vm=Qi=null;break;case"mousedown":_m=!0;break;case"contextmenu":case"mouseup":case"dragend":_m=!1,Cw(d,n,h);break;case"selectionchange":if(OO)break;case"keydown":case"keyup":Cw(d,n,h)}var S;if(wy)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Gi?yI(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(gI&&n.locale!=="ko"&&(Gi||v!=="onCompositionStart"?v==="onCompositionEnd"&&Gi&&(S=mI()):(ns=h,yy="value"in ns?ns.value:ns.textContent,Gi=!0)),V=uh(c,v),0<V.length&&(v=new ww(v,t,null,n,h),d.push({event:v,listeners:V}),S?v.data=S:(S=vI(n),S!==null&&(v.data=S)))),(S=EO?TO(t,n):SO(t,n))&&(c=uh(c,"onBeforeInput"),0<c.length&&(h=new ww("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=S))}bI(d,e)})}function Il(t,e,n){return{instance:t,listener:e,currentTarget:n}}function uh(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=yl(t,n),i!=null&&r.unshift(Il(t,i,s)),i=yl(t,e),i!=null&&r.push(Il(t,i,s))),t=t.return}return r}function Mi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Nw(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=yl(n,i),l!=null&&o.unshift(Il(n,l,a))):s||(l=yl(n,i),l!=null&&o.push(Il(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var MO=/\r\n?/g,FO=/\u0000|\uFFFD/g;function Ow(t){return(typeof t=="string"?t:""+t).replace(MO,`
`).replace(FO,"")}function Ju(t,e,n){if(e=Ow(e),Ow(t)!==e&&n)throw Error(j(425))}function ch(){}var wm=null,Em=null;function Tm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Sm=typeof setTimeout=="function"?setTimeout:void 0,UO=typeof clearTimeout=="function"?clearTimeout:void 0,Dw=typeof Promise=="function"?Promise:void 0,jO=typeof queueMicrotask=="function"?queueMicrotask:typeof Dw<"u"?function(t){return Dw.resolve(null).then(t).catch(BO)}:Sm;function BO(t){setTimeout(function(){throw t})}function rp(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),wl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);wl(e)}function cs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Lw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ko=Math.random().toString(36).slice(2),Qn="__reactFiber$"+Ko,Pl="__reactProps$"+Ko,Or="__reactContainer$"+Ko,Im="__reactEvents$"+Ko,$O="__reactListeners$"+Ko,zO="__reactHandles$"+Ko;function Qs(t){var e=t[Qn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Or]||n[Qn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Lw(t);t!==null;){if(n=t[Qn])return n;t=Lw(t)}return e}t=n,n=t.parentNode}return null}function eu(t){return t=t[Qn]||t[Or],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Yi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(j(33))}function dd(t){return t[Pl]||null}var Pm=[],Ji=-1;function bs(t){return{current:t}}function Ce(t){0>Ji||(t.current=Pm[Ji],Pm[Ji]=null,Ji--)}function Pe(t,e){Ji++,Pm[Ji]=t.current,t.current=e}var Es={},Nt=bs(Es),Xt=bs(!1),ci=Es;function Ao(t,e){var n=t.type.contextTypes;if(!n)return Es;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Yt(t){return t=t.childContextTypes,t!=null}function hh(){Ce(Xt),Ce(Nt)}function Vw(t,e,n){if(Nt.current!==Es)throw Error(j(168));Pe(Nt,e),Pe(Xt,n)}function NI(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(j(108,RN(t)||"Unknown",s));return Fe({},n,r)}function dh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Es,ci=Nt.current,Pe(Nt,t),Pe(Xt,Xt.current),!0}function Mw(t,e,n){var r=t.stateNode;if(!r)throw Error(j(169));n?(t=NI(t,e,ci),r.__reactInternalMemoizedMergedChildContext=t,Ce(Xt),Ce(Nt),Pe(Nt,t)):Ce(Xt),Pe(Xt,n)}var vr=null,fd=!1,sp=!1;function OI(t){vr===null?vr=[t]:vr.push(t)}function WO(t){fd=!0,OI(t)}function ks(){if(!sp&&vr!==null){sp=!0;var t=0,e=ve;try{var n=vr;for(ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}vr=null,fd=!1}catch(s){throw vr!==null&&(vr=vr.slice(t+1)),sI(fy,ks),s}finally{ve=e,sp=!1}}return null}var Zi=[],eo=0,fh=null,ph=0,vn=[],_n=0,hi=null,wr=1,Er="";function Bs(t,e){Zi[eo++]=ph,Zi[eo++]=fh,fh=t,ph=e}function DI(t,e,n){vn[_n++]=wr,vn[_n++]=Er,vn[_n++]=hi,hi=t;var r=wr;t=Er;var s=32-Mn(r)-1;r&=~(1<<s),n+=1;var i=32-Mn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,wr=1<<32-Mn(e)+s|n<<s|r,Er=i+t}else wr=1<<i|n<<s|r,Er=t}function Ty(t){t.return!==null&&(Bs(t,1),DI(t,1,0))}function Sy(t){for(;t===fh;)fh=Zi[--eo],Zi[eo]=null,ph=Zi[--eo],Zi[eo]=null;for(;t===hi;)hi=vn[--_n],vn[_n]=null,Er=vn[--_n],vn[_n]=null,wr=vn[--_n],vn[_n]=null}var un=null,sn=null,ke=!1,Dn=null;function LI(t,e){var n=wn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Fw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,un=t,sn=cs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,un=t,sn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=hi!==null?{id:wr,overflow:Er}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=wn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,un=t,sn=null,!0):!1;default:return!1}}function Am(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Rm(t){if(ke){var e=sn;if(e){var n=e;if(!Fw(t,e)){if(Am(t))throw Error(j(418));e=cs(n.nextSibling);var r=un;e&&Fw(t,e)?LI(r,n):(t.flags=t.flags&-4097|2,ke=!1,un=t)}}else{if(Am(t))throw Error(j(418));t.flags=t.flags&-4097|2,ke=!1,un=t}}}function Uw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;un=t}function Zu(t){if(t!==un)return!1;if(!ke)return Uw(t),ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Tm(t.type,t.memoizedProps)),e&&(e=sn)){if(Am(t))throw VI(),Error(j(418));for(;e;)LI(t,e),e=cs(e.nextSibling)}if(Uw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(j(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){sn=cs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}sn=null}}else sn=un?cs(t.stateNode.nextSibling):null;return!0}function VI(){for(var t=sn;t;)t=cs(t.nextSibling)}function Ro(){sn=un=null,ke=!1}function Iy(t){Dn===null?Dn=[t]:Dn.push(t)}var HO=jr.ReactCurrentBatchConfig;function Ia(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(j(309));var r=n.stateNode}if(!r)throw Error(j(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(j(284));if(!n._owner)throw Error(j(290,t))}return t}function ec(t,e){throw t=Object.prototype.toString.call(e),Error(j(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function jw(t){var e=t._init;return e(t._payload)}function MI(t){function e(E,g){if(t){var _=E.deletions;_===null?(E.deletions=[g],E.flags|=16):_.push(g)}}function n(E,g){if(!t)return null;for(;g!==null;)e(E,g),g=g.sibling;return null}function r(E,g){for(E=new Map;g!==null;)g.key!==null?E.set(g.key,g):E.set(g.index,g),g=g.sibling;return E}function s(E,g){return E=ps(E,g),E.index=0,E.sibling=null,E}function i(E,g,_){return E.index=_,t?(_=E.alternate,_!==null?(_=_.index,_<g?(E.flags|=2,g):_):(E.flags|=2,g)):(E.flags|=1048576,g)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,g,_,x){return g===null||g.tag!==6?(g=hp(_,E.mode,x),g.return=E,g):(g=s(g,_),g.return=E,g)}function l(E,g,_,x){var D=_.type;return D===Ki?h(E,g,_.props.children,x,_.key):g!==null&&(g.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Xr&&jw(D)===g.type)?(x=s(g,_.props),x.ref=Ia(E,g,_),x.return=E,x):(x=Vc(_.type,_.key,_.props,null,E.mode,x),x.ref=Ia(E,g,_),x.return=E,x)}function c(E,g,_,x){return g===null||g.tag!==4||g.stateNode.containerInfo!==_.containerInfo||g.stateNode.implementation!==_.implementation?(g=dp(_,E.mode,x),g.return=E,g):(g=s(g,_.children||[]),g.return=E,g)}function h(E,g,_,x,D){return g===null||g.tag!==7?(g=si(_,E.mode,x,D),g.return=E,g):(g=s(g,_),g.return=E,g)}function d(E,g,_){if(typeof g=="string"&&g!==""||typeof g=="number")return g=hp(""+g,E.mode,_),g.return=E,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case zu:return _=Vc(g.type,g.key,g.props,null,E.mode,_),_.ref=Ia(E,null,g),_.return=E,_;case qi:return g=dp(g,E.mode,_),g.return=E,g;case Xr:var x=g._init;return d(E,x(g._payload),_)}if(ka(g)||_a(g))return g=si(g,E.mode,_,null),g.return=E,g;ec(E,g)}return null}function f(E,g,_,x){var D=g!==null?g.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return D!==null?null:a(E,g,""+_,x);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case zu:return _.key===D?l(E,g,_,x):null;case qi:return _.key===D?c(E,g,_,x):null;case Xr:return D=_._init,f(E,g,D(_._payload),x)}if(ka(_)||_a(_))return D!==null?null:h(E,g,_,x,null);ec(E,_)}return null}function y(E,g,_,x,D){if(typeof x=="string"&&x!==""||typeof x=="number")return E=E.get(_)||null,a(g,E,""+x,D);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case zu:return E=E.get(x.key===null?_:x.key)||null,l(g,E,x,D);case qi:return E=E.get(x.key===null?_:x.key)||null,c(g,E,x,D);case Xr:var V=x._init;return y(E,g,_,V(x._payload),D)}if(ka(x)||_a(x))return E=E.get(_)||null,h(g,E,x,D,null);ec(g,x)}return null}function w(E,g,_,x){for(var D=null,V=null,S=g,v=g=0,A=null;S!==null&&v<_.length;v++){S.index>v?(A=S,S=null):A=S.sibling;var C=f(E,S,_[v],x);if(C===null){S===null&&(S=A);break}t&&S&&C.alternate===null&&e(E,S),g=i(C,g,v),V===null?D=C:V.sibling=C,V=C,S=A}if(v===_.length)return n(E,S),ke&&Bs(E,v),D;if(S===null){for(;v<_.length;v++)S=d(E,_[v],x),S!==null&&(g=i(S,g,v),V===null?D=S:V.sibling=S,V=S);return ke&&Bs(E,v),D}for(S=r(E,S);v<_.length;v++)A=y(S,E,v,_[v],x),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?v:A.key),g=i(A,g,v),V===null?D=A:V.sibling=A,V=A);return t&&S.forEach(function(R){return e(E,R)}),ke&&Bs(E,v),D}function T(E,g,_,x){var D=_a(_);if(typeof D!="function")throw Error(j(150));if(_=D.call(_),_==null)throw Error(j(151));for(var V=D=null,S=g,v=g=0,A=null,C=_.next();S!==null&&!C.done;v++,C=_.next()){S.index>v?(A=S,S=null):A=S.sibling;var R=f(E,S,C.value,x);if(R===null){S===null&&(S=A);break}t&&S&&R.alternate===null&&e(E,S),g=i(R,g,v),V===null?D=R:V.sibling=R,V=R,S=A}if(C.done)return n(E,S),ke&&Bs(E,v),D;if(S===null){for(;!C.done;v++,C=_.next())C=d(E,C.value,x),C!==null&&(g=i(C,g,v),V===null?D=C:V.sibling=C,V=C);return ke&&Bs(E,v),D}for(S=r(E,S);!C.done;v++,C=_.next())C=y(S,E,v,C.value,x),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?v:C.key),g=i(C,g,v),V===null?D=C:V.sibling=C,V=C);return t&&S.forEach(function(N){return e(E,N)}),ke&&Bs(E,v),D}function P(E,g,_,x){if(typeof _=="object"&&_!==null&&_.type===Ki&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case zu:e:{for(var D=_.key,V=g;V!==null;){if(V.key===D){if(D=_.type,D===Ki){if(V.tag===7){n(E,V.sibling),g=s(V,_.props.children),g.return=E,E=g;break e}}else if(V.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Xr&&jw(D)===V.type){n(E,V.sibling),g=s(V,_.props),g.ref=Ia(E,V,_),g.return=E,E=g;break e}n(E,V);break}else e(E,V);V=V.sibling}_.type===Ki?(g=si(_.props.children,E.mode,x,_.key),g.return=E,E=g):(x=Vc(_.type,_.key,_.props,null,E.mode,x),x.ref=Ia(E,g,_),x.return=E,E=x)}return o(E);case qi:e:{for(V=_.key;g!==null;){if(g.key===V)if(g.tag===4&&g.stateNode.containerInfo===_.containerInfo&&g.stateNode.implementation===_.implementation){n(E,g.sibling),g=s(g,_.children||[]),g.return=E,E=g;break e}else{n(E,g);break}else e(E,g);g=g.sibling}g=dp(_,E.mode,x),g.return=E,E=g}return o(E);case Xr:return V=_._init,P(E,g,V(_._payload),x)}if(ka(_))return w(E,g,_,x);if(_a(_))return T(E,g,_,x);ec(E,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,g!==null&&g.tag===6?(n(E,g.sibling),g=s(g,_),g.return=E,E=g):(n(E,g),g=hp(_,E.mode,x),g.return=E,E=g),o(E)):n(E,g)}return P}var xo=MI(!0),FI=MI(!1),mh=bs(null),gh=null,to=null,Py=null;function Ay(){Py=to=gh=null}function Ry(t){var e=mh.current;Ce(mh),t._currentValue=e}function xm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function mo(t,e){gh=t,Py=to=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Qt=!0),t.firstContext=null)}function Sn(t){var e=t._currentValue;if(Py!==t)if(t={context:t,memoizedValue:e,next:null},to===null){if(gh===null)throw Error(j(308));to=t,gh.dependencies={lanes:0,firstContext:t}}else to=to.next=t;return e}var Xs=null;function xy(t){Xs===null?Xs=[t]:Xs.push(t)}function UI(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,xy(e)):(n.next=s.next,s.next=n),e.interleaved=n,Dr(t,r)}function Dr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Yr=!1;function Cy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ar(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function hs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Dr(t,n)}return s=r.interleaved,s===null?(e.next=e,xy(r)):(e.next=s.next,s.next=e),r.interleaved=e,Dr(t,n)}function bc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,py(t,n)}}function Bw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function yh(t,e,n,r){var s=t.updateQueue;Yr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,h=c=l=null,a=i;do{var f=a.lane,y=a.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,T=a;switch(f=e,y=n,T.tag){case 1:if(w=T.payload,typeof w=="function"){d=w.call(y,d,f);break e}d=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=T.payload,f=typeof w=="function"?w.call(y,d,f):w,f==null)break e;d=Fe({},d,f);break e;case 2:Yr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else y={eventTime:y,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=y,l=d):h=h.next=y,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(h===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);fi|=o,t.lanes=o,t.memoizedState=d}}function $w(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(j(191,s));s.call(r)}}}var tu={},tr=bs(tu),Al=bs(tu),Rl=bs(tu);function Ys(t){if(t===tu)throw Error(j(174));return t}function by(t,e){switch(Pe(Rl,e),Pe(Al,t),Pe(tr,tu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=lm(e,t)}Ce(tr),Pe(tr,e)}function Co(){Ce(tr),Ce(Al),Ce(Rl)}function BI(t){Ys(Rl.current);var e=Ys(tr.current),n=lm(e,t.type);e!==n&&(Pe(Al,t),Pe(tr,n))}function ky(t){Al.current===t&&(Ce(tr),Ce(Al))}var De=bs(0);function vh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ip=[];function Ny(){for(var t=0;t<ip.length;t++)ip[t]._workInProgressVersionPrimary=null;ip.length=0}var kc=jr.ReactCurrentDispatcher,op=jr.ReactCurrentBatchConfig,di=0,Ve=null,Je=null,st=null,_h=!1,Za=!1,xl=0,qO=0;function Tt(){throw Error(j(321))}function Oy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Bn(t[n],e[n]))return!1;return!0}function Dy(t,e,n,r,s,i){if(di=i,Ve=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,kc.current=t===null||t.memoizedState===null?XO:YO,t=n(r,s),Za){i=0;do{if(Za=!1,xl=0,25<=i)throw Error(j(301));i+=1,st=Je=null,e.updateQueue=null,kc.current=JO,t=n(r,s)}while(Za)}if(kc.current=wh,e=Je!==null&&Je.next!==null,di=0,st=Je=Ve=null,_h=!1,e)throw Error(j(300));return t}function Ly(){var t=xl!==0;return xl=0,t}function qn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?Ve.memoizedState=st=t:st=st.next=t,st}function In(){if(Je===null){var t=Ve.alternate;t=t!==null?t.memoizedState:null}else t=Je.next;var e=st===null?Ve.memoizedState:st.next;if(e!==null)st=e,Je=t;else{if(t===null)throw Error(j(310));Je=t,t={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},st===null?Ve.memoizedState=st=t:st=st.next=t}return st}function Cl(t,e){return typeof e=="function"?e(t):e}function ap(t){var e=In(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=Je,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var h=c.lane;if((di&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Ve.lanes|=h,fi|=h}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Bn(r,e.memoizedState)||(Qt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ve.lanes|=i,fi|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function lp(t){var e=In(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Bn(i,e.memoizedState)||(Qt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function $I(){}function zI(t,e){var n=Ve,r=In(),s=e(),i=!Bn(r.memoizedState,s);if(i&&(r.memoizedState=s,Qt=!0),r=r.queue,Vy(qI.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||st!==null&&st.memoizedState.tag&1){if(n.flags|=2048,bl(9,HI.bind(null,n,r,s,e),void 0,null),it===null)throw Error(j(349));di&30||WI(n,e,s)}return s}function WI(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ve.updateQueue,e===null?(e={lastEffect:null,stores:null},Ve.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function HI(t,e,n,r){e.value=n,e.getSnapshot=r,KI(e)&&GI(t)}function qI(t,e,n){return n(function(){KI(e)&&GI(t)})}function KI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Bn(t,n)}catch{return!0}}function GI(t){var e=Dr(t,1);e!==null&&Fn(e,t,1,-1)}function zw(t){var e=qn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cl,lastRenderedState:t},e.queue=t,t=t.dispatch=QO.bind(null,Ve,t),[e.memoizedState,t]}function bl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ve.updateQueue,e===null?(e={lastEffect:null,stores:null},Ve.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function QI(){return In().memoizedState}function Nc(t,e,n,r){var s=qn();Ve.flags|=t,s.memoizedState=bl(1|e,n,void 0,r===void 0?null:r)}function pd(t,e,n,r){var s=In();r=r===void 0?null:r;var i=void 0;if(Je!==null){var o=Je.memoizedState;if(i=o.destroy,r!==null&&Oy(r,o.deps)){s.memoizedState=bl(e,n,i,r);return}}Ve.flags|=t,s.memoizedState=bl(1|e,n,i,r)}function Ww(t,e){return Nc(8390656,8,t,e)}function Vy(t,e){return pd(2048,8,t,e)}function XI(t,e){return pd(4,2,t,e)}function YI(t,e){return pd(4,4,t,e)}function JI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ZI(t,e,n){return n=n!=null?n.concat([t]):null,pd(4,4,JI.bind(null,e,t),n)}function My(){}function eP(t,e){var n=In();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Oy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function tP(t,e){var n=In();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Oy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function nP(t,e,n){return di&21?(Bn(n,e)||(n=aI(),Ve.lanes|=n,fi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Qt=!0),t.memoizedState=n)}function KO(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var r=op.transition;op.transition={};try{t(!1),e()}finally{ve=n,op.transition=r}}function rP(){return In().memoizedState}function GO(t,e,n){var r=fs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},sP(t))iP(e,n);else if(n=UI(t,e,n,r),n!==null){var s=Bt();Fn(n,t,r,s),oP(n,e,r)}}function QO(t,e,n){var r=fs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(sP(t))iP(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Bn(a,o)){var l=e.interleaved;l===null?(s.next=s,xy(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=UI(t,e,s,r),n!==null&&(s=Bt(),Fn(n,t,r,s),oP(n,e,r))}}function sP(t){var e=t.alternate;return t===Ve||e!==null&&e===Ve}function iP(t,e){Za=_h=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function oP(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,py(t,n)}}var wh={readContext:Sn,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useInsertionEffect:Tt,useLayoutEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useMutableSource:Tt,useSyncExternalStore:Tt,useId:Tt,unstable_isNewReconciler:!1},XO={readContext:Sn,useCallback:function(t,e){return qn().memoizedState=[t,e===void 0?null:e],t},useContext:Sn,useEffect:Ww,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Nc(4194308,4,JI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Nc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Nc(4,2,t,e)},useMemo:function(t,e){var n=qn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=qn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=GO.bind(null,Ve,t),[r.memoizedState,t]},useRef:function(t){var e=qn();return t={current:t},e.memoizedState=t},useState:zw,useDebugValue:My,useDeferredValue:function(t){return qn().memoizedState=t},useTransition:function(){var t=zw(!1),e=t[0];return t=KO.bind(null,t[1]),qn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ve,s=qn();if(ke){if(n===void 0)throw Error(j(407));n=n()}else{if(n=e(),it===null)throw Error(j(349));di&30||WI(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Ww(qI.bind(null,r,i,t),[t]),r.flags|=2048,bl(9,HI.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=qn(),e=it.identifierPrefix;if(ke){var n=Er,r=wr;n=(r&~(1<<32-Mn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=xl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=qO++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},YO={readContext:Sn,useCallback:eP,useContext:Sn,useEffect:Vy,useImperativeHandle:ZI,useInsertionEffect:XI,useLayoutEffect:YI,useMemo:tP,useReducer:ap,useRef:QI,useState:function(){return ap(Cl)},useDebugValue:My,useDeferredValue:function(t){var e=In();return nP(e,Je.memoizedState,t)},useTransition:function(){var t=ap(Cl)[0],e=In().memoizedState;return[t,e]},useMutableSource:$I,useSyncExternalStore:zI,useId:rP,unstable_isNewReconciler:!1},JO={readContext:Sn,useCallback:eP,useContext:Sn,useEffect:Vy,useImperativeHandle:ZI,useInsertionEffect:XI,useLayoutEffect:YI,useMemo:tP,useReducer:lp,useRef:QI,useState:function(){return lp(Cl)},useDebugValue:My,useDeferredValue:function(t){var e=In();return Je===null?e.memoizedState=t:nP(e,Je.memoizedState,t)},useTransition:function(){var t=lp(Cl)[0],e=In().memoizedState;return[t,e]},useMutableSource:$I,useSyncExternalStore:zI,useId:rP,unstable_isNewReconciler:!1};function bn(t,e){if(t&&t.defaultProps){e=Fe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Cm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Fe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var md={isMounted:function(t){return(t=t._reactInternals)?Pi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Bt(),s=fs(t),i=Ar(r,s);i.payload=e,n!=null&&(i.callback=n),e=hs(t,i,s),e!==null&&(Fn(e,t,s,r),bc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Bt(),s=fs(t),i=Ar(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=hs(t,i,s),e!==null&&(Fn(e,t,s,r),bc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Bt(),r=fs(t),s=Ar(n,r);s.tag=2,e!=null&&(s.callback=e),e=hs(t,s,r),e!==null&&(Fn(e,t,r,n),bc(e,t,r))}};function Hw(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Tl(n,r)||!Tl(s,i):!0}function aP(t,e,n){var r=!1,s=Es,i=e.contextType;return typeof i=="object"&&i!==null?i=Sn(i):(s=Yt(e)?ci:Nt.current,r=e.contextTypes,i=(r=r!=null)?Ao(t,s):Es),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=md,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function qw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&md.enqueueReplaceState(e,e.state,null)}function bm(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Cy(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Sn(i):(i=Yt(e)?ci:Nt.current,s.context=Ao(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Cm(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&md.enqueueReplaceState(s,s.state,null),yh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function bo(t,e){try{var n="",r=e;do n+=AN(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function up(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function km(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ZO=typeof WeakMap=="function"?WeakMap:Map;function lP(t,e,n){n=Ar(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Th||(Th=!0,Bm=r),km(t,e)},n}function uP(t,e,n){n=Ar(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){km(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){km(t,e),typeof r!="function"&&(ds===null?ds=new Set([this]):ds.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Kw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new ZO;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=fD.bind(null,t,e,n),e.then(t,t))}function Gw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Qw(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ar(-1,1),e.tag=2,hs(n,e,1))),n.lanes|=1),t)}var eD=jr.ReactCurrentOwner,Qt=!1;function Ut(t,e,n,r){e.child=t===null?FI(e,null,n,r):xo(e,t.child,n,r)}function Xw(t,e,n,r,s){n=n.render;var i=e.ref;return mo(e,s),r=Dy(t,e,n,r,i,s),n=Ly(),t!==null&&!Qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Lr(t,e,s)):(ke&&n&&Ty(e),e.flags|=1,Ut(t,e,r,s),e.child)}function Yw(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Hy(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,cP(t,e,i,r,s)):(t=Vc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Tl,n(o,r)&&t.ref===e.ref)return Lr(t,e,s)}return e.flags|=1,t=ps(i,r),t.ref=e.ref,t.return=e,e.child=t}function cP(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Tl(i,r)&&t.ref===e.ref)if(Qt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Qt=!0);else return e.lanes=t.lanes,Lr(t,e,s)}return Nm(t,e,n,r,s)}function hP(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(ro,rn),rn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Pe(ro,rn),rn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Pe(ro,rn),rn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Pe(ro,rn),rn|=r;return Ut(t,e,s,n),e.child}function dP(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Nm(t,e,n,r,s){var i=Yt(n)?ci:Nt.current;return i=Ao(e,i),mo(e,s),n=Dy(t,e,n,r,i,s),r=Ly(),t!==null&&!Qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Lr(t,e,s)):(ke&&r&&Ty(e),e.flags|=1,Ut(t,e,n,s),e.child)}function Jw(t,e,n,r,s){if(Yt(n)){var i=!0;dh(e)}else i=!1;if(mo(e,s),e.stateNode===null)Oc(t,e),aP(e,n,r),bm(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Sn(c):(c=Yt(n)?ci:Nt.current,c=Ao(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&qw(e,o,r,c),Yr=!1;var f=e.memoizedState;o.state=f,yh(e,r,o,s),l=e.memoizedState,a!==r||f!==l||Xt.current||Yr?(typeof h=="function"&&(Cm(e,n,h,r),l=e.memoizedState),(a=Yr||Hw(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,jI(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:bn(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Sn(l):(l=Yt(n)?ci:Nt.current,l=Ao(e,l));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&qw(e,o,r,l),Yr=!1,f=e.memoizedState,o.state=f,yh(e,r,o,s);var w=e.memoizedState;a!==d||f!==w||Xt.current||Yr?(typeof y=="function"&&(Cm(e,n,y,r),w=e.memoizedState),(c=Yr||Hw(e,n,c,r,f,w,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Om(t,e,n,r,i,s)}function Om(t,e,n,r,s,i){dP(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Mw(e,n,!1),Lr(t,e,i);r=e.stateNode,eD.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=xo(e,t.child,null,i),e.child=xo(e,null,a,i)):Ut(t,e,a,i),e.memoizedState=r.state,s&&Mw(e,n,!0),e.child}function fP(t){var e=t.stateNode;e.pendingContext?Vw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Vw(t,e.context,!1),by(t,e.containerInfo)}function Zw(t,e,n,r,s){return Ro(),Iy(s),e.flags|=256,Ut(t,e,n,r),e.child}var Dm={dehydrated:null,treeContext:null,retryLane:0};function Lm(t){return{baseLanes:t,cachePool:null,transitions:null}}function pP(t,e,n){var r=e.pendingProps,s=De.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Pe(De,s&1),t===null)return Rm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=vd(o,r,0,null),t=si(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Lm(n),e.memoizedState=Dm,t):Fy(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return tD(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ps(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ps(a,i):(i=si(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Lm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Dm,r}return i=t.child,t=i.sibling,r=ps(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Fy(t,e){return e=vd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function tc(t,e,n,r){return r!==null&&Iy(r),xo(e,t.child,null,n),t=Fy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function tD(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=up(Error(j(422))),tc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=vd({mode:"visible",children:r.children},s,0,null),i=si(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&xo(e,t.child,null,o),e.child.memoizedState=Lm(o),e.memoizedState=Dm,i);if(!(e.mode&1))return tc(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(j(419)),r=up(i,r,void 0),tc(t,e,o,r)}if(a=(o&t.childLanes)!==0,Qt||a){if(r=it,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Dr(t,s),Fn(r,t,s,-1))}return Wy(),r=up(Error(j(421))),tc(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=pD.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,sn=cs(s.nextSibling),un=e,ke=!0,Dn=null,t!==null&&(vn[_n++]=wr,vn[_n++]=Er,vn[_n++]=hi,wr=t.id,Er=t.overflow,hi=e),e=Fy(e,r.children),e.flags|=4096,e)}function eE(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),xm(t.return,e,n)}function cp(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function mP(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Ut(t,e,r.children,n),r=De.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&eE(t,n,e);else if(t.tag===19)eE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Pe(De,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&vh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),cp(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&vh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}cp(e,!0,n,null,i);break;case"together":cp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Oc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Lr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),fi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(j(153));if(e.child!==null){for(t=e.child,n=ps(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ps(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function nD(t,e,n){switch(e.tag){case 3:fP(e),Ro();break;case 5:BI(e);break;case 1:Yt(e.type)&&dh(e);break;case 4:by(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Pe(mh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Pe(De,De.current&1),e.flags|=128,null):n&e.child.childLanes?pP(t,e,n):(Pe(De,De.current&1),t=Lr(t,e,n),t!==null?t.sibling:null);Pe(De,De.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return mP(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Pe(De,De.current),r)break;return null;case 22:case 23:return e.lanes=0,hP(t,e,n)}return Lr(t,e,n)}var gP,Vm,yP,vP;gP=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Vm=function(){};yP=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ys(tr.current);var i=null;switch(n){case"input":s=sm(t,s),r=sm(t,r),i=[];break;case"select":s=Fe({},s,{value:void 0}),r=Fe({},r,{value:void 0}),i=[];break;case"textarea":s=am(t,s),r=am(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ch)}um(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ml.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ml.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&xe("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};vP=function(t,e,n,r){n!==r&&(e.flags|=4)};function Pa(t,e){if(!ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function St(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function rD(t,e,n){var r=e.pendingProps;switch(Sy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(e),null;case 1:return Yt(e.type)&&hh(),St(e),null;case 3:return r=e.stateNode,Co(),Ce(Xt),Ce(Nt),Ny(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Zu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Dn!==null&&(Wm(Dn),Dn=null))),Vm(t,e),St(e),null;case 5:ky(e);var s=Ys(Rl.current);if(n=e.type,t!==null&&e.stateNode!=null)yP(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(j(166));return St(e),null}if(t=Ys(tr.current),Zu(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Qn]=e,r[Pl]=i,t=(e.mode&1)!==0,n){case"dialog":xe("cancel",r),xe("close",r);break;case"iframe":case"object":case"embed":xe("load",r);break;case"video":case"audio":for(s=0;s<Oa.length;s++)xe(Oa[s],r);break;case"source":xe("error",r);break;case"img":case"image":case"link":xe("error",r),xe("load",r);break;case"details":xe("toggle",r);break;case"input":uw(r,i),xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},xe("invalid",r);break;case"textarea":hw(r,i),xe("invalid",r)}um(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Ju(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Ju(r.textContent,a,t),s=["children",""+a]):ml.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&xe("scroll",r)}switch(n){case"input":Wu(r),cw(r,i,!0);break;case"textarea":Wu(r),dw(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ch)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=q1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Qn]=e,t[Pl]=r,gP(t,e,!1,!1),e.stateNode=t;e:{switch(o=cm(n,r),n){case"dialog":xe("cancel",t),xe("close",t),s=r;break;case"iframe":case"object":case"embed":xe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Oa.length;s++)xe(Oa[s],t);s=r;break;case"source":xe("error",t),s=r;break;case"img":case"image":case"link":xe("error",t),xe("load",t),s=r;break;case"details":xe("toggle",t),s=r;break;case"input":uw(t,r),s=sm(t,r),xe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Fe({},r,{value:void 0}),xe("invalid",t);break;case"textarea":hw(t,r),s=am(t,r),xe("invalid",t);break;default:s=r}um(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Q1(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&K1(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&gl(t,l):typeof l=="number"&&gl(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ml.hasOwnProperty(i)?l!=null&&i==="onScroll"&&xe("scroll",t):l!=null&&ly(t,i,l,o))}switch(n){case"input":Wu(t),cw(t,r,!1);break;case"textarea":Wu(t),dw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ws(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?co(t,!!r.multiple,i,!1):r.defaultValue!=null&&co(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ch)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return St(e),null;case 6:if(t&&e.stateNode!=null)vP(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(j(166));if(n=Ys(Rl.current),Ys(tr.current),Zu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Qn]=e,(i=r.nodeValue!==n)&&(t=un,t!==null))switch(t.tag){case 3:Ju(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ju(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qn]=e,e.stateNode=r}return St(e),null;case 13:if(Ce(De),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ke&&sn!==null&&e.mode&1&&!(e.flags&128))VI(),Ro(),e.flags|=98560,i=!1;else if(i=Zu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(j(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(j(317));i[Qn]=e}else Ro(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;St(e),i=!1}else Dn!==null&&(Wm(Dn),Dn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||De.current&1?et===0&&(et=3):Wy())),e.updateQueue!==null&&(e.flags|=4),St(e),null);case 4:return Co(),Vm(t,e),t===null&&Sl(e.stateNode.containerInfo),St(e),null;case 10:return Ry(e.type._context),St(e),null;case 17:return Yt(e.type)&&hh(),St(e),null;case 19:if(Ce(De),i=e.memoizedState,i===null)return St(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Pa(i,!1);else{if(et!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=vh(t),o!==null){for(e.flags|=128,Pa(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Pe(De,De.current&1|2),e.child}t=t.sibling}i.tail!==null&&qe()>ko&&(e.flags|=128,r=!0,Pa(i,!1),e.lanes=4194304)}else{if(!r)if(t=vh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Pa(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ke)return St(e),null}else 2*qe()-i.renderingStartTime>ko&&n!==1073741824&&(e.flags|=128,r=!0,Pa(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=qe(),e.sibling=null,n=De.current,Pe(De,r?n&1|2:n&1),e):(St(e),null);case 22:case 23:return zy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?rn&1073741824&&(St(e),e.subtreeFlags&6&&(e.flags|=8192)):St(e),null;case 24:return null;case 25:return null}throw Error(j(156,e.tag))}function sD(t,e){switch(Sy(e),e.tag){case 1:return Yt(e.type)&&hh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Co(),Ce(Xt),Ce(Nt),Ny(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ky(e),null;case 13:if(Ce(De),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(j(340));Ro()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ce(De),null;case 4:return Co(),null;case 10:return Ry(e.type._context),null;case 22:case 23:return zy(),null;case 24:return null;default:return null}}var nc=!1,xt=!1,iD=typeof WeakSet=="function"?WeakSet:Set,z=null;function no(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){$e(t,e,r)}else n.current=null}function Mm(t,e,n){try{n()}catch(r){$e(t,e,r)}}var tE=!1;function oD(t,e){if(wm=ah,t=SI(),Ey(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,f=null;t:for(;;){for(var y;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(y=d.firstChild)!==null;)f=d,d=y;for(;;){if(d===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++h===r&&(l=o),(y=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Em={focusedElem:t,selectionRange:n},ah=!1,z=e;z!==null;)if(e=z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,z=t;else for(;z!==null;){e=z;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var T=w.memoizedProps,P=w.memoizedState,E=e.stateNode,g=E.getSnapshotBeforeUpdate(e.elementType===e.type?T:bn(e.type,T),P);E.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(j(163))}}catch(x){$e(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,z=t;break}z=e.return}return w=tE,tE=!1,w}function el(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Mm(e,n,i)}s=s.next}while(s!==r)}}function gd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Fm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function _P(t){var e=t.alternate;e!==null&&(t.alternate=null,_P(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qn],delete e[Pl],delete e[Im],delete e[$O],delete e[zO])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function wP(t){return t.tag===5||t.tag===3||t.tag===4}function nE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||wP(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Um(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ch));else if(r!==4&&(t=t.child,t!==null))for(Um(t,e,n),t=t.sibling;t!==null;)Um(t,e,n),t=t.sibling}function jm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(jm(t,e,n),t=t.sibling;t!==null;)jm(t,e,n),t=t.sibling}var ut=null,Nn=!1;function qr(t,e,n){for(n=n.child;n!==null;)EP(t,e,n),n=n.sibling}function EP(t,e,n){if(er&&typeof er.onCommitFiberUnmount=="function")try{er.onCommitFiberUnmount(ld,n)}catch{}switch(n.tag){case 5:xt||no(n,e);case 6:var r=ut,s=Nn;ut=null,qr(t,e,n),ut=r,Nn=s,ut!==null&&(Nn?(t=ut,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ut.removeChild(n.stateNode));break;case 18:ut!==null&&(Nn?(t=ut,n=n.stateNode,t.nodeType===8?rp(t.parentNode,n):t.nodeType===1&&rp(t,n),wl(t)):rp(ut,n.stateNode));break;case 4:r=ut,s=Nn,ut=n.stateNode.containerInfo,Nn=!0,qr(t,e,n),ut=r,Nn=s;break;case 0:case 11:case 14:case 15:if(!xt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Mm(n,e,o),s=s.next}while(s!==r)}qr(t,e,n);break;case 1:if(!xt&&(no(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){$e(n,e,a)}qr(t,e,n);break;case 21:qr(t,e,n);break;case 22:n.mode&1?(xt=(r=xt)||n.memoizedState!==null,qr(t,e,n),xt=r):qr(t,e,n);break;default:qr(t,e,n)}}function rE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new iD),e.forEach(function(r){var s=mD.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Rn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ut=a.stateNode,Nn=!1;break e;case 3:ut=a.stateNode.containerInfo,Nn=!0;break e;case 4:ut=a.stateNode.containerInfo,Nn=!0;break e}a=a.return}if(ut===null)throw Error(j(160));EP(i,o,s),ut=null,Nn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){$e(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)TP(e,t),e=e.sibling}function TP(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Rn(e,t),Wn(t),r&4){try{el(3,t,t.return),gd(3,t)}catch(T){$e(t,t.return,T)}try{el(5,t,t.return)}catch(T){$e(t,t.return,T)}}break;case 1:Rn(e,t),Wn(t),r&512&&n!==null&&no(n,n.return);break;case 5:if(Rn(e,t),Wn(t),r&512&&n!==null&&no(n,n.return),t.flags&32){var s=t.stateNode;try{gl(s,"")}catch(T){$e(t,t.return,T)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&W1(s,i),cm(a,o);var c=cm(a,i);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?Q1(s,d):h==="dangerouslySetInnerHTML"?K1(s,d):h==="children"?gl(s,d):ly(s,h,d,c)}switch(a){case"input":im(s,i);break;case"textarea":H1(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?co(s,!!i.multiple,y,!1):f!==!!i.multiple&&(i.defaultValue!=null?co(s,!!i.multiple,i.defaultValue,!0):co(s,!!i.multiple,i.multiple?[]:"",!1))}s[Pl]=i}catch(T){$e(t,t.return,T)}}break;case 6:if(Rn(e,t),Wn(t),r&4){if(t.stateNode===null)throw Error(j(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(T){$e(t,t.return,T)}}break;case 3:if(Rn(e,t),Wn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{wl(e.containerInfo)}catch(T){$e(t,t.return,T)}break;case 4:Rn(e,t),Wn(t);break;case 13:Rn(e,t),Wn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(By=qe())),r&4&&rE(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(xt=(c=xt)||h,Rn(e,t),xt=c):Rn(e,t),Wn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(z=t,h=t.child;h!==null;){for(d=z=h;z!==null;){switch(f=z,y=f.child,f.tag){case 0:case 11:case 14:case 15:el(4,f,f.return);break;case 1:no(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(T){$e(r,n,T)}}break;case 5:no(f,f.return);break;case 22:if(f.memoizedState!==null){iE(d);continue}}y!==null?(y.return=f,z=y):iE(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=G1("display",o))}catch(T){$e(t,t.return,T)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(T){$e(t,t.return,T)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Rn(e,t),Wn(t),r&4&&rE(t);break;case 21:break;default:Rn(e,t),Wn(t)}}function Wn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(wP(n)){var r=n;break e}n=n.return}throw Error(j(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(gl(s,""),r.flags&=-33);var i=nE(t);jm(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=nE(t);Um(t,a,o);break;default:throw Error(j(161))}}catch(l){$e(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function aD(t,e,n){z=t,SP(t)}function SP(t,e,n){for(var r=(t.mode&1)!==0;z!==null;){var s=z,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||nc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||xt;a=nc;var c=xt;if(nc=o,(xt=l)&&!c)for(z=s;z!==null;)o=z,l=o.child,o.tag===22&&o.memoizedState!==null?oE(s):l!==null?(l.return=o,z=l):oE(s);for(;i!==null;)z=i,SP(i),i=i.sibling;z=s,nc=a,xt=c}sE(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,z=i):sE(t)}}function sE(t){for(;z!==null;){var e=z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:xt||gd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!xt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:bn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&$w(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}$w(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&wl(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(j(163))}xt||e.flags&512&&Fm(e)}catch(f){$e(e,e.return,f)}}if(e===t){z=null;break}if(n=e.sibling,n!==null){n.return=e.return,z=n;break}z=e.return}}function iE(t){for(;z!==null;){var e=z;if(e===t){z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,z=n;break}z=e.return}}function oE(t){for(;z!==null;){var e=z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{gd(4,e)}catch(l){$e(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){$e(e,s,l)}}var i=e.return;try{Fm(e)}catch(l){$e(e,i,l)}break;case 5:var o=e.return;try{Fm(e)}catch(l){$e(e,o,l)}}}catch(l){$e(e,e.return,l)}if(e===t){z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,z=a;break}z=e.return}}var lD=Math.ceil,Eh=jr.ReactCurrentDispatcher,Uy=jr.ReactCurrentOwner,Tn=jr.ReactCurrentBatchConfig,fe=0,it=null,Qe=null,pt=0,rn=0,ro=bs(0),et=0,kl=null,fi=0,yd=0,jy=0,tl=null,Kt=null,By=0,ko=1/0,yr=null,Th=!1,Bm=null,ds=null,rc=!1,rs=null,Sh=0,nl=0,$m=null,Dc=-1,Lc=0;function Bt(){return fe&6?qe():Dc!==-1?Dc:Dc=qe()}function fs(t){return t.mode&1?fe&2&&pt!==0?pt&-pt:HO.transition!==null?(Lc===0&&(Lc=aI()),Lc):(t=ve,t!==0||(t=window.event,t=t===void 0?16:pI(t.type)),t):1}function Fn(t,e,n,r){if(50<nl)throw nl=0,$m=null,Error(j(185));Jl(t,n,r),(!(fe&2)||t!==it)&&(t===it&&(!(fe&2)&&(yd|=n),et===4&&Zr(t,pt)),Jt(t,r),n===1&&fe===0&&!(e.mode&1)&&(ko=qe()+500,fd&&ks()))}function Jt(t,e){var n=t.callbackNode;HN(t,e);var r=oh(t,t===it?pt:0);if(r===0)n!==null&&mw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&mw(n),e===1)t.tag===0?WO(aE.bind(null,t)):OI(aE.bind(null,t)),jO(function(){!(fe&6)&&ks()}),n=null;else{switch(lI(r)){case 1:n=fy;break;case 4:n=iI;break;case 16:n=ih;break;case 536870912:n=oI;break;default:n=ih}n=kP(n,IP.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function IP(t,e){if(Dc=-1,Lc=0,fe&6)throw Error(j(327));var n=t.callbackNode;if(go()&&t.callbackNode!==n)return null;var r=oh(t,t===it?pt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ih(t,r);else{e=r;var s=fe;fe|=2;var i=AP();(it!==t||pt!==e)&&(yr=null,ko=qe()+500,ri(t,e));do try{hD();break}catch(a){PP(t,a)}while(!0);Ay(),Eh.current=i,fe=s,Qe!==null?e=0:(it=null,pt=0,e=et)}if(e!==0){if(e===2&&(s=mm(t),s!==0&&(r=s,e=zm(t,s))),e===1)throw n=kl,ri(t,0),Zr(t,r),Jt(t,qe()),n;if(e===6)Zr(t,r);else{if(s=t.current.alternate,!(r&30)&&!uD(s)&&(e=Ih(t,r),e===2&&(i=mm(t),i!==0&&(r=i,e=zm(t,i))),e===1))throw n=kl,ri(t,0),Zr(t,r),Jt(t,qe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(j(345));case 2:$s(t,Kt,yr);break;case 3:if(Zr(t,r),(r&130023424)===r&&(e=By+500-qe(),10<e)){if(oh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Bt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Sm($s.bind(null,t,Kt,yr),e);break}$s(t,Kt,yr);break;case 4:if(Zr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Mn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*lD(r/1960))-r,10<r){t.timeoutHandle=Sm($s.bind(null,t,Kt,yr),r);break}$s(t,Kt,yr);break;case 5:$s(t,Kt,yr);break;default:throw Error(j(329))}}}return Jt(t,qe()),t.callbackNode===n?IP.bind(null,t):null}function zm(t,e){var n=tl;return t.current.memoizedState.isDehydrated&&(ri(t,e).flags|=256),t=Ih(t,e),t!==2&&(e=Kt,Kt=n,e!==null&&Wm(e)),t}function Wm(t){Kt===null?Kt=t:Kt.push.apply(Kt,t)}function uD(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Bn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Zr(t,e){for(e&=~jy,e&=~yd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Mn(e),r=1<<n;t[n]=-1,e&=~r}}function aE(t){if(fe&6)throw Error(j(327));go();var e=oh(t,0);if(!(e&1))return Jt(t,qe()),null;var n=Ih(t,e);if(t.tag!==0&&n===2){var r=mm(t);r!==0&&(e=r,n=zm(t,r))}if(n===1)throw n=kl,ri(t,0),Zr(t,e),Jt(t,qe()),n;if(n===6)throw Error(j(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$s(t,Kt,yr),Jt(t,qe()),null}function $y(t,e){var n=fe;fe|=1;try{return t(e)}finally{fe=n,fe===0&&(ko=qe()+500,fd&&ks())}}function pi(t){rs!==null&&rs.tag===0&&!(fe&6)&&go();var e=fe;fe|=1;var n=Tn.transition,r=ve;try{if(Tn.transition=null,ve=1,t)return t()}finally{ve=r,Tn.transition=n,fe=e,!(fe&6)&&ks()}}function zy(){rn=ro.current,Ce(ro)}function ri(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,UO(n)),Qe!==null)for(n=Qe.return;n!==null;){var r=n;switch(Sy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&hh();break;case 3:Co(),Ce(Xt),Ce(Nt),Ny();break;case 5:ky(r);break;case 4:Co();break;case 13:Ce(De);break;case 19:Ce(De);break;case 10:Ry(r.type._context);break;case 22:case 23:zy()}n=n.return}if(it=t,Qe=t=ps(t.current,null),pt=rn=e,et=0,kl=null,jy=yd=fi=0,Kt=tl=null,Xs!==null){for(e=0;e<Xs.length;e++)if(n=Xs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Xs=null}return t}function PP(t,e){do{var n=Qe;try{if(Ay(),kc.current=wh,_h){for(var r=Ve.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}_h=!1}if(di=0,st=Je=Ve=null,Za=!1,xl=0,Uy.current=null,n===null||n.return===null){et=1,kl=e,Qe=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=pt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=Gw(o);if(y!==null){y.flags&=-257,Qw(y,o,a,i,e),y.mode&1&&Kw(i,c,e),e=y,l=c;var w=e.updateQueue;if(w===null){var T=new Set;T.add(l),e.updateQueue=T}else w.add(l);break e}else{if(!(e&1)){Kw(i,c,e),Wy();break e}l=Error(j(426))}}else if(ke&&a.mode&1){var P=Gw(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),Qw(P,o,a,i,e),Iy(bo(l,a));break e}}i=l=bo(l,a),et!==4&&(et=2),tl===null?tl=[i]:tl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=lP(i,l,e);Bw(i,E);break e;case 1:a=l;var g=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ds===null||!ds.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var x=uP(i,a,e);Bw(i,x);break e}}i=i.return}while(i!==null)}xP(n)}catch(D){e=D,Qe===n&&n!==null&&(Qe=n=n.return);continue}break}while(!0)}function AP(){var t=Eh.current;return Eh.current=wh,t===null?wh:t}function Wy(){(et===0||et===3||et===2)&&(et=4),it===null||!(fi&268435455)&&!(yd&268435455)||Zr(it,pt)}function Ih(t,e){var n=fe;fe|=2;var r=AP();(it!==t||pt!==e)&&(yr=null,ri(t,e));do try{cD();break}catch(s){PP(t,s)}while(!0);if(Ay(),fe=n,Eh.current=r,Qe!==null)throw Error(j(261));return it=null,pt=0,et}function cD(){for(;Qe!==null;)RP(Qe)}function hD(){for(;Qe!==null&&!VN();)RP(Qe)}function RP(t){var e=bP(t.alternate,t,rn);t.memoizedProps=t.pendingProps,e===null?xP(t):Qe=e,Uy.current=null}function xP(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=sD(n,e),n!==null){n.flags&=32767,Qe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{et=6,Qe=null;return}}else if(n=rD(n,e,rn),n!==null){Qe=n;return}if(e=e.sibling,e!==null){Qe=e;return}Qe=e=t}while(e!==null);et===0&&(et=5)}function $s(t,e,n){var r=ve,s=Tn.transition;try{Tn.transition=null,ve=1,dD(t,e,n,r)}finally{Tn.transition=s,ve=r}return null}function dD(t,e,n,r){do go();while(rs!==null);if(fe&6)throw Error(j(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(j(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(qN(t,i),t===it&&(Qe=it=null,pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||rc||(rc=!0,kP(ih,function(){return go(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Tn.transition,Tn.transition=null;var o=ve;ve=1;var a=fe;fe|=4,Uy.current=null,oD(t,n),TP(n,t),NO(Em),ah=!!wm,Em=wm=null,t.current=n,aD(n),MN(),fe=a,ve=o,Tn.transition=i}else t.current=n;if(rc&&(rc=!1,rs=t,Sh=s),i=t.pendingLanes,i===0&&(ds=null),jN(n.stateNode),Jt(t,qe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Th)throw Th=!1,t=Bm,Bm=null,t;return Sh&1&&t.tag!==0&&go(),i=t.pendingLanes,i&1?t===$m?nl++:(nl=0,$m=t):nl=0,ks(),null}function go(){if(rs!==null){var t=lI(Sh),e=Tn.transition,n=ve;try{if(Tn.transition=null,ve=16>t?16:t,rs===null)var r=!1;else{if(t=rs,rs=null,Sh=0,fe&6)throw Error(j(331));var s=fe;for(fe|=4,z=t.current;z!==null;){var i=z,o=i.child;if(z.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(z=c;z!==null;){var h=z;switch(h.tag){case 0:case 11:case 15:el(8,h,i)}var d=h.child;if(d!==null)d.return=h,z=d;else for(;z!==null;){h=z;var f=h.sibling,y=h.return;if(_P(h),h===c){z=null;break}if(f!==null){f.return=y,z=f;break}z=y}}}var w=i.alternate;if(w!==null){var T=w.child;if(T!==null){w.child=null;do{var P=T.sibling;T.sibling=null,T=P}while(T!==null)}}z=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,z=o;else e:for(;z!==null;){if(i=z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:el(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,z=E;break e}z=i.return}}var g=t.current;for(z=g;z!==null;){o=z;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,z=_;else e:for(o=g;z!==null;){if(a=z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:gd(9,a)}}catch(D){$e(a,a.return,D)}if(a===o){z=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,z=x;break e}z=a.return}}if(fe=s,ks(),er&&typeof er.onPostCommitFiberRoot=="function")try{er.onPostCommitFiberRoot(ld,t)}catch{}r=!0}return r}finally{ve=n,Tn.transition=e}}return!1}function lE(t,e,n){e=bo(n,e),e=lP(t,e,1),t=hs(t,e,1),e=Bt(),t!==null&&(Jl(t,1,e),Jt(t,e))}function $e(t,e,n){if(t.tag===3)lE(t,t,n);else for(;e!==null;){if(e.tag===3){lE(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ds===null||!ds.has(r))){t=bo(n,t),t=uP(e,t,1),e=hs(e,t,1),t=Bt(),e!==null&&(Jl(e,1,t),Jt(e,t));break}}e=e.return}}function fD(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Bt(),t.pingedLanes|=t.suspendedLanes&n,it===t&&(pt&n)===n&&(et===4||et===3&&(pt&130023424)===pt&&500>qe()-By?ri(t,0):jy|=n),Jt(t,e)}function CP(t,e){e===0&&(t.mode&1?(e=Ku,Ku<<=1,!(Ku&130023424)&&(Ku=4194304)):e=1);var n=Bt();t=Dr(t,e),t!==null&&(Jl(t,e,n),Jt(t,n))}function pD(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),CP(t,n)}function mD(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(j(314))}r!==null&&r.delete(e),CP(t,n)}var bP;bP=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xt.current)Qt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Qt=!1,nD(t,e,n);Qt=!!(t.flags&131072)}else Qt=!1,ke&&e.flags&1048576&&DI(e,ph,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Oc(t,e),t=e.pendingProps;var s=Ao(e,Nt.current);mo(e,n),s=Dy(null,e,r,t,s,n);var i=Ly();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Yt(r)?(i=!0,dh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Cy(e),s.updater=md,e.stateNode=s,s._reactInternals=e,bm(e,r,t,n),e=Om(null,e,r,!0,i,n)):(e.tag=0,ke&&i&&Ty(e),Ut(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Oc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=yD(r),t=bn(r,t),s){case 0:e=Nm(null,e,r,t,n);break e;case 1:e=Jw(null,e,r,t,n);break e;case 11:e=Xw(null,e,r,t,n);break e;case 14:e=Yw(null,e,r,bn(r.type,t),n);break e}throw Error(j(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:bn(r,s),Nm(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:bn(r,s),Jw(t,e,r,s,n);case 3:e:{if(fP(e),t===null)throw Error(j(387));r=e.pendingProps,i=e.memoizedState,s=i.element,jI(t,e),yh(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=bo(Error(j(423)),e),e=Zw(t,e,r,n,s);break e}else if(r!==s){s=bo(Error(j(424)),e),e=Zw(t,e,r,n,s);break e}else for(sn=cs(e.stateNode.containerInfo.firstChild),un=e,ke=!0,Dn=null,n=FI(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ro(),r===s){e=Lr(t,e,n);break e}Ut(t,e,r,n)}e=e.child}return e;case 5:return BI(e),t===null&&Rm(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Tm(r,s)?o=null:i!==null&&Tm(r,i)&&(e.flags|=32),dP(t,e),Ut(t,e,o,n),e.child;case 6:return t===null&&Rm(e),null;case 13:return pP(t,e,n);case 4:return by(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=xo(e,null,r,n):Ut(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:bn(r,s),Xw(t,e,r,s,n);case 7:return Ut(t,e,e.pendingProps,n),e.child;case 8:return Ut(t,e,e.pendingProps.children,n),e.child;case 12:return Ut(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Pe(mh,r._currentValue),r._currentValue=o,i!==null)if(Bn(i.value,o)){if(i.children===s.children&&!Xt.current){e=Lr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Ar(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),xm(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(j(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),xm(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ut(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,mo(e,n),s=Sn(s),r=r(s),e.flags|=1,Ut(t,e,r,n),e.child;case 14:return r=e.type,s=bn(r,e.pendingProps),s=bn(r.type,s),Yw(t,e,r,s,n);case 15:return cP(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:bn(r,s),Oc(t,e),e.tag=1,Yt(r)?(t=!0,dh(e)):t=!1,mo(e,n),aP(e,r,s),bm(e,r,s,n),Om(null,e,r,!0,t,n);case 19:return mP(t,e,n);case 22:return hP(t,e,n)}throw Error(j(156,e.tag))};function kP(t,e){return sI(t,e)}function gD(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(t,e,n,r){return new gD(t,e,n,r)}function Hy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function yD(t){if(typeof t=="function")return Hy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===cy)return 11;if(t===hy)return 14}return 2}function ps(t,e){var n=t.alternate;return n===null?(n=wn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Vc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Hy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ki:return si(n.children,s,i,e);case uy:o=8,s|=8;break;case em:return t=wn(12,n,e,s|2),t.elementType=em,t.lanes=i,t;case tm:return t=wn(13,n,e,s),t.elementType=tm,t.lanes=i,t;case nm:return t=wn(19,n,e,s),t.elementType=nm,t.lanes=i,t;case B1:return vd(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case U1:o=10;break e;case j1:o=9;break e;case cy:o=11;break e;case hy:o=14;break e;case Xr:o=16,r=null;break e}throw Error(j(130,t==null?t:typeof t,""))}return e=wn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function si(t,e,n,r){return t=wn(7,t,r,e),t.lanes=n,t}function vd(t,e,n,r){return t=wn(22,t,r,e),t.elementType=B1,t.lanes=n,t.stateNode={isHidden:!1},t}function hp(t,e,n){return t=wn(6,t,null,e),t.lanes=n,t}function dp(t,e,n){return e=wn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function vD(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qf(0),this.expirationTimes=qf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qf(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function qy(t,e,n,r,s,i,o,a,l){return t=new vD(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=wn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cy(i),t}function _D(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function NP(t){if(!t)return Es;t=t._reactInternals;e:{if(Pi(t)!==t||t.tag!==1)throw Error(j(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Yt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(j(171))}if(t.tag===1){var n=t.type;if(Yt(n))return NI(t,n,e)}return e}function OP(t,e,n,r,s,i,o,a,l){return t=qy(n,r,!0,t,s,i,o,a,l),t.context=NP(null),n=t.current,r=Bt(),s=fs(n),i=Ar(r,s),i.callback=e??null,hs(n,i,s),t.current.lanes=s,Jl(t,s,r),Jt(t,r),t}function _d(t,e,n,r){var s=e.current,i=Bt(),o=fs(s);return n=NP(n),e.context===null?e.context=n:e.pendingContext=n,e=Ar(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=hs(s,e,o),t!==null&&(Fn(t,s,o,i),bc(t,s,o)),o}function Ph(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function uE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ky(t,e){uE(t,e),(t=t.alternate)&&uE(t,e)}function wD(){return null}var DP=typeof reportError=="function"?reportError:function(t){console.error(t)};function Gy(t){this._internalRoot=t}wd.prototype.render=Gy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(j(409));_d(t,e,null,null)};wd.prototype.unmount=Gy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;pi(function(){_d(null,t,null,null)}),e[Or]=null}};function wd(t){this._internalRoot=t}wd.prototype.unstable_scheduleHydration=function(t){if(t){var e=hI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Jr.length&&e!==0&&e<Jr[n].priority;n++);Jr.splice(n,0,t),n===0&&fI(t)}};function Qy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ed(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function cE(){}function ED(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Ph(o);i.call(c)}}var o=OP(e,r,t,0,null,!1,!1,"",cE);return t._reactRootContainer=o,t[Or]=o.current,Sl(t.nodeType===8?t.parentNode:t),pi(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Ph(l);a.call(c)}}var l=qy(t,0,!1,null,null,!1,!1,"",cE);return t._reactRootContainer=l,t[Or]=l.current,Sl(t.nodeType===8?t.parentNode:t),pi(function(){_d(e,l,n,r)}),l}function Td(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Ph(o);a.call(l)}}_d(e,o,t,s)}else o=ED(n,e,t,s,r);return Ph(o)}uI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Na(e.pendingLanes);n!==0&&(py(e,n|1),Jt(e,qe()),!(fe&6)&&(ko=qe()+500,ks()))}break;case 13:pi(function(){var r=Dr(t,1);if(r!==null){var s=Bt();Fn(r,t,1,s)}}),Ky(t,1)}};my=function(t){if(t.tag===13){var e=Dr(t,134217728);if(e!==null){var n=Bt();Fn(e,t,134217728,n)}Ky(t,134217728)}};cI=function(t){if(t.tag===13){var e=fs(t),n=Dr(t,e);if(n!==null){var r=Bt();Fn(n,t,e,r)}Ky(t,e)}};hI=function(){return ve};dI=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};dm=function(t,e,n){switch(e){case"input":if(im(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=dd(r);if(!s)throw Error(j(90));z1(r),im(r,s)}}}break;case"textarea":H1(t,n);break;case"select":e=n.value,e!=null&&co(t,!!n.multiple,e,!1)}};J1=$y;Z1=pi;var TD={usingClientEntryPoint:!1,Events:[eu,Yi,dd,X1,Y1,$y]},Aa={findFiberByHostInstance:Qs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},SD={bundleType:Aa.bundleType,version:Aa.version,rendererPackageName:Aa.rendererPackageName,rendererConfig:Aa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=nI(t),t===null?null:t.stateNode},findFiberByHostInstance:Aa.findFiberByHostInstance||wD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sc.isDisabled&&sc.supportsFiber)try{ld=sc.inject(SD),er=sc}catch{}}fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TD;fn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qy(e))throw Error(j(200));return _D(t,e,null,n)};fn.createRoot=function(t,e){if(!Qy(t))throw Error(j(299));var n=!1,r="",s=DP;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=qy(t,1,!1,null,null,n,!1,r,s),t[Or]=e.current,Sl(t.nodeType===8?t.parentNode:t),new Gy(e)};fn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(j(188)):(t=Object.keys(t).join(","),Error(j(268,t)));return t=nI(e),t=t===null?null:t.stateNode,t};fn.flushSync=function(t){return pi(t)};fn.hydrate=function(t,e,n){if(!Ed(e))throw Error(j(200));return Td(null,t,e,!0,n)};fn.hydrateRoot=function(t,e,n){if(!Qy(t))throw Error(j(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=DP;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=OP(e,null,t,1,n??null,s,!1,i,o),t[Or]=e.current,Sl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new wd(e)};fn.render=function(t,e,n){if(!Ed(e))throw Error(j(200));return Td(null,t,e,!1,n)};fn.unmountComponentAtNode=function(t){if(!Ed(t))throw Error(j(40));return t._reactRootContainer?(pi(function(){Td(null,null,t,!1,function(){t._reactRootContainer=null,t[Or]=null})}),!0):!1};fn.unstable_batchedUpdates=$y;fn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ed(n))throw Error(j(200));if(t==null||t._reactInternals===void 0)throw Error(j(38));return Td(t,e,n,!1,r)};fn.version="18.3.1-next-f1338f8080-20240426";function LP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(LP)}catch(t){console.error(t)}}LP(),L1.exports=fn;var ID=L1.exports,hE=ID;Jp.createRoot=hE.createRoot,Jp.hydrateRoot=hE.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nl(){return Nl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nl.apply(this,arguments)}var ss;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ss||(ss={}));const dE="popstate";function PD(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Hm("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Ah(s)}return RD(e,n,null,t)}function Me(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function VP(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AD(){return Math.random().toString(36).substr(2,8)}function fE(t,e){return{usr:t.state,key:t.key,idx:e}}function Hm(t,e,n,r){return n===void 0&&(n=null),Nl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Go(e):e,{state:n,key:e&&e.key||r||AD()})}function Ah(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Go(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function RD(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=ss.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Nl({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=ss.Pop;let P=h(),E=P==null?null:P-c;c=P,l&&l({action:a,location:T.location,delta:E})}function f(P,E){a=ss.Push;let g=Hm(T.location,P,E);c=h()+1;let _=fE(g,c),x=T.createHref(g);try{o.pushState(_,"",x)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(x)}i&&l&&l({action:a,location:T.location,delta:1})}function y(P,E){a=ss.Replace;let g=Hm(T.location,P,E);c=h();let _=fE(g,c),x=T.createHref(g);o.replaceState(_,"",x),i&&l&&l({action:a,location:T.location,delta:0})}function w(P){let E=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof P=="string"?P:Ah(P);return g=g.replace(/ $/,"%20"),Me(E,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,E)}let T={get action(){return a},get location(){return t(s,o)},listen(P){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(dE,d),l=P,()=>{s.removeEventListener(dE,d),l=null}},createHref(P){return e(s,P)},createURL:w,encodeLocation(P){let E=w(P);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:f,replace:y,go(P){return o.go(P)}};return T}var pE;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(pE||(pE={}));function xD(t,e,n){return n===void 0&&(n="/"),CD(t,e,n,!1)}function CD(t,e,n,r){let s=typeof e=="string"?Go(e):e,i=No(s.pathname||"/",n);if(i==null)return null;let o=MP(t);bD(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=BD(i);a=UD(o[l],c,r)}return a}function MP(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Me(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=ms([r,l.relativePath]),h=n.concat(l);i.children&&i.children.length>0&&(Me(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),MP(i.children,e,h,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:MD(c,i.index),routesMeta:h})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of FP(i.path))s(i,o,l)}),e}function FP(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=FP(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function bD(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:FD(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const kD=/^:[\w-]+$/,ND=3,OD=2,DD=1,LD=10,VD=-2,mE=t=>t==="*";function MD(t,e){let n=t.split("/"),r=n.length;return n.some(mE)&&(r+=VD),e&&(r+=OD),n.filter(s=>!mE(s)).reduce((s,i)=>s+(kD.test(i)?ND:i===""?DD:LD),r)}function FD(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function UD(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",d=Rh({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),f=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=Rh({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:ms([i,d.pathname]),pathnameBase:HD(ms([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=ms([i,d.pathnameBase]))}return o}function Rh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=jD(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,h,d)=>{let{paramName:f,isOptional:y}=h;if(f==="*"){let T=a[d]||"";o=i.slice(0,i.length-T.length).replace(/(.)\/+$/,"$1")}const w=a[d];return y&&!w?c[f]=void 0:c[f]=(w||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function jD(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),VP(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function BD(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return VP(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function No(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function $D(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Go(t):t;return{pathname:n?n.startsWith("/")?n:zD(n,e):e,search:qD(r),hash:KD(s)}}function zD(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function fp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function WD(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Xy(t,e){let n=WD(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Yy(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Go(t):(s=Nl({},t),Me(!s.pathname||!s.pathname.includes("?"),fp("?","pathname","search",s)),Me(!s.pathname||!s.pathname.includes("#"),fp("#","pathname","hash",s)),Me(!s.search||!s.search.includes("#"),fp("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;s.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=$D(s,a),c=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const ms=t=>t.join("/").replace(/\/\/+/g,"/"),HD=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),qD=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,KD=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function GD(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const UP=["post","put","patch","delete"];new Set(UP);const QD=["get",...UP];new Set(QD);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ol(){return Ol=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ol.apply(this,arguments)}const Sd=O.createContext(null),jP=O.createContext(null),Br=O.createContext(null),Id=O.createContext(null),Ns=O.createContext({outlet:null,matches:[],isDataRoute:!1}),BP=O.createContext(null);function XD(t,e){let{relative:n}=e===void 0?{}:e;Qo()||Me(!1);let{basename:r,navigator:s}=O.useContext(Br),{hash:i,pathname:o,search:a}=Pd(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:ms([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Qo(){return O.useContext(Id)!=null}function Ai(){return Qo()||Me(!1),O.useContext(Id).location}function $P(t){O.useContext(Br).static||O.useLayoutEffect(t)}function Ri(){let{isDataRoute:t}=O.useContext(Ns);return t?uL():YD()}function YD(){Qo()||Me(!1);let t=O.useContext(Sd),{basename:e,future:n,navigator:r}=O.useContext(Br),{matches:s}=O.useContext(Ns),{pathname:i}=Ai(),o=JSON.stringify(Xy(s,n.v7_relativeSplatPath)),a=O.useRef(!1);return $P(()=>{a.current=!0}),O.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=Yy(c,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:ms([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,i,t])}function Pd(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=O.useContext(Br),{matches:s}=O.useContext(Ns),{pathname:i}=Ai(),o=JSON.stringify(Xy(s,r.v7_relativeSplatPath));return O.useMemo(()=>Yy(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function JD(t,e){return ZD(t,e)}function ZD(t,e,n,r){Qo()||Me(!1);let{navigator:s}=O.useContext(Br),{matches:i}=O.useContext(Ns),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Ai(),h;if(e){var d;let P=typeof e=="string"?Go(e):e;l==="/"||(d=P.pathname)!=null&&d.startsWith(l)||Me(!1),h=P}else h=c;let f=h.pathname||"/",y=f;if(l!=="/"){let P=l.replace(/^\//,"").split("/");y="/"+f.replace(/^\//,"").split("/").slice(P.length).join("/")}let w=xD(t,{pathname:y}),T=sL(w&&w.map(P=>Object.assign({},P,{params:Object.assign({},a,P.params),pathname:ms([l,s.encodeLocation?s.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?l:ms([l,s.encodeLocation?s.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),i,n,r);return e&&T?O.createElement(Id.Provider,{value:{location:Ol({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:ss.Pop}},T):T}function eL(){let t=lL(),e=GD(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:s},n):null,null)}const tL=O.createElement(eL,null);class nL extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(Ns.Provider,{value:this.props.routeContext},O.createElement(BP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function rL(t){let{routeContext:e,match:n,children:r}=t,s=O.useContext(Sd);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(Ns.Provider,{value:e},r)}function sL(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||Me(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:f,errors:y}=n,w=d.route.loader&&f[d.route.id]===void 0&&(!y||y[d.route.id]===void 0);if(d.route.lazy||w){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let y,w=!1,T=null,P=null;n&&(y=a&&d.route.id?a[d.route.id]:void 0,T=d.route.errorElement||tL,l&&(c<0&&f===0?(w=!0,P=null):c===f&&(w=!0,P=d.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,f+1)),g=()=>{let _;return y?_=T:w?_=P:d.route.Component?_=O.createElement(d.route.Component,null):d.route.element?_=d.route.element:_=h,O.createElement(rL,{match:d,routeContext:{outlet:h,matches:E,isDataRoute:n!=null},children:_})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?O.createElement(nL,{location:n.location,revalidation:n.revalidation,component:T,error:y,children:g(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):g()},null)}var zP=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(zP||{}),xh=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(xh||{});function iL(t){let e=O.useContext(Sd);return e||Me(!1),e}function oL(t){let e=O.useContext(jP);return e||Me(!1),e}function aL(t){let e=O.useContext(Ns);return e||Me(!1),e}function WP(t){let e=aL(),n=e.matches[e.matches.length-1];return n.route.id||Me(!1),n.route.id}function lL(){var t;let e=O.useContext(BP),n=oL(xh.UseRouteError),r=WP(xh.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function uL(){let{router:t}=iL(zP.UseNavigateStable),e=WP(xh.UseNavigateStable),n=O.useRef(!1);return $P(()=>{n.current=!0}),O.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ol({fromRouteId:e},i)))},[t,e])}const gE={};function cL(t,e){gE[e]||(gE[e]=!0,console.warn(e))}const yE=(t,e,n)=>cL(t,"⚠️ React Router Future Flag Warning: "+e+". "+("You can use the `"+t+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function hL(t,e){t!=null&&t.v7_startTransition||yE("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(t!=null&&t.v7_relativeSplatPath)&&!e&&yE("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function dL(t){let{to:e,replace:n,state:r,relative:s}=t;Qo()||Me(!1);let{future:i,static:o}=O.useContext(Br),{matches:a}=O.useContext(Ns),{pathname:l}=Ai(),c=Ri(),h=Yy(e,Xy(a,i.v7_relativeSplatPath),l,s==="path"),d=JSON.stringify(h);return O.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:s}),[c,d,s,n,r]),null}function mr(t){Me(!1)}function fL(t){let{basename:e="/",children:n=null,location:r,navigationType:s=ss.Pop,navigator:i,static:o=!1,future:a}=t;Qo()&&Me(!1);let l=e.replace(/^\/*/,"/"),c=O.useMemo(()=>({basename:l,navigator:i,static:o,future:Ol({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Go(r));let{pathname:h="/",search:d="",hash:f="",state:y=null,key:w="default"}=r,T=O.useMemo(()=>{let P=No(h,l);return P==null?null:{location:{pathname:P,search:d,hash:f,state:y,key:w},navigationType:s}},[l,h,d,f,y,w,s]);return T==null?null:O.createElement(Br.Provider,{value:c},O.createElement(Id.Provider,{children:n,value:T}))}function pL(t){let{children:e,location:n}=t;return JD(qm(e),n)}new Promise(()=>{});function qm(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(r,s)=>{if(!O.isValidElement(r))return;let i=[...e,s];if(r.type===O.Fragment){n.push.apply(n,qm(r.props.children,i));return}r.type!==mr&&Me(!1),!r.props.index||!r.props.children||Me(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=qm(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ch(){return Ch=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ch.apply(this,arguments)}function HP(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function mL(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function gL(t,e){return t.button===0&&(!e||e==="_self")&&!mL(t)}const yL=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],vL=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],_L="6";try{window.__reactRouterVersion=_L}catch{}const wL=O.createContext({isTransitioning:!1}),EL="startTransition",vE=fN[EL];function TL(t){let{basename:e,children:n,future:r,window:s}=t,i=O.useRef();i.current==null&&(i.current=PD({window:s,v5Compat:!0}));let o=i.current,[a,l]=O.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=O.useCallback(d=>{c&&vE?vE(()=>l(d)):l(d)},[l,c]);return O.useLayoutEffect(()=>o.listen(h),[o,h]),O.useEffect(()=>hL(r),[r]),O.createElement(fL,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const SL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",IL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,PL=O.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:d}=e,f=HP(e,yL),{basename:y}=O.useContext(Br),w,T=!1;if(typeof c=="string"&&IL.test(c)&&(w=c,SL))try{let _=new URL(window.location.href),x=c.startsWith("//")?new URL(_.protocol+c):new URL(c),D=No(x.pathname,y);x.origin===_.origin&&D!=null?c=D+x.search+x.hash:T=!0}catch{}let P=XD(c,{relative:s}),E=RL(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:s,viewTransition:d});function g(_){r&&r(_),_.defaultPrevented||E(_)}return O.createElement("a",Ch({},f,{href:w||P,onClick:T||i?r:g,ref:n,target:l}))}),ic=O.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:a,to:l,viewTransition:c,children:h}=e,d=HP(e,vL),f=Pd(l,{relative:d.relative}),y=Ai(),w=O.useContext(jP),{navigator:T,basename:P}=O.useContext(Br),E=w!=null&&xL(f)&&c===!0,g=T.encodeLocation?T.encodeLocation(f).pathname:f.pathname,_=y.pathname,x=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;s||(_=_.toLowerCase(),x=x?x.toLowerCase():null,g=g.toLowerCase()),x&&P&&(x=No(x,P)||x);const D=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let V=_===g||!o&&_.startsWith(g)&&_.charAt(D)==="/",S=x!=null&&(x===g||!o&&x.startsWith(g)&&x.charAt(g.length)==="/"),v={isActive:V,isPending:S,isTransitioning:E},A=V?r:void 0,C;typeof i=="function"?C=i(v):C=[i,V?"active":null,S?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let R=typeof a=="function"?a(v):a;return O.createElement(PL,Ch({},d,{"aria-current":A,className:C,ref:n,style:R,to:l,viewTransition:c}),typeof h=="function"?h(v):h)});var Km;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Km||(Km={}));var _E;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(_E||(_E={}));function AL(t){let e=O.useContext(Sd);return e||Me(!1),e}function RL(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=Ri(),c=Ai(),h=Pd(t,{relative:o});return O.useCallback(d=>{if(gL(d,n)){d.preventDefault();let f=r!==void 0?r:Ah(c)===Ah(h);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,h,r,s,n,t,i,o,a])}function xL(t,e){e===void 0&&(e={});let n=O.useContext(wL);n==null&&Me(!1);let{basename:r}=AL(Km.useViewTransitionState),s=Pd(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=No(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=No(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Rh(s.pathname,o)!=null||Rh(s.pathname,i)!=null}var wE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},CL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},KP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,y=c&63;l||(y=64,o||(f=64)),r.push(n[h],n[d],n[f],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(qP(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):CL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||d==null)throw new bL;const f=i<<2|a>>4;if(r.push(f),c!==64){const y=a<<4&240|c>>2;if(r.push(y),d!==64){const w=c<<6&192|d;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class bL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kL=function(t){const e=qP(t);return KP.encodeByteArray(e,!0)},bh=function(t){return kL(t).replace(/\./g,"")},GP=function(t){try{return KP.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OL=()=>NL().__FIREBASE_DEFAULTS__,DL=()=>{if(typeof process>"u"||typeof wE>"u")return;const t=wE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},LL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&GP(t[1]);return e&&JSON.parse(e)},Ad=()=>{try{return OL()||DL()||LL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},QP=t=>{var e,n;return(n=(e=Ad())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},XP=t=>{const e=QP(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},YP=()=>{var t;return(t=Ad())===null||t===void 0?void 0:t.config},JP=t=>{var e;return(e=Ad())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[bh(JSON.stringify(n)),bh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ML(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ot())}function FL(){var t;const e=(t=Ad())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function UL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function BL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $L(){const t=Ot();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function zL(){return!FL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function WL(){try{return typeof indexedDB=="object"}catch{return!1}}function HL(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL="FirebaseError";class hr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=qL,Object.setPrototypeOf(this,hr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nu.prototype.create)}}class nu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?KL(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new hr(s,a,r)}}function KL(t,e){return t.replace(GL,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const GL=/\{\$([^}]+)}/g;function QL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function kh(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(EE(i)&&EE(o)){if(!kh(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function EE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Da(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function La(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function XL(t,e){const n=new YL(t,e);return n.subscribe.bind(n)}class YL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");JL(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=pp),s.error===void 0&&(s.error=pp),s.complete===void 0&&(s.complete=pp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function JL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function pp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(t){return t&&t._delegate?t._delegate:t}class Ts{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new VL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tV(e))try{this.getOrInitializeService({instanceIdentifier:zs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=zs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zs){return this.instances.has(e)}getOptions(e=zs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:eV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=zs){return this.component?this.component.multipleInstances?e:zs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function eV(t){return t===zs?void 0:t}function tV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ZL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const rV={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},sV=ae.INFO,iV={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},oV=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=iV[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jy{constructor(e){this.name=e,this._logLevel=sV,this._logHandler=oV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const aV=(t,e)=>e.some(n=>t instanceof n);let TE,SE;function lV(){return TE||(TE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uV(){return SE||(SE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eA=new WeakMap,Gm=new WeakMap,tA=new WeakMap,mp=new WeakMap,Zy=new WeakMap;function cV(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(gs(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&eA.set(n,t)}).catch(()=>{}),Zy.set(e,t),e}function hV(t){if(Gm.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Gm.set(t,e)}let Qm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Gm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||tA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function dV(t){Qm=t(Qm)}function fV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(gp(this),e,...n);return tA.set(r,e.sort?e.sort():[e]),gs(r)}:uV().includes(t)?function(...e){return t.apply(gp(this),e),gs(eA.get(this))}:function(...e){return gs(t.apply(gp(this),e))}}function pV(t){return typeof t=="function"?fV(t):(t instanceof IDBTransaction&&hV(t),aV(t,lV())?new Proxy(t,Qm):t)}function gs(t){if(t instanceof IDBRequest)return cV(t);if(mp.has(t))return mp.get(t);const e=pV(t);return e!==t&&(mp.set(t,e),Zy.set(e,t)),e}const gp=t=>Zy.get(t);function mV(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=gs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(gs(o.result),l.oldVersion,l.newVersion,gs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const gV=["get","getKey","getAll","getAllKeys","count"],yV=["put","add","delete","clear"],yp=new Map;function IE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(yp.get(e))return yp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=yV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||gV.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return yp.set(e,i),i}dV(t=>({...t,get:(e,n,r)=>IE(e,n)||t.get(e,n,r),has:(e,n)=>!!IE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_V(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function _V(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Xm="@firebase/app",PE="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr=new Jy("@firebase/app"),wV="@firebase/app-compat",EV="@firebase/analytics-compat",TV="@firebase/analytics",SV="@firebase/app-check-compat",IV="@firebase/app-check",PV="@firebase/auth",AV="@firebase/auth-compat",RV="@firebase/database",xV="@firebase/data-connect",CV="@firebase/database-compat",bV="@firebase/functions",kV="@firebase/functions-compat",NV="@firebase/installations",OV="@firebase/installations-compat",DV="@firebase/messaging",LV="@firebase/messaging-compat",VV="@firebase/performance",MV="@firebase/performance-compat",FV="@firebase/remote-config",UV="@firebase/remote-config-compat",jV="@firebase/storage",BV="@firebase/storage-compat",$V="@firebase/firestore",zV="@firebase/vertexai-preview",WV="@firebase/firestore-compat",HV="firebase",qV="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym="[DEFAULT]",KV={[Xm]:"fire-core",[wV]:"fire-core-compat",[TV]:"fire-analytics",[EV]:"fire-analytics-compat",[IV]:"fire-app-check",[SV]:"fire-app-check-compat",[PV]:"fire-auth",[AV]:"fire-auth-compat",[RV]:"fire-rtdb",[xV]:"fire-data-connect",[CV]:"fire-rtdb-compat",[bV]:"fire-fn",[kV]:"fire-fn-compat",[NV]:"fire-iid",[OV]:"fire-iid-compat",[DV]:"fire-fcm",[LV]:"fire-fcm-compat",[VV]:"fire-perf",[MV]:"fire-perf-compat",[FV]:"fire-rc",[UV]:"fire-rc-compat",[jV]:"fire-gcs",[BV]:"fire-gcs-compat",[$V]:"fire-fst",[WV]:"fire-fst-compat",[zV]:"fire-vertex","fire-js":"fire-js",[HV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nh=new Map,GV=new Map,Jm=new Map;function AE(t,e){try{t.container.addComponent(e)}catch(n){Vr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function mi(t){const e=t.name;if(Jm.has(e))return Vr.debug(`There were multiple attempts to register component ${e}.`),!1;Jm.set(e,t);for(const n of Nh.values())AE(n,t);for(const n of GV.values())AE(n,t);return!0}function Rd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function En(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ys=new nu("app","Firebase",QV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ys.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=qV;function nA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ym,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw ys.create("bad-app-name",{appName:String(s)});if(n||(n=YP()),!n)throw ys.create("no-options");const i=Nh.get(s);if(i){if(kh(n,i.options)&&kh(r,i.config))return i;throw ys.create("duplicate-app",{appName:s})}const o=new nV(s);for(const l of Jm.values())o.addComponent(l);const a=new XV(n,r,o);return Nh.set(s,a),a}function ev(t=Ym){const e=Nh.get(t);if(!e&&t===Ym&&YP())return nA();if(!e)throw ys.create("no-app",{appName:t});return e}function nr(t,e,n){var r;let s=(r=KV[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vr.warn(a.join(" "));return}mi(new Ts(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV="firebase-heartbeat-database",JV=1,Dl="firebase-heartbeat-store";let vp=null;function rA(){return vp||(vp=mV(YV,JV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Dl)}catch(n){console.warn(n)}}}}).catch(t=>{throw ys.create("idb-open",{originalErrorMessage:t.message})})),vp}async function ZV(t){try{const n=(await rA()).transaction(Dl),r=await n.objectStore(Dl).get(sA(t));return await n.done,r}catch(e){if(e instanceof hr)Vr.warn(e.message);else{const n=ys.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Vr.warn(n.message)}}}async function RE(t,e){try{const r=(await rA()).transaction(Dl,"readwrite");await r.objectStore(Dl).put(e,sA(t)),await r.done}catch(n){if(n instanceof hr)Vr.warn(n.message);else{const r=ys.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Vr.warn(r.message)}}}function sA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM=1024,tM=30*24*60*60*1e3;class nM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new sM(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=xE();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=tM}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Vr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=xE(),{heartbeatsToSend:r,unsentEntries:s}=rM(this._heartbeatsCache.heartbeats),i=bh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Vr.warn(n),""}}}function xE(){return new Date().toISOString().substring(0,10)}function rM(t,e=eM){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),CE(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),CE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class sM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return WL()?HL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ZV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return RE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return RE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function CE(t){return bh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iM(t){mi(new Ts("platform-logger",e=>new vV(e),"PRIVATE")),mi(new Ts("heartbeat",e=>new nM(e),"PRIVATE")),nr(Xm,PE,t),nr(Xm,PE,"esm2017"),nr("fire-js","")}iM("");function tv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function iA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const oM=iA,oA=new nu("auth","Firebase",iA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh=new Jy("@firebase/auth");function aM(t,...e){Oh.logLevel<=ae.WARN&&Oh.warn(`Auth (${xi}): ${t}`,...e)}function Mc(t,...e){Oh.logLevel<=ae.ERROR&&Oh.error(`Auth (${xi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(t,...e){throw rv(t,...e)}function Un(t,...e){return rv(t,...e)}function nv(t,e,n){const r=Object.assign(Object.assign({},oM()),{[e]:n});return new nu("auth","Firebase",r).create(e,{appName:t.name})}function rr(t){return nv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lM(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Pn(t,"argument-error"),nv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function rv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return oA.create(t,...e)}function Y(t,e,...n){if(!t)throw rv(e,...n)}function Tr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Mc(e),new Error(e)}function Mr(t,e){t||Tr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function uM(){return bE()==="http:"||bE()==="https:"}function bE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uM()||jL()||"connection"in navigator)?navigator.onLine:!0}function hM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n){this.shortDelay=e,this.longDelay=n,Mr(n>e,"Short delay should be less than long delay!"),this.isMobile=ML()||BL()}get(){return cM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(t,e){Mr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Tr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Tr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Tr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM=new su(3e4,6e4);function $r(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function $n(t,e,n,r,s={}){return lA(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=ru(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return UL()||(c.referrerPolicy="no-referrer"),aA.fetch()(uA(t,t.config.apiHost,n,a),c)})}async function lA(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},dM),e);try{const s=new mM(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw oc(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw oc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw oc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw oc(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw nv(t,h,c);Pn(t,h)}}catch(s){if(s instanceof hr)throw s;Pn(t,"network-request-failed",{message:String(s)})}}async function iu(t,e,n,r,s={}){const i=await $n(t,e,n,r,s);return"mfaPendingCredential"in i&&Pn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function uA(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?sv(t.config,s):`${t.config.apiScheme}://${s}`}function pM(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mM{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Un(this.auth,"network-request-failed")),fM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function oc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Un(t,e,r);return s.customData._tokenResponse=n,s}function kE(t){return t!==void 0&&t.enterprise!==void 0}class gM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return pM(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function yM(t,e){return $n(t,"GET","/v2/recaptchaConfig",$r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vM(t,e){return $n(t,"POST","/v1/accounts:delete",e)}async function cA(t,e){return $n(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function _M(t,e=!1){const n=Ae(t),r=await n.getIdToken(e),s=iv(r);Y(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:rl(_p(s.auth_time)),issuedAtTime:rl(_p(s.iat)),expirationTime:rl(_p(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function _p(t){return Number(t)*1e3}function iv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Mc("JWT malformed, contained fewer than 3 sections"),null;try{const s=GP(n);return s?JSON.parse(s):(Mc("Failed to decode base64 JWT payload"),null)}catch(s){return Mc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function NE(t){const e=iv(t);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof hr&&wM(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function wM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=rl(this.lastLoginAt),this.creationTime=rl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dh(t){var e;const n=t.auth,r=await t.getIdToken(),s=await gi(t,cA(n,{idToken:r}));Y(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?hA(i.providerUserInfo):[],a=SM(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new eg(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function TM(t){const e=Ae(t);await Dh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function SM(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function hA(t){return t.map(e=>{var{providerId:n}=e,r=tv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IM(t,e){const n=await lA(t,{},async()=>{const r=ru({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=uA(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",aA.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function PM(t,e){return $n(t,"POST","/v2/accounts:revokeToken",$r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):NE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Y(e.length!==0,"internal-error");const n=NE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await IM(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new yo;return r&&(Y(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Y(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Y(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yo,this.toJSON())}_performRefresh(){return Tr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(t,e){Y(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Sr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=tv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new EM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new eg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await gi(this,this.stsTokenManager.getToken(this.auth,e));return Y(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return _M(this,e)}reload(){return TM(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Sr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Dh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(En(this.auth.app))return Promise.reject(rr(this.auth));const e=await this.getIdToken();return await gi(this,vM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(s=n.email)!==null&&s!==void 0?s:void 0,y=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,w=(o=n.photoURL)!==null&&o!==void 0?o:void 0,T=(a=n.tenantId)!==null&&a!==void 0?a:void 0,P=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,E=(c=n.createdAt)!==null&&c!==void 0?c:void 0,g=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:_,emailVerified:x,isAnonymous:D,providerData:V,stsTokenManager:S}=n;Y(_&&S,e,"internal-error");const v=yo.fromJSON(this.name,S);Y(typeof _=="string",e,"internal-error"),Kr(d,e.name),Kr(f,e.name),Y(typeof x=="boolean",e,"internal-error"),Y(typeof D=="boolean",e,"internal-error"),Kr(y,e.name),Kr(w,e.name),Kr(T,e.name),Kr(P,e.name),Kr(E,e.name),Kr(g,e.name);const A=new Sr({uid:_,auth:e,email:f,emailVerified:x,displayName:d,isAnonymous:D,photoURL:w,phoneNumber:y,tenantId:T,stsTokenManager:v,createdAt:E,lastLoginAt:g});return V&&Array.isArray(V)&&(A.providerData=V.map(C=>Object.assign({},C))),P&&(A._redirectEventId=P),A}static async _fromIdTokenResponse(e,n,r=!1){const s=new yo;s.updateFromServerResponse(n);const i=new Sr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Dh(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Y(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?hA(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new yo;a.updateFromIdToken(r);const l=new Sr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new eg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE=new Map;function Ir(t){Mr(t instanceof Function,"Expected a class definition");let e=OE.get(t);return e?(Mr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,OE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}dA.type="NONE";const DE=dA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(t,e,n){return`firebase:${t}:${e}:${n}`}class vo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Fc(this.userKey,s.apiKey,i),this.fullPersistenceKey=Fc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Sr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new vo(Ir(DE),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Ir(DE);const o=Fc(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=Sr._fromJSON(e,h);c!==i&&(a=d),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new vo(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new vo(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(gA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(fA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vA(e))return"Blackberry";if(_A(e))return"Webos";if(pA(e))return"Safari";if((e.includes("chrome/")||mA(e))&&!e.includes("edge/"))return"Chrome";if(yA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function fA(t=Ot()){return/firefox\//i.test(t)}function pA(t=Ot()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mA(t=Ot()){return/crios\//i.test(t)}function gA(t=Ot()){return/iemobile/i.test(t)}function yA(t=Ot()){return/android/i.test(t)}function vA(t=Ot()){return/blackberry/i.test(t)}function _A(t=Ot()){return/webos/i.test(t)}function ov(t=Ot()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function AM(t=Ot()){var e;return ov(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function RM(){return $L()&&document.documentMode===10}function wA(t=Ot()){return ov(t)||yA(t)||_A(t)||vA(t)||/windows phone/i.test(t)||gA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(t,e=[]){let n;switch(t){case"Browser":n=LE(Ot());break;case"Worker":n=`${LE(Ot())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CM(t,e={}){return $n(t,"GET","/v2/passwordPolicy",$r(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM=6;class kM{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:bM,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new VE(this),this.idTokenSubscription=new VE(this),this.beforeStateQueue=new xM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ir(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await vo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await cA(this,{idToken:e}),r=await Sr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(En(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Dh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(En(this.app))return Promise.reject(rr(this));const n=e?Ae(e):null;return n&&Y(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return En(this.app)?Promise.reject(rr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return En(this.app)?Promise.reject(rr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ir(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await CM(this),n=new kM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new nu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await PM(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ir(e)||this._popupRedirectResolver;Y(n,this,"argument-error"),this.redirectPersistenceManager=await vo.create(this,[Ir(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=EA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&aM(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Os(t){return Ae(t)}class VE{constructor(e){this.auth=e,this.observer=null,this.addObserver=XL(n=>this.observer=n)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OM(t){xd=t}function TA(t){return xd.loadJS(t)}function DM(){return xd.recaptchaEnterpriseScript}function LM(){return xd.gapiScript}function VM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const MM="recaptcha-enterprise",FM="NO_RECAPTCHA";class UM{constructor(e){this.type=MM,this.auth=Os(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{yM(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new gM(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;kE(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(FM)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&kE(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=DM();l.length!==0&&(l+=a),TA(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function ME(t,e,n,r=!1){const s=new UM(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function tg(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ME(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await ME(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jM(t,e){const n=Rd(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(kh(i,e??{}))return s;Pn(s,"already-initialized")}return n.initialize({options:e})}function BM(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ir);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function $M(t,e,n){const r=Os(t);Y(r._canInitEmulator,r,"emulator-config-failed"),Y(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=SA(e),{host:o,port:a}=zM(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),WM()}function SA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function zM(t){const e=SA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:FE(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:FE(o)}}}function FE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function WM(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Tr("not implemented")}_getIdTokenResponse(e){return Tr("not implemented")}_linkToIdToken(e,n){return Tr("not implemented")}_getReauthenticationResolver(e){return Tr("not implemented")}}async function HM(t,e){return $n(t,"POST","/v1/accounts:update",e)}async function qM(t,e){return $n(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KM(t,e){return iu(t,"POST","/v1/accounts:signInWithPassword",$r(t,e))}async function GM(t,e){return $n(t,"POST","/v1/accounts:sendOobCode",$r(t,e))}async function QM(t,e){return GM(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XM(t,e){return iu(t,"POST","/v1/accounts:signInWithEmailLink",$r(t,e))}async function YM(t,e){return iu(t,"POST","/v1/accounts:signInWithEmailLink",$r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll extends av{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ll(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ll(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tg(e,n,"signInWithPassword",KM);case"emailLink":return XM(e,{email:this._email,oobCode:this._password});default:Pn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tg(e,r,"signUpPassword",qM);case"emailLink":return YM(e,{idToken:n,email:this._email,oobCode:this._password});default:Pn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _o(t,e){return iu(t,"POST","/v1/accounts:signInWithIdp",$r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM="http://localhost";class yi extends av{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new yi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Pn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=tv(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new yi(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return _o(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,_o(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,_o(e,n)}buildRequest(){const e={requestUri:JM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ru(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZM(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function e2(t){const e=Da(La(t)).link,n=e?Da(La(e)).deep_link_id:null,r=Da(La(t)).deep_link_id;return(r?Da(La(r)).link:null)||r||n||e||t}class lv{constructor(e){var n,r,s,i,o,a;const l=Da(La(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,d=ZM((s=l.mode)!==null&&s!==void 0?s:null);Y(c&&h&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=h,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=e2(e);try{return new lv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(){this.providerId=Xo.PROVIDER_ID}static credential(e,n){return Ll._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=lv.parseLink(n);return Y(r,"argument-error"),Ll._fromEmailAndCode(e,r.code,r.tenantId)}}Xo.PROVIDER_ID="password";Xo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou extends uv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn extends ou{constructor(){super("facebook.com")}static credential(e){return yi._fromParams({providerId:Xn.PROVIDER_ID,signInMethod:Xn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xn.credentialFromTaggedObject(e)}static credentialFromError(e){return Xn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xn.credential(e.oauthAccessToken)}catch{return null}}}Xn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn extends ou{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return yi._fromParams({providerId:Yn.PROVIDER_ID,signInMethod:Yn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Yn.credentialFromTaggedObject(e)}static credentialFromError(e){return Yn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Yn.credential(n,r)}catch{return null}}}Yn.GOOGLE_SIGN_IN_METHOD="google.com";Yn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends ou{constructor(){super("github.com")}static credential(e){return yi._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return es.credential(e.oauthAccessToken)}catch{return null}}}es.GITHUB_SIGN_IN_METHOD="github.com";es.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends ou{constructor(){super("twitter.com")}static credential(e,n){return yi._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ts.credential(n,r)}catch{return null}}}ts.TWITTER_SIGN_IN_METHOD="twitter.com";ts.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t2(t,e){return iu(t,"POST","/v1/accounts:signUp",$r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Sr._fromIdTokenResponse(e,r,s),o=UE(r);return new vi({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=UE(r);return new vi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function UE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh extends hr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Lh.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Lh(e,n,r,s)}}function IA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Lh._fromErrorAndOperation(t,i,e,r):i})}async function n2(t,e,n=!1){const r=await gi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return vi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r2(t,e,n=!1){const{auth:r}=t;if(En(r.app))return Promise.reject(rr(r));const s="reauthenticate";try{const i=await gi(t,IA(r,s,e,t),n);Y(i.idToken,r,"internal-error");const o=iv(i.idToken);Y(o,r,"internal-error");const{sub:a}=o;return Y(t.uid===a,r,"user-mismatch"),vi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Pn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PA(t,e,n=!1){if(En(t.app))return Promise.reject(rr(t));const r="signIn",s=await IA(t,r,e),i=await vi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function s2(t,e){return PA(Os(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AA(t){const e=Os(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function i2(t,e,n){if(En(t.app))return Promise.reject(rr(t));const r=Os(t),o=await tg(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",t2).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&AA(t),l}),a=await vi._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function o2(t,e,n){return En(t.app)?Promise.reject(rr(t)):s2(Ae(t),Xo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&AA(t),r})}async function a2(t,e){const n=Ae(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:i}=await QM(n.auth,s);i!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l2(t,e){return $n(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u2(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ae(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await gi(r,l2(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function c2(t,e){const n=Ae(t);return En(n.auth.app)?Promise.reject(rr(n.auth)):RA(n,e,null)}function h2(t,e){return RA(Ae(t),null,e)}async function RA(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(i.email=e),n&&(i.password=n);const o=await gi(t,HM(r,i));await t._updateTokensIfNecessary(o,!0)}function d2(t,e,n,r){return Ae(t).onIdTokenChanged(e,n,r)}function f2(t,e,n){return Ae(t).beforeAuthStateChanged(e,n)}function cv(t,e,n,r){return Ae(t).onAuthStateChanged(e,n,r)}const Vh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Vh,"1"),this.storage.removeItem(Vh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2=1e3,m2=10;class CA extends xA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);RM()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,m2):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},p2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}CA.type="LOCAL";const g2=CA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA extends xA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}bA.type="SESSION";const kA=bA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Cd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await y2(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Cd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=hv("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(){return window}function _2(t){sr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(){return typeof sr().WorkerGlobalScope<"u"&&typeof sr().importScripts=="function"}async function w2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function E2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function T2(){return NA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="firebaseLocalStorageDb",S2=1,Mh="firebaseLocalStorage",DA="fbase_key";class au{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function bd(t,e){return t.transaction([Mh],e?"readwrite":"readonly").objectStore(Mh)}function I2(){const t=indexedDB.deleteDatabase(OA);return new au(t).toPromise()}function ng(){const t=indexedDB.open(OA,S2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Mh,{keyPath:DA})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Mh)?e(r):(r.close(),await I2(),e(await ng()))})})}async function jE(t,e,n){const r=bd(t,!0).put({[DA]:e,value:n});return new au(r).toPromise()}async function P2(t,e){const n=bd(t,!1).get(e),r=await new au(n).toPromise();return r===void 0?null:r.value}function BE(t,e){const n=bd(t,!0).delete(e);return new au(n).toPromise()}const A2=800,R2=3;class LA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ng(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>R2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return NA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Cd._getInstance(T2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await w2(),!this.activeServiceWorker)return;this.sender=new v2(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||E2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ng();return await jE(e,Vh,"1"),await BE(e,Vh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>jE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>P2(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>BE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=bd(s,!1).getAll();return new au(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),A2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}LA.type="LOCAL";const x2=LA;new su(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(t,e){return e?Ir(e):(Y(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv extends av{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _o(e,this._buildIdpRequest())}_linkToIdToken(e,n){return _o(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return _o(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function C2(t){return PA(t.auth,new dv(t),t.bypassAuthState)}function b2(t){const{auth:e,user:n}=t;return Y(n,e,"internal-error"),r2(n,new dv(t),t.bypassAuthState)}async function k2(t){const{auth:e,user:n}=t;return Y(n,e,"internal-error"),n2(n,new dv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return C2;case"linkViaPopup":case"linkViaRedirect":return k2;case"reauthViaPopup":case"reauthViaRedirect":return b2;default:Pn(this.auth,"internal-error")}}resolve(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2=new su(2e3,1e4);async function Fh(t,e,n){if(En(t.app))return Promise.reject(Un(t,"operation-not-supported-in-this-environment"));const r=Os(t);lM(t,e,uv);const s=VA(r,n);return new Js(r,"signInViaPopup",e,s).executeNotNull()}class Js extends MA{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Js.currentPopupAction&&Js.currentPopupAction.cancel(),Js.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Y(e,this.auth,"internal-error"),e}async onExecution(){Mr(this.filter.length===1,"Popup operations only handle one event");const e=hv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Un(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Un(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Js.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Un(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,N2.get())};e()}}Js.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2="pendingRedirect",Uc=new Map;class D2 extends MA{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Uc.get(this.auth._key());if(!e){try{const r=await L2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Uc.set(this.auth._key(),e)}return this.bypassAuthState||Uc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function L2(t,e){const n=F2(e),r=M2(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function V2(t,e){Uc.set(t._key(),e)}function M2(t){return Ir(t._redirectPersistence)}function F2(t){return Fc(O2,t.config.apiKey,t.name)}async function U2(t,e,n=!1){if(En(t.app))return Promise.reject(rr(t));const r=Os(t),s=VA(r,e),o=await new D2(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2=10*60*1e3;class B2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!FA(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Un(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=j2&&this.cachedEventUids.clear(),this.cachedEventUids.has($E(e))}saveEventToCache(e){this.cachedEventUids.add($E(e)),this.lastProcessedEventTime=Date.now()}}function $E(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function FA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function $2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z2(t,e={}){return $n(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,H2=/^https?/;async function q2(t){if(t.config.emulator)return;const{authorizedDomains:e}=await z2(t);for(const n of e)try{if(K2(n))return}catch{}Pn(t,"unauthorized-domain")}function K2(t){const e=Zm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!H2.test(n))return!1;if(W2.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2=new su(3e4,6e4);function zE(){const t=sr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Q2(t){return new Promise((e,n)=>{var r,s,i;function o(){zE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zE(),n(Un(t,"network-request-failed"))},timeout:G2.get()})}if(!((s=(r=sr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=sr().gapi)===null||i===void 0)&&i.load)o();else{const a=VM("iframefcb");return sr()[a]=()=>{gapi.load?o():n(Un(t,"network-request-failed"))},TA(`${LM()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw jc=null,e})}let jc=null;function X2(t){return jc=jc||Q2(t),jc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2=new su(5e3,15e3),J2="__/auth/iframe",Z2="emulator/auth/iframe",eF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nF(t){const e=t.config;Y(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?sv(e,Z2):`https://${t.config.authDomain}/${J2}`,r={apiKey:e.apiKey,appName:t.name,v:xi},s=tF.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ru(r).slice(1)}`}async function rF(t){const e=await X2(t),n=sr().gapi;return Y(n,t,"internal-error"),e.open({where:document.body,url:nF(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eF,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Un(t,"network-request-failed"),a=sr().setTimeout(()=>{i(o)},Y2.get());function l(){sr().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iF=500,oF=600,aF="_blank",lF="http://localhost";class WE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uF(t,e,n,r=iF,s=oF){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},sF),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Ot().toLowerCase();n&&(a=mA(c)?aF:n),fA(c)&&(e=e||lF,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[y,w])=>`${f}${y}=${w},`,"");if(AM(c)&&a!=="_self")return cF(e||"",a),new WE(null);const d=window.open(e||"",a,h);Y(d,t,"popup-blocked");try{d.focus()}catch{}return new WE(d)}function cF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hF="__/auth/handler",dF="emulator/auth/handler",fF=encodeURIComponent("fac");async function HE(t,e,n,r,s,i){Y(t.config.authDomain,t,"auth-domain-config-required"),Y(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:xi,eventId:s};if(e instanceof uv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",QL(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof ou){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${fF}=${encodeURIComponent(l)}`:"";return`${pF(t)}?${ru(a).slice(1)}${c}`}function pF({config:t}){return t.emulator?sv(t,dF):`https://${t.authDomain}/${hF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp="webStorageSupport";class mF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kA,this._completeRedirectFn=U2,this._overrideRedirectResult=V2}async _openPopup(e,n,r,s){var i;Mr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await HE(e,n,r,Zm(),s);return uF(e,o,hv())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await HE(e,n,r,Zm(),s);return _2(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Mr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await rF(e),r=new B2(e);return n.register("authEvent",s=>(Y(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(wp,{type:wp},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[wp];o!==void 0&&n(!!o),Pn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=q2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return wA()||pA()||ov()}}const gF=mF;var qE="@firebase/auth",KE="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _F(t){mi(new Ts("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Y(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:EA(t)},c=new NM(r,s,i,l);return BM(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),mi(new Ts("auth-internal",e=>{const n=Os(e.getProvider("auth").getImmediate());return(r=>new yF(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),nr(qE,KE,vF(t)),nr(qE,KE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wF=5*60,EF=JP("authIdTokenMaxAge")||wF;let GE=null;const TF=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>EF)return;const s=n==null?void 0:n.token;GE!==s&&(GE=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Yo(t=ev()){const e=Rd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=jM(t,{popupRedirectResolver:gF,persistence:[x2,g2,kA]}),r=JP("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=TF(i.toString());f2(n,o,()=>o(n.currentUser)),d2(n,a=>o(a))}}const s=QP("auth");return s&&$M(n,`http://${s}`),n}function SF(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}OM({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Un("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",SF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_F("Browser");function IF(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}function kd(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const rg=t=>Array.isArray(t);function UA(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Vl(t){return typeof t=="string"||Array.isArray(t)}function QE(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function fv(t,e,n,r){if(typeof e=="function"){const[s,i]=QE(r);e=e(n!==void 0?n:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=QE(r);e=e(n!==void 0?n:t.custom,s,i)}return e}function Nd(t,e,n){const r=t.getProps();return fv(r,e,n!==void 0?n:r.custom,t)}const pv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],mv=["initial",...pv],lu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ci=new Set(lu),Rr=t=>t*1e3,xr=t=>t/1e3,PF={type:"spring",stiffness:500,damping:25,restSpeed:10},AF=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),RF={type:"keyframes",duration:.8},xF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},CF=(t,{keyframes:e})=>e.length>2?RF:Ci.has(t)?t.startsWith("scale")?AF(e[1]):PF:xF;function gv(t,e){return t?t[e]||t.default||t:void 0}const bF={skipAnimations:!1,useManualTiming:!1},kF=t=>t!==null;function Od(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(kF),i=e&&n!=="loop"&&e%2===1?0:s.length-1;return!i||r===void 0?s[i]:r}const kt=t=>t;function NF(t){let e=new Set,n=new Set,r=!1,s=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){i.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,h=!1,d=!1)=>{const y=d&&r?e:n;return h&&i.add(c),y.has(c)||y.add(c),c},cancel:c=>{n.delete(c),i.delete(c)},process:c=>{if(o=c,r){s=!0;return}r=!0,[e,n]=[n,e],n.clear(),e.forEach(a),r=!1,s&&(s=!1,l.process(c))}};return l}const ac=["read","resolveKeyframes","update","preRender","render","postRender"],OF=40;function jA(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=ac.reduce((E,g)=>(E[g]=NF(i),E),{}),{read:a,resolveKeyframes:l,update:c,preRender:h,render:d,postRender:f}=o,y=()=>{const E=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(E-s.timestamp,OF),1),s.timestamp=E,s.isProcessing=!0,a.process(s),l.process(s),c.process(s),h.process(s),d.process(s),f.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(y))},w=()=>{n=!0,r=!0,s.isProcessing||t(y)};return{schedule:ac.reduce((E,g)=>{const _=o[g];return E[g]=(x,D=!1,V=!1)=>(n||w(),_.schedule(x,D,V)),E},{}),cancel:E=>{for(let g=0;g<ac.length;g++)o[ac[g]].cancel(E)},state:s,steps:o}}const{schedule:Se,cancel:Ss,state:ct,steps:Ep}=jA(typeof requestAnimationFrame<"u"?requestAnimationFrame:kt,!0),BA=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,DF=1e-7,LF=12;function VF(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=BA(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>DF&&++a<LF);return o}function uu(t,e,n,r){if(t===e&&n===r)return kt;const s=i=>VF(i,0,1,t,n);return i=>i===0||i===1?i:BA(s(i),e,r)}const $A=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,zA=t=>e=>1-t(1-e),WA=uu(.33,1.53,.69,.99),yv=zA(WA),HA=$A(yv),qA=t=>(t*=2)<1?.5*yv(t):.5*(2-Math.pow(2,-10*(t-1))),vv=t=>1-Math.sin(Math.acos(t)),KA=zA(vv),GA=$A(vv),QA=t=>/^0[^.\s]+$/u.test(t);function MF(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||QA(t):!0}let sg=kt;const XA=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),YA=t=>e=>typeof e=="string"&&e.startsWith(t),JA=YA("--"),FF=YA("var(--"),_v=t=>FF(t)?UF.test(t.split("/*")[0].trim()):!1,UF=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,jF=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function BF(t){const e=jF.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function ZA(t,e,n=1){const[r,s]=BF(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return XA(o)?parseFloat(o):o}return _v(s)?ZA(s,e,n+1):s}const Is=(t,e,n)=>n>e?e:n<t?t:n,Jo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ml={...Jo,transform:t=>Is(0,1,t)},lc={...Jo,default:1},cu=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Qr=cu("deg"),ir=cu("%"),X=cu("px"),$F=cu("vh"),zF=cu("vw"),XE={...ir,parse:t=>ir.parse(t)/100,transform:t=>ir.transform(t*100)},WF=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),YE=t=>t===Jo||t===X,JE=(t,e)=>parseFloat(t.split(", ")[e]),ZE=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return JE(s[1],e);{const i=r.match(/^matrix\((.+)\)$/u);return i?JE(i[1],t):0}},HF=new Set(["x","y","z"]),qF=lu.filter(t=>!HF.has(t));function KF(t){const e=[];return qF.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Oo={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:ZE(4,13),y:ZE(5,14)};Oo.translateX=Oo.x;Oo.translateY=Oo.y;const eR=t=>e=>e.test(t),GF={test:t=>t==="auto",parse:t=>t},tR=[Jo,X,ir,Qr,zF,$F,GF],eT=t=>tR.find(eR(t)),ii=new Set;let ig=!1,og=!1;function nR(){if(og){const t=Array.from(ii).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=KF(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var a;(a=r.getValue(i))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}og=!1,ig=!1,ii.forEach(t=>t.complete()),ii.clear()}function rR(){ii.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(og=!0)})}function QF(){rR(),nR()}class wv{constructor(e,n,r,s,i,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ii.add(this),ig||(ig=!0,Se.read(rR),Se.resolveKeyframes(nR))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;for(let i=0;i<e.length;i++)if(e[i]===null)if(i===0){const o=s==null?void 0:s.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),s&&o===void 0&&s.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),ii.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ii.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const sl=t=>Math.round(t*1e5)/1e5,Ev=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function XF(t){return t==null}const YF=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Tv=(t,e)=>n=>!!(typeof n=="string"&&YF.test(n)&&n.startsWith(t)||e&&!XF(n)&&Object.prototype.hasOwnProperty.call(n,e)),sR=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,a]=r.match(Ev);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},JF=t=>Is(0,255,t),Tp={...Jo,transform:t=>Math.round(JF(t))},Zs={test:Tv("rgb","red"),parse:sR("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Tp.transform(t)+", "+Tp.transform(e)+", "+Tp.transform(n)+", "+sl(Ml.transform(r))+")"};function ZF(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const ag={test:Tv("#"),parse:ZF,transform:Zs.transform},so={test:Tv("hsl","hue"),parse:sR("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+ir.transform(sl(e))+", "+ir.transform(sl(n))+", "+sl(Ml.transform(r))+")"},At={test:t=>Zs.test(t)||ag.test(t)||so.test(t),parse:t=>Zs.test(t)?Zs.parse(t):so.test(t)?so.parse(t):ag.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Zs.transform(t):so.transform(t)},eU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function tU(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Ev))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(eU))===null||n===void 0?void 0:n.length)||0)>0}const iR="number",oR="color",nU="var",rU="var(",tT="${}",sU=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Fl(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=e.replace(sU,l=>(At.test(l)?(r.color.push(i),s.push(oR),n.push(At.parse(l))):l.startsWith(rU)?(r.var.push(i),s.push(nU),n.push(l)):(r.number.push(i),s.push(iR),n.push(parseFloat(l))),++i,tT)).split(tT);return{values:n,split:a,indexes:r,types:s}}function aR(t){return Fl(t).values}function lR(t){const{split:e,types:n}=Fl(t),r=e.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=e[o],s[o]!==void 0){const a=n[o];a===iR?i+=sl(s[o]):a===oR?i+=At.transform(s[o]):i+=s[o]}return i}}const iU=t=>typeof t=="number"?0:t;function oU(t){const e=aR(t);return lR(t)(e.map(iU))}const Ps={test:tU,parse:aR,createTransformer:lR,getAnimatableNone:oU},aU=new Set(["brightness","contrast","saturate","opacity"]);function lU(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Ev)||[];if(!r)return t;const s=n.replace(r,"");let i=aU.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const uU=/\b([a-z-]*)\(.*?\)/gu,lg={...Ps,getAnimatableNone:t=>{const e=t.match(uU);return e?e.map(lU).join(" "):t}},cU={borderWidth:X,borderTopWidth:X,borderRightWidth:X,borderBottomWidth:X,borderLeftWidth:X,borderRadius:X,radius:X,borderTopLeftRadius:X,borderTopRightRadius:X,borderBottomRightRadius:X,borderBottomLeftRadius:X,width:X,maxWidth:X,height:X,maxHeight:X,top:X,right:X,bottom:X,left:X,padding:X,paddingTop:X,paddingRight:X,paddingBottom:X,paddingLeft:X,margin:X,marginTop:X,marginRight:X,marginBottom:X,marginLeft:X,backgroundPositionX:X,backgroundPositionY:X},hU={rotate:Qr,rotateX:Qr,rotateY:Qr,rotateZ:Qr,scale:lc,scaleX:lc,scaleY:lc,scaleZ:lc,skew:Qr,skewX:Qr,skewY:Qr,distance:X,translateX:X,translateY:X,translateZ:X,x:X,y:X,z:X,perspective:X,transformPerspective:X,opacity:Ml,originX:XE,originY:XE,originZ:X},nT={...Jo,transform:Math.round},Sv={...cU,...hU,zIndex:nT,size:X,fillOpacity:Ml,strokeOpacity:Ml,numOctaves:nT},dU={...Sv,color:At,backgroundColor:At,outlineColor:At,fill:At,stroke:At,borderColor:At,borderTopColor:At,borderRightColor:At,borderBottomColor:At,borderLeftColor:At,filter:lg,WebkitFilter:lg},Iv=t=>dU[t];function uR(t,e){let n=Iv(t);return n!==lg&&(n=Ps),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const fU=new Set(["auto","none","0"]);function pU(t,e,n){let r=0,s;for(;r<t.length&&!s;){const i=t[r];typeof i=="string"&&!fU.has(i)&&Fl(i).values.length&&(s=t[r]),r++}if(s&&n)for(const i of e)t[i]=uR(n,s)}class cR extends wv{constructor(e,n,r,s,i){super(e,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),_v(c))){const h=ZA(c,n.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!WF.has(r)||e.length!==2)return;const[s,i]=e,o=eT(s),a=eT(i);if(o!==a)if(YE(o)&&YE(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)MF(e[s])&&r.push(s);r.length&&pU(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Oo[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const i=n.getValue(r);i&&i.jump(this.measuredOrigin,!1);const o=s.length-1,a=s[o];s[o]=Oo[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function Pv(t){return typeof t=="function"}let Bc;function mU(){Bc=void 0}const or={now:()=>(Bc===void 0&&or.set(ct.isProcessing||bF.useManualTiming?ct.timestamp:performance.now()),Bc),set:t=>{Bc=t,queueMicrotask(mU)}},rT=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ps.test(t)||t==="0")&&!t.startsWith("url("));function gU(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function yU(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=rT(s,e),a=rT(i,e);return!o||!a?!1:gU(t)||(n==="spring"||Pv(n))&&r}const vU=40;class hR{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=or.now(),this.options={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>vU?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&QF(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=or.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:i,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!yU(e,r,s,i))if(o)this.options.duration=0;else{l==null||l(Od(e,this.options,n)),a==null||a(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,n);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...h},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function dR(t,e){return e?t*(1e3/e):0}const _U=5;function fR(t,e,n){const r=Math.max(e-_U,0);return dR(n-t(r),e-r)}const Sp=.001,wU=.01,EU=10,TU=.05,SU=1;function IU({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let s,i,o=1-e;o=Is(TU,SU,o),t=Is(wU,EU,xr(t)),o<1?(s=c=>{const h=c*o,d=h*t,f=h-n,y=ug(c,o),w=Math.exp(-d);return Sp-f/y*w},i=c=>{const d=c*o*t,f=d*n+n,y=Math.pow(o,2)*Math.pow(c,2)*t,w=Math.exp(-d),T=ug(Math.pow(c,2),o);return(-s(c)+Sp>0?-1:1)*((f-y)*w)/T}):(s=c=>{const h=Math.exp(-c*t),d=(c-n)*t+1;return-Sp+h*d},i=c=>{const h=Math.exp(-c*t),d=(n-c)*(t*t);return h*d});const a=5/t,l=AU(s,i,a);if(t=Rr(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const PU=12;function AU(t,e,n){let r=n;for(let s=1;s<PU;s++)r=r-t(r)/e(r);return r}function ug(t,e){return t*Math.sqrt(1-e*e)}const RU=["duration","bounce"],xU=["stiffness","damping","mass"];function sT(t,e){return e.some(n=>t[n]!==void 0)}function CU(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!sT(t,xU)&&sT(t,RU)){const n=IU(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function pR({keyframes:t,restDelta:e,restSpeed:n,...r}){const s=t[0],i=t[t.length-1],o={done:!1,value:s},{stiffness:a,damping:l,mass:c,duration:h,velocity:d,isResolvedFromDuration:f}=CU({...r,velocity:-xr(r.velocity||0)}),y=d||0,w=l/(2*Math.sqrt(a*c)),T=i-s,P=xr(Math.sqrt(a/c)),E=Math.abs(T)<5;n||(n=E?.01:2),e||(e=E?.005:.5);let g;if(w<1){const _=ug(P,w);g=x=>{const D=Math.exp(-w*P*x);return i-D*((y+w*P*T)/_*Math.sin(_*x)+T*Math.cos(_*x))}}else if(w===1)g=_=>i-Math.exp(-P*_)*(T+(y+P*T)*_);else{const _=P*Math.sqrt(w*w-1);g=x=>{const D=Math.exp(-w*P*x),V=Math.min(_*x,300);return i-D*((y+w*P*T)*Math.sinh(V)+_*T*Math.cosh(V))/_}}return{calculatedDuration:f&&h||null,next:_=>{const x=g(_);if(f)o.done=_>=h;else{let D=0;w<1&&(D=_===0?Rr(y):fR(g,_,x));const V=Math.abs(D)<=n,S=Math.abs(i-x)<=e;o.done=V&&S}return o.value=o.done?i:x,o}}}function iT({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:h}){const d=t[0],f={done:!1,value:d},y=v=>a!==void 0&&v<a||l!==void 0&&v>l,w=v=>a===void 0?l:l===void 0||Math.abs(a-v)<Math.abs(l-v)?a:l;let T=n*e;const P=d+T,E=o===void 0?P:o(P);E!==P&&(T=E-d);const g=v=>-T*Math.exp(-v/r),_=v=>E+g(v),x=v=>{const A=g(v),C=_(v);f.done=Math.abs(A)<=c,f.value=f.done?E:C};let D,V;const S=v=>{y(f.value)&&(D=v,V=pR({keyframes:[f.value,w(f.value)],velocity:fR(_,v,f.value),damping:s,stiffness:i,restDelta:c,restSpeed:h}))};return S(0),{calculatedDuration:null,next:v=>{let A=!1;return!V&&D===void 0&&(A=!0,x(v),S(v)),D!==void 0&&v>=D?V.next(v-D):(!A&&x(v),f)}}}const bU=uu(.42,0,1,1),kU=uu(0,0,.58,1),mR=uu(.42,0,.58,1),NU=t=>Array.isArray(t)&&typeof t[0]!="number",Av=t=>Array.isArray(t)&&typeof t[0]=="number",oT={linear:kt,easeIn:bU,easeInOut:mR,easeOut:kU,circIn:vv,circInOut:GA,circOut:KA,backIn:yv,backInOut:HA,backOut:WA,anticipate:qA},aT=t=>{if(Av(t)){sg(t.length===4);const[e,n,r,s]=t;return uu(e,n,r,s)}else if(typeof t=="string")return sg(oT[t]!==void 0),oT[t];return t},OU=(t,e)=>n=>e(t(n)),Cr=(...t)=>t.reduce(OU),Do=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Le=(t,e,n)=>t+(e-t)*n;function Ip(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function DU({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=Ip(l,a,t+1/3),i=Ip(l,a,t),o=Ip(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function Uh(t,e){return n=>n>0?e:t}const Pp=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},LU=[ag,Zs,so],VU=t=>LU.find(e=>e.test(t));function lT(t){const e=VU(t);if(!e)return!1;let n=e.parse(t);return e===so&&(n=DU(n)),n}const uT=(t,e)=>{const n=lT(t),r=lT(e);if(!n||!r)return Uh(t,e);const s={...n};return i=>(s.red=Pp(n.red,r.red,i),s.green=Pp(n.green,r.green,i),s.blue=Pp(n.blue,r.blue,i),s.alpha=Le(n.alpha,r.alpha,i),Zs.transform(s))},cg=new Set(["none","hidden"]);function MU(t,e){return cg.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function FU(t,e){return n=>Le(t,e,n)}function Rv(t){return typeof t=="number"?FU:typeof t=="string"?_v(t)?Uh:At.test(t)?uT:BU:Array.isArray(t)?gR:typeof t=="object"?At.test(t)?uT:UU:Uh}function gR(t,e){const n=[...t],r=n.length,s=t.map((i,o)=>Rv(i)(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function UU(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=Rv(t[s])(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function jU(t,e){var n;const r=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],a=t.indexes[o][s[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[i]=l,s[o]++}return r}const BU=(t,e)=>{const n=Ps.createTransformer(e),r=Fl(t),s=Fl(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?cg.has(t)&&!s.values.length||cg.has(e)&&!r.values.length?MU(t,e):Cr(gR(jU(r,s),s.values),n):Uh(t,e)};function yR(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Le(t,e,n):Rv(t)(t,e)}function $U(t,e,n){const r=[],s=n||yR,i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||kt:e;a=Cr(l,a)}r.push(a)}return r}function zU(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(sg(i===e.length),i===1)return()=>e[0];if(i===2&&t[0]===t[1])return()=>e[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=$U(e,r,s),a=o.length,l=c=>{let h=0;if(a>1)for(;h<t.length-2&&!(c<t[h+1]);h++);const d=Do(t[h],t[h+1],c);return o[h](d)};return n?c=>l(Is(t[0],t[i-1],c)):l}function WU(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Do(0,e,r);t.push(Le(n,1,s))}}function HU(t){const e=[0];return WU(e,t.length-1),e}function qU(t,e){return t.map(n=>n*e)}function KU(t,e){return t.map(()=>e||mR).splice(0,t.length-1)}function jh({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=NU(r)?r.map(aT):aT(r),i={done:!1,value:e[0]},o=qU(n&&n.length===e.length?n:HU(e),t),a=zU(o,e,{ease:Array.isArray(s)?s:KU(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}const cT=2e4;function GU(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<cT;)e+=n,r=t.next(e);return e>=cT?1/0:e}const QU=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Se.update(e,!0),stop:()=>Ss(e),now:()=>ct.isProcessing?ct.timestamp:or.now()}},XU={decay:iT,inertia:iT,tween:jh,keyframes:jh,spring:pR},YU=t=>t/100;class xv extends hR{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:s,keyframes:i}=this.options,o=(s==null?void 0:s.KeyframeResolver)||wv,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(i,a,n,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=this.options,a=Pv(n)?n:XU[n]||jh;let l,c;a!==jh&&typeof e[0]!="number"&&(l=Cr(YU,yR(e[0],e[1])),e=[0,100]);const h=a({...this.options,keyframes:e});i==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=GU(h));const{calculatedDuration:d}=h,f=d+s,y=f*(r+1)-s;return{generator:h,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:f,totalDuration:y}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:v}=this.options;return{done:!0,value:v[v.length-1]}}const{finalKeyframe:s,generator:i,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:h,resolvedDuration:d}=r;if(this.startTime===null)return i.next(0);const{delay:f,repeat:y,repeatType:w,repeatDelay:T,onUpdate:P}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const E=this.currentTime-f*(this.speed>=0?1:-1),g=this.speed>=0?E<0:E>h;this.currentTime=Math.max(E,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let _=this.currentTime,x=i;if(y){const v=Math.min(this.currentTime,h)/d;let A=Math.floor(v),C=v%1;!C&&v>=1&&(C=1),C===1&&A--,A=Math.min(A,y+1),!!(A%2)&&(w==="reverse"?(C=1-C,T&&(C-=T/d)):w==="mirror"&&(x=o)),_=Is(0,1,C)*d}const D=g?{done:!1,value:l[0]}:x.next(_);a&&(D.value=a(D.value));let{done:V}=D;!g&&c!==null&&(V=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&V);return S&&s!==void 0&&(D.value=Od(l,this.options,s)),P&&P(D.value),S&&this.finish(),D}get duration(){const{resolved:e}=this;return e?xr(e.calculatedDuration):0}get time(){return xr(this.currentTime)}set time(e){e=Rr(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=xr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=QU,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const JU=new Set(["opacity","clipPath","filter","transform"]),ZU=10,e4=(t,e)=>{let n="";const r=Math.max(Math.round(e/ZU),2);for(let s=0;s<r;s++)n+=t(Do(0,r-1,s))+", ";return`linear(${n.substring(0,n.length-2)})`};function Cv(t){let e;return()=>(e===void 0&&(e=t()),e)}const t4={linearEasing:void 0};function n4(t,e){const n=Cv(t);return()=>{var r;return(r=t4[e])!==null&&r!==void 0?r:n()}}const Bh=n4(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function vR(t){return!!(typeof t=="function"&&Bh()||!t||typeof t=="string"&&(t in hg||Bh())||Av(t)||Array.isArray(t)&&t.every(vR))}const Va=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,hg={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Va([0,.65,.55,1]),circOut:Va([.55,0,1,.45]),backIn:Va([.31,.01,.66,-.59]),backOut:Va([.33,1.53,.69,.99])};function _R(t,e){if(t)return typeof t=="function"&&Bh()?e4(t,e):Av(t)?Va(t):Array.isArray(t)?t.map(n=>_R(n,e)||hg.easeOut):hg[t]}function r4(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const h=_R(a,s);return Array.isArray(h)&&(c.easing=h),t.animate(c,{delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function hT(t,e){t.timeline=e,t.onfinish=null}const s4=Cv(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),$h=10,i4=2e4;function o4(t){return Pv(t.type)||t.type==="spring"||!vR(t.ease)}function a4(t,e){const n=new xv({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const s=[];let i=0;for(;!r.done&&i<i4;)r=n.sample(i),s.push(r.value),i+=$h;return{times:void 0,keyframes:s,duration:i-$h,ease:"linear"}}const wR={anticipate:qA,backInOut:HA,circInOut:GA};function l4(t){return t in wR}class dT extends hR{constructor(e){super(e);const{name:n,motionValue:r,element:s,keyframes:i}=this.options;this.resolver=new cR(i,(o,a)=>this.onKeyframesResolved(o,a),n,r,s),this.resolver.scheduleResolve()}initPlayback(e,n){var r;let{duration:s=300,times:i,ease:o,type:a,motionValue:l,name:c,startTime:h}=this.options;if(!(!((r=l.owner)===null||r===void 0)&&r.current))return!1;if(typeof o=="string"&&Bh()&&l4(o)&&(o=wR[o]),o4(this.options)){const{onComplete:f,onUpdate:y,motionValue:w,element:T,...P}=this.options,E=a4(e,P);e=E.keyframes,e.length===1&&(e[1]=e[0]),s=E.duration,i=E.times,o=E.ease,a="keyframes"}const d=r4(l.owner.current,c,e,{...this.options,duration:s,times:i,ease:o});return d.startTime=h??this.calcStartTime(),this.pendingTimeline?(hT(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:f}=this.options;l.set(Od(e,this.options,n)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:s,times:i,type:a,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return xr(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return xr(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Rr(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return kt;const{animation:r}=n;hT(r,e)}return kt}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:s,type:i,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:h,onComplete:d,element:f,...y}=this.options,w=new xv({...y,keyframes:r,duration:s,type:i,ease:o,times:a,isGenerator:!0}),T=Rr(this.time);c.setWithVelocity(w.sample(T-$h).value,w.sample(T).value,$h)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:s,repeatType:i,damping:o,type:a}=e;return s4()&&r&&JU.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!s&&i!=="mirror"&&o!==0&&a!=="inertia"}}const u4=Cv(()=>window.ScrollTimeline!==void 0);class c4{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,n){return Promise.all(this.animations).then(e).catch(n)}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(s=>u4()&&s.attachTimeline?s.attachTimeline(e):n(s));return()=>{r.forEach((s,i)=>{s&&s(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function h4({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...h}){return!!Object.keys(h).length}const bv=(t,e,n,r={},s,i)=>o=>{const a=gv(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Rr(l);let h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:i?void 0:s};h4(a)||(h={...h,...CF(t,h)}),h.duration&&(h.duration=Rr(h.duration)),h.repeatDelay&&(h.repeatDelay=Rr(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let d=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(d=!0)),d&&!i&&e.get()!==void 0){const f=Od(h.keyframes,a);if(f!==void 0)return Se.update(()=>{h.onUpdate(f),h.onComplete()}),new c4([])}return!i&&dT.supports(h)?new dT(h):new xv(h)},d4=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),f4=t=>rg(t)?t[t.length-1]||0:t;function kv(t,e){t.indexOf(e)===-1&&t.push(e)}function Nv(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Ov{constructor(){this.subscriptions=[]}add(e){return kv(this.subscriptions,e),()=>Nv(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const fT=30,p4=t=>!isNaN(parseFloat(t));class m4{constructor(e,n={}){this.version="11.11.17",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const i=or.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=or.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=p4(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Ov);const r=this.events[e].add(n);return e==="change"?()=>{r(),Se.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=or.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>fT)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,fT);return dR(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ul(t,e){return new m4(t,e)}function g4(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ul(n))}function y4(t,e){const n=Nd(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const a=f4(i[o]);g4(t,o,a)}}const Dv=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),v4="framerAppearId",ER="data-"+Dv(v4);function TR(t){return t.props[ER]}const bt=t=>!!(t&&t.getVelocity);function _4(t){return!!(bt(t)&&t.add)}function dg(t,e){const n=t.getValue("willChange");if(_4(n))return n.add(e)}function w4({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function SR(t,e,{delay:n=0,transitionOverride:r,type:s}={}){var i;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],h=s&&t.animationState&&t.animationState.getState()[s];for(const d in l){const f=t.getValue(d,(i=t.latestValues[d])!==null&&i!==void 0?i:null),y=l[d];if(y===void 0||h&&w4(h,d))continue;const w={delay:n,...gv(o||{},d)};let T=!1;if(window.MotionHandoffAnimation){const E=TR(t);if(E){const g=window.MotionHandoffAnimation(E,d,Se);g!==null&&(w.startTime=g,T=!0)}}dg(t,d),f.start(bv(d,f,y,t.shouldReduceMotion&&Ci.has(d)?{type:!1}:w,t,T));const P=f.animation;P&&c.push(P)}return a&&Promise.all(c).then(()=>{Se.update(()=>{a&&y4(t,a)})}),c}function fg(t,e,n={}){var r;const s=Nd(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(i=n.transitionOverride);const o=s?()=>Promise.all(SR(t,s,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:d,staggerDirection:f}=i;return E4(t,e,h+c,d,f,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[c,h]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>h())}else return Promise.all([o(),a(n.delay)])}function E4(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,l=s===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(T4).forEach((c,h)=>{c.notify("AnimationStart",e),o.push(fg(c,e,{...i,delay:n+l(h)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function T4(t,e){return t.sortNodePosition(e)}function S4(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>fg(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=fg(t,e,n);else{const s=typeof e=="function"?Nd(t,e,n.custom):e;r=Promise.all(SR(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const I4=mv.length;function IR(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?IR(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<I4;n++){const r=mv[n],s=t.props[r];(Vl(s)||s===!1)&&(e[r]=s)}return e}const P4=[...pv].reverse(),A4=pv.length;function R4(t){return e=>Promise.all(e.map(({animation:n,options:r})=>S4(t,n,r)))}function x4(t){let e=R4(t),n=pT(),r=!0;const s=l=>(c,h)=>{var d;const f=Nd(t,h,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(f){const{transition:y,transitionEnd:w,...T}=f;c={...c,...T,...w}}return c};function i(l){e=l(t)}function o(l){const{props:c}=t,h=IR(t.parent)||{},d=[],f=new Set;let y={},w=1/0;for(let P=0;P<A4;P++){const E=P4[P],g=n[E],_=c[E]!==void 0?c[E]:h[E],x=Vl(_),D=E===l?g.isActive:null;D===!1&&(w=P);let V=_===h[E]&&_!==c[E]&&x;if(V&&r&&t.manuallyAnimateOnMount&&(V=!1),g.protectedKeys={...y},!g.isActive&&D===null||!_&&!g.prevProp||kd(_)||typeof _=="boolean")continue;const S=C4(g.prevProp,_);let v=S||E===l&&g.isActive&&!V&&x||P>w&&x,A=!1;const C=Array.isArray(_)?_:[_];let R=C.reduce(s(E),{});D===!1&&(R={});const{prevResolvedValues:N={}}=g,b={...N,...R},Z=oe=>{v=!0,f.has(oe)&&(A=!0,f.delete(oe)),g.needsAnimating[oe]=!0;const B=t.getValue(oe);B&&(B.liveStyle=!1)};for(const oe in b){const B=R[oe],H=N[oe];if(y.hasOwnProperty(oe))continue;let G=!1;rg(B)&&rg(H)?G=!UA(B,H):G=B!==H,G?B!=null?Z(oe):f.add(oe):B!==void 0&&f.has(oe)?Z(oe):g.protectedKeys[oe]=!0}g.prevProp=_,g.prevResolvedValues=R,g.isActive&&(y={...y,...R}),r&&t.blockInitialAnimation&&(v=!1),v&&(!(V&&S)||A)&&d.push(...C.map(oe=>({animation:oe,options:{type:E}})))}if(f.size){const P={};f.forEach(E=>{const g=t.getBaseTarget(E),_=t.getValue(E);_&&(_.liveStyle=!0),P[E]=g??null}),d.push({animation:P})}let T=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(T=!1),r=!1,T?e(d):Promise.resolve()}function a(l,c){var h;if(n[l].isActive===c)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(f=>{var y;return(y=f.animationState)===null||y===void 0?void 0:y.setActive(l,c)}),n[l].isActive=c;const d=o(l);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=pT(),r=!0}}}function C4(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!UA(e,t):!1}function js(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function pT(){return{animate:js(!0),whileInView:js(),whileHover:js(),whileTap:js(),whileDrag:js(),whileFocus:js(),exit:js()}}class Ds{constructor(e){this.isMounted=!1,this.node=e}update(){}}class b4 extends Ds{constructor(e){super(e),e.animationState||(e.animationState=x4(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();kd(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let k4=0;class N4 extends Ds{constructor(){super(...arguments),this.id=k4++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const O4={animation:{Feature:b4},exit:{Feature:N4}},PR=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Dd(t,e="page"){return{point:{x:t[`${e}X`],y:t[`${e}Y`]}}}const D4=t=>e=>PR(e)&&t(e,Dd(e));function Pr(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function br(t,e,n,r){return Pr(t,e,D4(n),r)}const mT=(t,e)=>Math.abs(t-e);function L4(t,e){const n=mT(t.x,e.x),r=mT(t.y,e.y);return Math.sqrt(n**2+r**2)}class AR{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=Rp(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,y=L4(d.offset,{x:0,y:0})>=3;if(!f&&!y)return;const{point:w}=d,{timestamp:T}=ct;this.history.push({...w,timestamp:T});const{onStart:P,onMove:E}=this.handlers;f||(P&&P(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),E&&E(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=Ap(f,this.transformPagePoint),Se.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:y,onSessionEnd:w,resumeAnimation:T}=this.handlers;if(this.dragSnapToOrigin&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=Rp(d.type==="pointercancel"?this.lastMoveEventInfo:Ap(f,this.transformPagePoint),this.history);this.startEvent&&y&&y(d,P),w&&w(d,P)},!PR(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=Dd(e),a=Ap(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=ct;this.history=[{...l,timestamp:c}];const{onSessionStart:h}=n;h&&h(e,Rp(a,this.history)),this.removeListeners=Cr(br(this.contextWindow,"pointermove",this.handlePointerMove),br(this.contextWindow,"pointerup",this.handlePointerUp),br(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ss(this.updatePoint)}}function Ap(t,e){return e?{point:e(t.point)}:t}function gT(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Rp({point:t},e){return{point:t,delta:gT(t,RR(e)),offset:gT(t,V4(e)),velocity:M4(e,.1)}}function V4(t){return t[0]}function RR(t){return t[t.length-1]}function M4(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=RR(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Rr(e)));)n--;if(!r)return{x:0,y:0};const i=xr(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function xR(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const yT=xR("dragHorizontal"),vT=xR("dragVertical");function CR(t){let e=!1;if(t==="y")e=vT();else if(t==="x")e=yT();else{const n=yT(),r=vT();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function bR(){const t=CR(!0);return t?(t(),!1):!0}function io(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const kR=1e-4,F4=1-kR,U4=1+kR,NR=.01,j4=0-NR,B4=0+NR;function dn(t){return t.max-t.min}function $4(t,e,n){return Math.abs(t-e)<=n}function _T(t,e,n,r=.5){t.origin=r,t.originPoint=Le(e.min,e.max,t.origin),t.scale=dn(n)/dn(e),t.translate=Le(n.min,n.max,t.origin)-t.originPoint,(t.scale>=F4&&t.scale<=U4||isNaN(t.scale))&&(t.scale=1),(t.translate>=j4&&t.translate<=B4||isNaN(t.translate))&&(t.translate=0)}function il(t,e,n,r){_T(t.x,e.x,n.x,r?r.originX:void 0),_T(t.y,e.y,n.y,r?r.originY:void 0)}function wT(t,e,n){t.min=n.min+e.min,t.max=t.min+dn(e)}function z4(t,e,n){wT(t.x,e.x,n.x),wT(t.y,e.y,n.y)}function ET(t,e,n){t.min=e.min-n.min,t.max=t.min+dn(e)}function ol(t,e,n){ET(t.x,e.x,n.x),ET(t.y,e.y,n.y)}function W4(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Le(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Le(n,t,r.max):Math.min(t,n)),t}function TT(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function H4(t,{top:e,left:n,bottom:r,right:s}){return{x:TT(t.x,n,s),y:TT(t.y,e,r)}}function ST(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function q4(t,e){return{x:ST(t.x,e.x),y:ST(t.y,e.y)}}function K4(t,e){let n=.5;const r=dn(t),s=dn(e);return s>r?n=Do(e.min,e.max-r,t.min):r>s&&(n=Do(t.min,t.max-s,e.min)),Is(0,1,n)}function G4(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const pg=.35;function Q4(t=pg){return t===!1?t=0:t===!0&&(t=pg),{x:IT(t,"left","right"),y:IT(t,"top","bottom")}}function IT(t,e,n){return{min:PT(t,e),max:PT(t,n)}}function PT(t,e){return typeof t=="number"?t:t[e]||0}const AT=()=>({translate:0,scale:1,origin:0,originPoint:0}),oo=()=>({x:AT(),y:AT()}),RT=()=>({min:0,max:0}),We=()=>({x:RT(),y:RT()});function yn(t){return[t("x"),t("y")]}function OR({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function X4({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Y4(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function xp(t){return t===void 0||t===1}function mg({scale:t,scaleX:e,scaleY:n}){return!xp(t)||!xp(e)||!xp(n)}function Ws(t){return mg(t)||DR(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function DR(t){return xT(t.x)||xT(t.y)}function xT(t){return t&&t!=="0%"}function zh(t,e,n){const r=t-n,s=e*r;return n+s}function CT(t,e,n,r,s){return s!==void 0&&(t=zh(t,s,r)),zh(t,n,r)+e}function gg(t,e=0,n=1,r,s){t.min=CT(t.min,e,n,r,s),t.max=CT(t.max,e,n,r,s)}function LR(t,{x:e,y:n}){gg(t.x,e.translate,e.scale,e.originPoint),gg(t.y,n.translate,n.scale,n.originPoint)}const bT=.999999999999,kT=1.0000000000001;function J4(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&lo(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,LR(t,o)),r&&Ws(i.latestValues)&&lo(t,i.latestValues))}e.x<kT&&e.x>bT&&(e.x=1),e.y<kT&&e.y>bT&&(e.y=1)}function ao(t,e){t.min=t.min+e,t.max=t.max+e}function NT(t,e,n,r,s=.5){const i=Le(t.min,t.max,s);gg(t,e,n,i,r)}function lo(t,e){NT(t.x,e.x,e.scaleX,e.scale,e.originX),NT(t.y,e.y,e.scaleY,e.scale,e.originY)}function VR(t,e){return OR(Y4(t.getBoundingClientRect(),e))}function Z4(t,e,n){const r=VR(t,n),{scroll:s}=e;return s&&(ao(r.x,s.offset.x),ao(r.y,s.offset.y)),r}const MR=({current:t})=>t?t.ownerDocument.defaultView:null,ej=new WeakMap;class tj{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=We(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Dd(h,"page").point)},i=(h,d)=>{const{drag:f,dragPropagation:y,onDragStart:w}=this.getProps();if(f&&!y&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=CR(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),yn(P=>{let E=this.getAxisMotionValue(P).get()||0;if(ir.test(E)){const{projection:g}=this.visualElement;if(g&&g.layout){const _=g.layout.layoutBox[P];_&&(E=dn(_)*(parseFloat(E)/100))}}this.originPoint[P]=E}),w&&Se.postRender(()=>w(h,d)),dg(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},o=(h,d)=>{const{dragPropagation:f,dragDirectionLock:y,onDirectionLock:w,onDrag:T}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:P}=d;if(y&&this.currentDirection===null){this.currentDirection=nj(P),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",d.point,P),this.updateAxis("y",d.point,P),this.visualElement.render(),T&&T(h,d)},a=(h,d)=>this.stop(h,d),l=()=>yn(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new AR(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:MR(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Se.postRender(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!uc(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=W4(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&io(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=H4(s.layoutBox,n):this.constraints=!1,this.elastic=Q4(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&yn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=G4(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!io(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=Z4(r,s.root,this.visualElement.getTransformPagePoint());let o=q4(s.layout.layoutBox,i);if(n){const a=n(X4(o));this.hasMutatedConstraints=!!a,a&&(o=OR(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=yn(h=>{if(!uc(h,n,this.currentDirection))return;let d=l&&l[h]||{};o&&(d={min:0,max:0});const f=s?200:1e6,y=s?40:1e7,w={type:"inertia",velocity:r?e[h]:0,bounceStiffness:f,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(h,w)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return dg(this.visualElement,e),r.start(bv(e,r,0,n,this.visualElement,!1))}stopAnimation(){yn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){yn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){yn(n=>{const{drag:r}=this.getProps();if(!uc(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-Le(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!io(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};yn(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=K4({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),yn(o=>{if(!uc(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Le(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;ej.set(this.visualElement,this);const e=this.visualElement.current,n=br(e,"pointerdown",l=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();io(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Se.read(r);const o=Pr(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(yn(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=l[h].translate,d.set(d.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=pg,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function uc(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function nj(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class rj extends Ds{constructor(e){super(e),this.removeGroupControls=kt,this.removeListeners=kt,this.controls=new tj(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||kt}unmount(){this.removeGroupControls(),this.removeListeners()}}const OT=t=>(e,n)=>{t&&Se.postRender(()=>t(e,n))};class sj extends Ds{constructor(){super(...arguments),this.removePointerDownListener=kt}onPointerDown(e){this.session=new AR(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:MR(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:OT(e),onStart:OT(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&Se.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=br(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Lv=O.createContext(null);function ij(){const t=O.useContext(Lv);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,s=O.useId();O.useEffect(()=>r(s),[]);const i=O.useCallback(()=>n&&n(s),[s,n]);return!e&&n?[!1,i]:[!0]}const FR=O.createContext({}),UR=O.createContext({}),$c={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function DT(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Ra={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(X.test(t))t=parseFloat(t);else return t;const n=DT(t,e.target.x),r=DT(t,e.target.y);return`${n}% ${r}%`}},oj={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Ps.parse(t);if(s.length>5)return r;const i=Ps.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const c=Le(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}},Wh={};function aj(t){Object.assign(Wh,t)}const{schedule:Vv,cancel:cW}=jA(queueMicrotask,!1);class lj extends O.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;aj(uj),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),$c.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Se.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Vv.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function jR(t){const[e,n]=ij(),r=O.useContext(FR);return k.jsx(lj,{...t,layoutGroup:r,switchLayoutGroup:O.useContext(UR),isPresent:e,safeToRemove:n})}const uj={borderRadius:{...Ra,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ra,borderTopRightRadius:Ra,borderBottomLeftRadius:Ra,borderBottomRightRadius:Ra,boxShadow:oj},BR=["TopLeft","TopRight","BottomLeft","BottomRight"],cj=BR.length,LT=t=>typeof t=="string"?parseFloat(t):t,VT=t=>typeof t=="number"||X.test(t);function hj(t,e,n,r,s,i){s?(t.opacity=Le(0,n.opacity!==void 0?n.opacity:1,dj(r)),t.opacityExit=Le(e.opacity!==void 0?e.opacity:1,0,fj(r))):i&&(t.opacity=Le(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<cj;o++){const a=`border${BR[o]}Radius`;let l=MT(e,a),c=MT(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||VT(l)===VT(c)?(t[a]=Math.max(Le(LT(l),LT(c),r),0),(ir.test(c)||ir.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Le(e.rotate||0,n.rotate||0,r))}function MT(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const dj=$R(0,.5,KA),fj=$R(.5,.95,kt);function $R(t,e,n){return r=>r<t?0:r>e?1:n(Do(t,e,r))}function FT(t,e){t.min=e.min,t.max=e.max}function gn(t,e){FT(t.x,e.x),FT(t.y,e.y)}function UT(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function jT(t,e,n,r,s){return t-=e,t=zh(t,1/n,r),s!==void 0&&(t=zh(t,1/s,r)),t}function pj(t,e=0,n=1,r=.5,s,i=t,o=t){if(ir.test(e)&&(e=parseFloat(e),e=Le(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Le(i.min,i.max,r);t===i&&(a-=e),t.min=jT(t.min,e,n,a,s),t.max=jT(t.max,e,n,a,s)}function BT(t,e,[n,r,s],i,o){pj(t,e[n],e[r],e[s],e.scale,i,o)}const mj=["x","scaleX","originX"],gj=["y","scaleY","originY"];function $T(t,e,n,r){BT(t.x,e,mj,n?n.x:void 0,r?r.x:void 0),BT(t.y,e,gj,n?n.y:void 0,r?r.y:void 0)}function zT(t){return t.translate===0&&t.scale===1}function zR(t){return zT(t.x)&&zT(t.y)}function WT(t,e){return t.min===e.min&&t.max===e.max}function yj(t,e){return WT(t.x,e.x)&&WT(t.y,e.y)}function HT(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function WR(t,e){return HT(t.x,e.x)&&HT(t.y,e.y)}function qT(t){return dn(t.x)/dn(t.y)}function KT(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class vj{constructor(){this.members=[]}add(e){kv(this.members,e),e.scheduleRender()}remove(e){if(Nv(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function _j(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:h,rotateX:d,rotateY:f,skewX:y,skewY:w}=n;c&&(r=`perspective(${c}px) ${r}`),h&&(r+=`rotate(${h}deg) `),d&&(r+=`rotateX(${d}deg) `),f&&(r+=`rotateY(${f}deg) `),y&&(r+=`skewX(${y}deg) `),w&&(r+=`skewY(${w}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const wj=(t,e)=>t.depth-e.depth;class Ej{constructor(){this.children=[],this.isDirty=!1}add(e){kv(this.children,e),this.isDirty=!0}remove(e){Nv(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(wj),this.isDirty=!1,this.children.forEach(e)}}function zc(t){const e=bt(t)?t.get():t;return d4(e)?e.toValue():e}function Tj(t,e){const n=or.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(Ss(r),t(i-e))};return Se.read(r,!0),()=>Ss(r)}function Sj(t){return t instanceof SVGElement&&t.tagName!=="svg"}function Ij(t,e,n){const r=bt(t)?t:Ul(t);return r.start(bv("",r,e,n)),r.animation}const Hs={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Ma=typeof window<"u"&&window.MotionDebug!==void 0,Cp=["","X","Y","Z"],Pj={visibility:"hidden"},GT=1e3;let Aj=0;function bp(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function HR(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=TR(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Se,!(s||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&HR(r)}function qR({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=Aj++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ma&&(Hs.totalNodes=Hs.resolvedTargetDeltas=Hs.recalculatedProjection=0),this.nodes.forEach(Cj),this.nodes.forEach(Dj),this.nodes.forEach(Lj),this.nodes.forEach(bj),Ma&&window.MotionDebug.record(Hs)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ej)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Ov),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Sj(o),this.instance=o;const{layoutId:l,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=Tj(f,250),$c.hasAnimatedSinceResize&&($c.hasAnimatedSinceResize=!1,this.nodes.forEach(XT))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:y,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const T=this.options.transition||h.getDefaultTransition()||jj,{onLayoutAnimationStart:P,onLayoutAnimationComplete:E}=h.getProps(),g=!this.targetLayout||!WR(this.targetLayout,w)||y,_=!f&&y;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||_||f&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,_);const x={...gv(T,"layout"),onPlay:P,onComplete:E};(h.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x)}else f||XT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ss(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Vj),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&HR(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(QT);return}this.isUpdating||this.nodes.forEach(Nj),this.isUpdating=!1,this.nodes.forEach(Oj),this.nodes.forEach(Rj),this.nodes.forEach(xj),this.clearAllSnapshots();const a=or.now();ct.delta=Is(0,1e3/60,a-ct.timestamp),ct.timestamp=a,ct.isProcessing=!0,Ep.update.process(ct),Ep.preRender.process(ct),Ep.render.process(ct),ct.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Vv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(kj),this.sharedNodes.forEach(Mj)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Se.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Se.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=We(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!zR(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;o&&(a||Ws(this.latestValues)||h)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Bj(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return We();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some($j))){const{scroll:h}=this.root;h&&(ao(l.x,h.offset.x),ao(l.y,h.offset.y))}return l}removeElementScroll(o){var a;const l=We();if(gn(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:d,options:f}=h;h!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&gn(l,o),ao(l.x,d.offset.x),ao(l.y,d.offset.y))}return l}applyTransform(o,a=!1){const l=We();gn(l,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&lo(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Ws(h.latestValues)&&lo(l,h.latestValues)}return Ws(this.latestValues)&&lo(l,this.latestValues),l}removeTransform(o){const a=We();gn(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Ws(c.latestValues))continue;mg(c.latestValues)&&c.updateSnapshot();const h=We(),d=c.measurePageBox();gn(h,d),$T(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return Ws(this.latestValues)&&$T(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ct.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=ct.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=We(),this.relativeTargetOrigin=We(),ol(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),gn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=We(),this.targetWithTransforms=We()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),z4(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):gn(this.target,this.layout.layoutBox),LR(this.target,this.targetDelta)):gn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=We(),this.relativeTargetOrigin=We(),ol(this.relativeTargetOrigin,this.target,y.target),gn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ma&&Hs.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||mg(this.parent.latestValues)||DR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ct.timestamp&&(c=!1),c)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;gn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,y=this.treeScale.y;J4(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=We());const{target:w}=a;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(UT(this.prevProjectionDelta.x,this.projectionDelta.x),UT(this.prevProjectionDelta.y,this.projectionDelta.y)),il(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==y||!KT(this.projectionDelta.x,this.prevProjectionDelta.x)||!KT(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w)),Ma&&Hs.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=oo(),this.projectionDelta=oo(),this.projectionDeltaWithTransform=oo()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},h={...this.latestValues},d=oo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=We(),y=l?l.source:void 0,w=this.layout?this.layout.source:void 0,T=y!==w,P=this.getStack(),E=!P||P.members.length<=1,g=!!(T&&!E&&this.options.crossfade===!0&&!this.path.some(Uj));this.animationProgress=0;let _;this.mixTargetDelta=x=>{const D=x/1e3;YT(d.x,o.x,D),YT(d.y,o.y,D),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ol(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Fj(this.relativeTarget,this.relativeTargetOrigin,f,D),_&&yj(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=We()),gn(_,this.relativeTarget)),T&&(this.animationValues=h,hj(h,c,this.latestValues,D,g,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ss(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Se.update(()=>{$c.hasAnimatedSinceResize=!0,this.currentAnimation=Ij(0,GT,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(GT),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:h}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&KR(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||We();const d=dn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const f=dn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}gn(a,l),lo(a,h),il(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new vj),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&bp("z",o,c,this.animationValues);for(let h=0;h<Cp.length;h++)bp(`rotate${Cp[h]}`,o,c,this.animationValues),bp(`skew${Cp[h]}`,o,c,this.animationValues);o.render();for(const h in c)o.setStaticValue(h,c[h]),this.animationValues&&(this.animationValues[h]=c[h]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Pj;const c={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=zc(o==null?void 0:o.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const T={};return this.options.layoutId&&(T.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,T.pointerEvents=zc(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ws(this.latestValues)&&(T.transform=h?h({},""):"none",this.hasProjected=!1),T}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=_j(this.projectionDeltaWithTransform,this.treeScale,f),h&&(c.transform=h(f,c.transform));const{x:y,y:w}=this.projectionDelta;c.transformOrigin=`${y.origin*100}% ${w.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const T in Wh){if(f[T]===void 0)continue;const{correct:P,applyTo:E}=Wh[T],g=c.transform==="none"?f[T]:P(f[T],d);if(E){const _=E.length;for(let x=0;x<_;x++)c[E[x]]=g}else c[T]=g}return this.options.layoutId&&(c.pointerEvents=d===this?zc(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(QT),this.root.sharedNodes.clear()}}}function Rj(t){t.updateLayout()}function xj(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?yn(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],y=dn(f);f.min=r[d].min,f.max=f.min+y}):KR(i,n.layoutBox,r)&&yn(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],y=dn(r[d]);f.max=f.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+y)});const a=oo();il(a,r,n.layoutBox);const l=oo();o?il(l,t.applyTransform(s,!0),n.measuredBox):il(l,r,n.layoutBox);const c=!zR(a);let h=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:y}=d;if(f&&y){const w=We();ol(w,n.layoutBox,f.layoutBox);const T=We();ol(T,r,y.layoutBox),WR(w,T)||(h=!0),d.options.layoutRoot&&(t.relativeTarget=T,t.relativeTargetOrigin=w,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Cj(t){Ma&&Hs.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function bj(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function kj(t){t.clearSnapshot()}function QT(t){t.clearMeasurements()}function Nj(t){t.isLayoutDirty=!1}function Oj(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function XT(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Dj(t){t.resolveTargetDelta()}function Lj(t){t.calcProjection()}function Vj(t){t.resetSkewAndRotation()}function Mj(t){t.removeLeadSnapshot()}function YT(t,e,n){t.translate=Le(e.translate,0,n),t.scale=Le(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function JT(t,e,n,r){t.min=Le(e.min,n.min,r),t.max=Le(e.max,n.max,r)}function Fj(t,e,n,r){JT(t.x,e.x,n.x,r),JT(t.y,e.y,n.y,r)}function Uj(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const jj={duration:.45,ease:[.4,0,.1,1]},ZT=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),eS=ZT("applewebkit/")&&!ZT("chrome/")?Math.round:kt;function tS(t){t.min=eS(t.min),t.max=eS(t.max)}function Bj(t){tS(t.x),tS(t.y)}function KR(t,e,n){return t==="position"||t==="preserve-aspect"&&!$4(qT(e),qT(n),.2)}function $j(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const zj=qR({attachResizeListener:(t,e)=>Pr(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),kp={current:void 0},GR=qR({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!kp.current){const t=new zj({});t.mount(window),t.setOptions({layoutScroll:!0}),kp.current=t}return kp.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Wj={pan:{Feature:sj},drag:{Feature:rj,ProjectionNode:GR,MeasureLayout:jR}};function nS(t,e){const n=e?"pointerenter":"pointerleave",r=e?"onHoverStart":"onHoverEnd",s=(i,o)=>{if(i.pointerType==="touch"||bR())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e);const l=a[r];l&&Se.postRender(()=>l(i,o))};return br(t.current,n,s,{passive:!t.getProps()[r]})}class Hj extends Ds{mount(){this.unmount=Cr(nS(this.node,!0),nS(this.node,!1))}unmount(){}}class qj extends Ds{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Cr(Pr(this.node.current,"focus",()=>this.onFocus()),Pr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const QR=(t,e)=>e?t===e?!0:QR(t,e.parentElement):!1;function Np(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Dd(n))}class Kj extends Ds{constructor(){super(...arguments),this.removeStartListeners=kt,this.removeEndListeners=kt,this.removeAccessibleListeners=kt,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=br(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:h,globalTapTarget:d}=this.node.getProps(),f=!d&&!QR(this.node.current,a.target)?h:c;f&&Se.update(()=>f(a,l))},{passive:!(r.onTap||r.onPointerUp)}),o=br(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Cr(i,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||Np("up",(l,c)=>{const{onTap:h}=this.node.getProps();h&&Se.postRender(()=>h(l,c))})};this.removeEndListeners(),this.removeEndListeners=Pr(this.node.current,"keyup",o),Np("down",(a,l)=>{this.startPress(a,l)})},n=Pr(this.node.current,"keydown",e),r=()=>{this.isPressing&&Np("cancel",(i,o)=>this.cancelPress(i,o))},s=Pr(this.node.current,"blur",r);this.removeAccessibleListeners=Cr(n,s)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Se.postRender(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!bR()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Se.postRender(()=>r(e,n))}mount(){const e=this.node.getProps(),n=br(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Pr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Cr(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const yg=new WeakMap,Op=new WeakMap,Gj=t=>{const e=yg.get(t.target);e&&e(t)},Qj=t=>{t.forEach(Gj)};function Xj({root:t,...e}){const n=t||document;Op.has(n)||Op.set(n,{});const r=Op.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(Qj,{root:t,...e})),r[s]}function Yj(t,e,n){const r=Xj(e);return yg.set(t,n),r.observe(t),()=>{yg.delete(t),r.unobserve(t)}}const Jj={some:0,all:1};class Zj extends Ds{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:Jj[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),f=c?h:d;f&&f(l)};return Yj(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(eB(e,n))&&this.startObserver()}unmount(){}}function eB({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const tB={inView:{Feature:Zj},tap:{Feature:Kj},focus:{Feature:qj},hover:{Feature:Hj}},nB={layout:{ProjectionNode:GR,MeasureLayout:jR}},XR=O.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Ld=O.createContext({}),Mv=typeof window<"u",rB=Mv?O.useLayoutEffect:O.useEffect,YR=O.createContext({strict:!1});function sB(t,e,n,r,s){var i,o;const{visualElement:a}=O.useContext(Ld),l=O.useContext(YR),c=O.useContext(Lv),h=O.useContext(XR).reducedMotion,d=O.useRef();r=r||l.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:h}));const f=d.current,y=O.useContext(UR);f&&!f.projection&&s&&(f.type==="html"||f.type==="svg")&&iB(d.current,n,s,y);const w=O.useRef(!1);O.useInsertionEffect(()=>{f&&w.current&&f.update(n,c)});const T=n[ER],P=O.useRef(!!T&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,T))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,T)));return rB(()=>{f&&(w.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),Vv.render(f.render),P.current&&f.animationState&&f.animationState.animateChanges())}),O.useEffect(()=>{f&&(!P.current&&f.animationState&&f.animationState.animateChanges(),P.current&&(queueMicrotask(()=>{var E;(E=window.MotionHandoffMarkAsComplete)===null||E===void 0||E.call(window,T)}),P.current=!1))}),f}function iB(t,e,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:JR(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&io(a),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function JR(t){if(t)return t.options.allowProjection!==!1?t.projection:JR(t.parent)}function oB(t,e,n){return O.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):io(n)&&(n.current=r))},[e])}function Vd(t){return kd(t.animate)||mv.some(e=>Vl(t[e]))}function ZR(t){return!!(Vd(t)||t.variants)}function aB(t,e){if(Vd(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Vl(n)?n:void 0,animate:Vl(r)?r:void 0}}return t.inherit!==!1?e:{}}function lB(t){const{initial:e,animate:n}=aB(t,O.useContext(Ld));return O.useMemo(()=>({initial:e,animate:n}),[rS(e),rS(n)])}function rS(t){return Array.isArray(t)?t.join(" "):t}const sS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Lo={};for(const t in sS)Lo[t]={isEnabled:e=>sS[t].some(n=>!!e[n])};function uB(t){for(const e in t)Lo[e]={...Lo[e],...t[e]}}const cB=Symbol.for("motionComponentSymbol");function hB({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&uB(t);function i(a,l){let c;const h={...O.useContext(XR),...a,layoutId:dB(a)},{isStatic:d}=h,f=lB(a),y=r(a,d);if(!d&&Mv){fB();const w=pB(h);c=w.MeasureLayout,f.visualElement=sB(s,y,h,e,w.ProjectionNode)}return k.jsxs(Ld.Provider,{value:f,children:[c&&f.visualElement?k.jsx(c,{visualElement:f.visualElement,...h}):null,n(s,a,oB(y,f.visualElement,l),y,d,f.visualElement)]})}const o=O.forwardRef(i);return o[cB]=s,o}function dB({layoutId:t}){const e=O.useContext(FR).id;return e&&t!==void 0?e+"-"+t:t}function fB(t,e){O.useContext(YR).strict}function pB(t){const{drag:e,layout:n}=Lo;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const mB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Fv(t){return typeof t!="string"||t.includes("-")?!1:!!(mB.indexOf(t)>-1||/[A-Z]/u.test(t))}function ex(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const tx=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function nx(t,e,n,r){ex(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(tx.has(s)?s:Dv(s),e.attrs[s])}function rx(t,{layout:e,layoutId:n}){return Ci.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Wh[t]||t==="opacity")}function Uv(t,e,n){var r;const{style:s}=t,i={};for(const o in s)(bt(s[o])||e.style&&bt(e.style[o])||rx(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(i[o]=s[o]);return i}function sx(t,e,n){const r=Uv(t,e,n);for(const s in t)if(bt(t[s])||bt(e[s])){const i=lu.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}function gB(t){const e=O.useRef(null);return e.current===null&&(e.current=t()),e.current}function yB({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,s,i){const o={latestValues:vB(r,s,i,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const ix=t=>(e,n)=>{const r=O.useContext(Ld),s=O.useContext(Lv),i=()=>yB(t,e,r,s);return n?i():gB(i)};function vB(t,e,n,r){const s={},i=r(t,{});for(const f in i)s[f]=zc(i[f]);let{initial:o,animate:a}=t;const l=Vd(t),c=ZR(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const d=h?a:o;if(d&&typeof d!="boolean"&&!kd(d)){const f=Array.isArray(d)?d:[d];for(let y=0;y<f.length;y++){const w=fv(t,f[y]);if(w){const{transitionEnd:T,transition:P,...E}=w;for(const g in E){let _=E[g];if(Array.isArray(_)){const x=h?_.length-1:0;_=_[x]}_!==null&&(s[g]=_)}for(const g in T)s[g]=T[g]}}}return s}const jv=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),ox=()=>({...jv(),attrs:{}}),ax=(t,e)=>e&&typeof t=="number"?e.transform(t):t,_B={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},wB=lu.length;function EB(t,e,n){let r="",s=!0;for(let i=0;i<wB;i++){const o=lu[i],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=ax(a,Sv[o]);if(!l){s=!1;const h=_B[o]||o;r+=`${h}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function Bv(t,e,n){const{style:r,vars:s,transformOrigin:i}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(Ci.has(l)){o=!0;continue}else if(JA(l)){s[l]=c;continue}else{const h=ax(c,Sv[l]);l.startsWith("origin")?(a=!0,i[l]=h):r[l]=h}}if(e.transform||(o||n?r.transform=EB(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:h=0}=i;r.transformOrigin=`${l} ${c} ${h}`}}function iS(t,e,n){return typeof t=="string"?t:X.transform(e+n*t)}function TB(t,e,n){const r=iS(e,t.x,t.width),s=iS(n,t.y,t.height);return`${r} ${s}`}const SB={offset:"stroke-dashoffset",array:"stroke-dasharray"},IB={offset:"strokeDashoffset",array:"strokeDasharray"};function PB(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?SB:IB;t[i.offset]=X.transform(-r);const o=X.transform(e),a=X.transform(n);t[i.array]=`${o} ${a}`}function $v(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},h,d){if(Bv(t,c,d),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:y,dimensions:w}=t;f.transform&&(w&&(y.transform=f.transform),delete f.transform),w&&(s!==void 0||i!==void 0||y.transform)&&(y.transformOrigin=TB(w,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),o!==void 0&&PB(f,o,a,l,!1)}const zv=t=>typeof t=="string"&&t.toLowerCase()==="svg",AB={useVisualState:ix({scrapeMotionValuesFromProps:sx,createRenderState:ox,onMount:(t,e,{renderState:n,latestValues:r})=>{Se.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Se.render(()=>{$v(n,r,zv(e.tagName),t.transformTemplate),nx(e,n)})}})},RB={useVisualState:ix({scrapeMotionValuesFromProps:Uv,createRenderState:jv})};function lx(t,e,n){for(const r in e)!bt(e[r])&&!rx(r,n)&&(t[r]=e[r])}function xB({transformTemplate:t},e){return O.useMemo(()=>{const n=jv();return Bv(n,e,t),Object.assign({},n.vars,n.style)},[e])}function CB(t,e){const n=t.style||{},r={};return lx(r,n,t),Object.assign(r,xB(t,e)),r}function bB(t,e){const n={},r=CB(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const kB=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Hh(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||kB.has(t)}let ux=t=>!Hh(t);function NB(t){t&&(ux=e=>e.startsWith("on")?!Hh(e):t(e))}try{NB(require("@emotion/is-prop-valid").default)}catch{}function OB(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(ux(s)||n===!0&&Hh(s)||!e&&!Hh(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function DB(t,e,n,r){const s=O.useMemo(()=>{const i=ox();return $v(i,e,zv(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};lx(i,t.style,t),s.style={...i,...s.style}}return s}function LB(t=!1){return(n,r,s,{latestValues:i},o)=>{const l=(Fv(n)?DB:bB)(r,i,o,n),c=OB(r,typeof n=="string",t),h=n!==O.Fragment?{...c,...l,ref:s}:{},{children:d}=r,f=O.useMemo(()=>bt(d)?d.get():d,[d]);return O.createElement(n,{...h,children:f})}}function VB(t,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const o={...Fv(r)?AB:RB,preloadedFeatures:t,useRender:LB(s),createVisualElement:e,Component:r};return hB(o)}}const vg={current:null},cx={current:!1};function MB(){if(cx.current=!0,!!Mv)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>vg.current=t.matches;t.addListener(e),e()}else vg.current=!1}function FB(t,e,n){for(const r in e){const s=e[r],i=n[r];if(bt(s))t.addValue(r,s);else if(bt(i))t.addValue(r,Ul(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(r);t.addValue(r,Ul(o!==void 0?o:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const oS=new WeakMap,UB=[...tR,At,Ps],jB=t=>UB.find(eR(t)),aS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class BB{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=wv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=or.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Se.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=Vd(n),this.isVariantNode=ZR(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in d){const y=d[f];l[f]!==void 0&&bt(y)&&y.set(l[f],!1)}}mount(e){this.current=e,oS.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),cx.current||MB(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:vg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){oS.delete(this.current),this.projection&&this.projection.unmount(),Ss(this.notifyUpdate),Ss(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ci.has(e),s=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Se.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),i(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Lo){const n=Lo[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):We()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<aS.length;r++){const s=aS[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=e[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=FB(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Ul(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(XA(s)||QA(s))?s=parseFloat(s):!jB(s)&&Ps.test(n)&&(s=uR(e,n)),this.setBaseTarget(e,bt(s)?s.get():s)),bt(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const o=fv(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(s=o[e])}if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!bt(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Ov),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class hx extends BB{constructor(){super(...arguments),this.KeyframeResolver=cR}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}}function $B(t){return window.getComputedStyle(t)}class zB extends hx{constructor(){super(...arguments),this.type="html",this.renderInstance=ex}readValueFromInstance(e,n){if(Ci.has(n)){const r=Iv(n);return r&&r.default||0}else{const r=$B(e),s=(JA(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return VR(e,n)}build(e,n,r){Bv(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Uv(e,n,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;bt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class WB extends hx{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=We}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ci.has(n)){const r=Iv(n);return r&&r.default||0}return n=tx.has(n)?n:Dv(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return sx(e,n,r)}build(e,n,r){$v(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,s){nx(e,n,r,s)}mount(e){this.isSVGTag=zv(e.tagName),super.mount(e)}}const HB=(t,e)=>Fv(t)?new WB(e):new zB(e,{allowProjection:t!==O.Fragment}),qB=VB({...O4,...tB,...Wj,...nB},HB),ei=IF(qB),KB="/assets/logoi-DeHRHPPS.png",lS=()=>{const[t,e]=O.useState(""),[n,r]=O.useState(""),s=Ri(),i=Yo();O.useEffect(()=>{const a=cv(i,l=>{l?(e(l.photoURL||""),r(l.email||"")):(e(""),r(""))});return()=>a()},[i]);const o=()=>{s("/login")};return k.jsx("header",{className:"fixed top-0 left-0 w-full z-50 bg-white py-4",children:k.jsxs("nav",{className:"container mx-auto flex justify-between items-center px-12",children:[k.jsxs(ei.div,{className:"flex items-center gap-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[k.jsx("img",{src:KB,alt:"Logo",className:"w-14"}),k.jsx("h1",{className:"text-black font-bold text-2xl tracking-widest",children:"Centre d’aide et de pratique en Informatique"})]}),k.jsxs("ul",{className:"flex items-center space-x-8",children:[k.jsx(ic,{to:"/profile",className:({isActive:a})=>a?"text-black font-bold text-xl tracking-wide rounded hover:text-blue-400":"text-black font-medium text-xl tracking-wide rounded hover:text-blue-400",children:"Profil"}),["wmbennabi05@gmail.com","dany123@gmail.com"].includes(n)&&k.jsx(ic,{to:"/task-form",className:({isActive:a})=>"text-black font-medium text-xl tracking-wide rounded hover:text-blue-400",children:"Tâches"}),k.jsx(ic,{to:"/dashboard",className:({isActive:a})=>a?"text-black font-bold text-xl tracking-wide rounded hover:text-blue-400":"text-black font-medium text-xl tracking-wide rounded hover:text-blue-400",children:"Mon Espace"}),k.jsx(ic,{to:"/history",className:({isActive:a})=>a?"text-black font-bold text-xl tracking-wide rounded hover:text-blue-400":"text-black font-medium text-xl tracking-wide rounded hover:text-blue-400",children:"Historique"}),t&&k.jsx("img",{src:t,alt:"Profile",className:"w-10 h-10 rounded-full object-cover"}),k.jsx("button",{onClick:o,className:"ml-10 px-6 py-4 text-white bg-blue-500 rounded-lg shadow hover:bg-white hover:text-blue-500 transition-all",children:"Déconnexion"})]})]})})},dx="/assets/imgbg-BW599yrt.webp",GB=()=>{const t=Yo(),e=Ri(),[n,r]=O.useState(!1),[s,i]=O.useState(""),[o,a]=O.useState(""),[l,c]=O.useState(""),h=async()=>{r(!0);const y=new Yn;try{const T=(await Fh(t,y)).user;console.log("Google User:",T),alert(`Welcome, ${T.displayName}!`),e("/task-form")}catch(w){console.error("Google login error:",w.message),c(w.message)}finally{r(!1)}},d=async()=>{r(!0);const y=new Xn;try{const T=(await Fh(t,y)).user;console.log("Facebook User:",T),T?(alert(`Welcome, ${T.displayName}!`),e("/task-form")):alert("Facebook login failed. Please try again.")}catch(w){console.error("Facebook login error:",w.message),c(w.message)}finally{r(!1)}},f=async()=>{r(!0),c("");try{const w=(await o2(t,s,o)).user;console.log("Email User:",w),alert(`Welcome back, ${w.email}!`),e("/task-form")}catch(y){console.error("Email login error:",y.message),c(y.message)}finally{r(!1)}};return k.jsxs("div",{className:"w-full h-screen flex",children:[k.jsx("div",{className:"w-1/2 h-full flex flex-col items-center justify-center",style:{backgroundImage:`url(${dx})`,backgroundSize:"cover",backgroundPosition:"center"}}),k.jsxs("div",{className:"w-1/2 h-full bg-black flex flex-col p-20 justify-center",children:[k.jsxs("div",{className:"w-full flex flex-col max-w-[450px] mx-auto",children:[k.jsxs("div",{className:"w-full flex flex-col mb-10 text-white",children:[k.jsx("h3",{className:"text-4xl font-bold mb-2",children:"Login"}),k.jsx("p",{className:"text-lg mb-4",children:"Welcome Back! Please enter your details."})]}),k.jsxs("div",{className:"w-full flex flex-col mb-6",children:[k.jsx("input",{type:"email",placeholder:"Email",className:"w-full text-white py-2 mb-4 bg-transparent border-b border-gray-500 focus:outline-none focus:border-white",value:s,onChange:y=>i(y.target.value)}),k.jsx("input",{type:"password",placeholder:"Password",className:"w-full text-white py-2 mb-4 bg-transparent border-b border-gray-500 focus:outline-none focus:border-white",value:o,onChange:y=>a(y.target.value)})]}),k.jsx("div",{className:"w-full flex flex-col mb-4",children:k.jsx("button",{className:"w-full bg-transparent border border-white text-white my-2 font-semibold rounded-md p-4 text-center flex items-center justify-center cursor-pointer",onClick:f,disabled:n,children:"Log In"})}),l&&k.jsx("div",{className:"text-red-500 mb-4",children:l}),k.jsxs("div",{className:"w-full flex items-center justify-center relative py-4",children:[k.jsx("div",{className:"w-full h-[1px] bg-gray-500"}),k.jsx("p",{className:"text-lg absolute text-gray-500 bg-black px-2",children:"OR"})]}),k.jsx("button",{className:"w-full bg-white text-black font-semibold rounded-md p-4 text-center flex items-center justify-center cursor-pointer mt-7",onClick:h,disabled:n,children:"Log In With Google"}),k.jsx("button",{className:"w-full bg-blue-600 text-white font-semibold rounded-md p-4 text-center flex items-center justify-center cursor-pointer mt-4",onClick:d,disabled:n,children:"Log In With Facebook"})]}),k.jsx("div",{className:"w-full flex items-center justify-center mt-10",children:k.jsxs("p",{className:"text-sm font-normal text-gray-400",children:["Don't have an account?"," ",k.jsx("span",{className:"font-semibold text-white cursor-pointer underline",children:k.jsx("a",{href:"/signup",children:"Sign Up"})})]})})]})]})};var fx={exports:{}},QB="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",XB=QB,YB=XB;function px(){}function mx(){}mx.resetWarningCache=px;var JB=function(){function t(r,s,i,o,a,l){if(l!==YB){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:mx,resetWarningCache:px};return n.PropTypes=n,n};fx.exports=JB();var ZB=fx.exports;const Wt=ty(ZB);var e$=["sitekey","onChange","theme","type","tabindex","onExpired","onErrored","size","stoken","grecaptcha","badge","hl","isolated"];function _g(){return _g=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_g.apply(this,arguments)}function t$(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function cc(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function n$(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,wg(t,e)}function wg(t,e){return wg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},wg(t,e)}var Md=function(t){n$(e,t);function e(){var r;return r=t.call(this)||this,r.handleExpired=r.handleExpired.bind(cc(r)),r.handleErrored=r.handleErrored.bind(cc(r)),r.handleChange=r.handleChange.bind(cc(r)),r.handleRecaptchaRef=r.handleRecaptchaRef.bind(cc(r)),r}var n=e.prototype;return n.getCaptchaFunction=function(s){return this.props.grecaptcha?this.props.grecaptcha.enterprise?this.props.grecaptcha.enterprise[s]:this.props.grecaptcha[s]:null},n.getValue=function(){var s=this.getCaptchaFunction("getResponse");return s&&this._widgetId!==void 0?s(this._widgetId):null},n.getWidgetId=function(){return this.props.grecaptcha&&this._widgetId!==void 0?this._widgetId:null},n.execute=function(){var s=this.getCaptchaFunction("execute");if(s&&this._widgetId!==void 0)return s(this._widgetId);this._executeRequested=!0},n.executeAsync=function(){var s=this;return new Promise(function(i,o){s.executionResolve=i,s.executionReject=o,s.execute()})},n.reset=function(){var s=this.getCaptchaFunction("reset");s&&this._widgetId!==void 0&&s(this._widgetId)},n.forceReset=function(){var s=this.getCaptchaFunction("reset");s&&s()},n.handleExpired=function(){this.props.onExpired?this.props.onExpired():this.handleChange(null)},n.handleErrored=function(){this.props.onErrored&&this.props.onErrored(),this.executionReject&&(this.executionReject(),delete this.executionResolve,delete this.executionReject)},n.handleChange=function(s){this.props.onChange&&this.props.onChange(s),this.executionResolve&&(this.executionResolve(s),delete this.executionReject,delete this.executionResolve)},n.explicitRender=function(){var s=this.getCaptchaFunction("render");if(s&&this._widgetId===void 0){var i=document.createElement("div");this._widgetId=s(i,{sitekey:this.props.sitekey,callback:this.handleChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,"error-callback":this.handleErrored,size:this.props.size,stoken:this.props.stoken,hl:this.props.hl,badge:this.props.badge,isolated:this.props.isolated}),this.captcha.appendChild(i)}this._executeRequested&&this.props.grecaptcha&&this._widgetId!==void 0&&(this._executeRequested=!1,this.execute())},n.componentDidMount=function(){this.explicitRender()},n.componentDidUpdate=function(){this.explicitRender()},n.handleRecaptchaRef=function(s){this.captcha=s},n.render=function(){var s=this.props;s.sitekey,s.onChange,s.theme,s.type,s.tabindex,s.onExpired,s.onErrored,s.size,s.stoken,s.grecaptcha,s.badge,s.hl,s.isolated;var i=t$(s,e$);return O.createElement("div",_g({},i,{ref:this.handleRecaptchaRef}))},e}(O.Component);Md.displayName="ReCAPTCHA";Md.propTypes={sitekey:Wt.string.isRequired,onChange:Wt.func,grecaptcha:Wt.object,theme:Wt.oneOf(["dark","light"]),type:Wt.oneOf(["image","audio"]),tabindex:Wt.number,onExpired:Wt.func,onErrored:Wt.func,size:Wt.oneOf(["compact","normal","invisible"]),stoken:Wt.string,hl:Wt.string,badge:Wt.oneOf(["bottomright","bottomleft","inline"]),isolated:Wt.bool};Md.defaultProps={onChange:function(){},theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};var gx={exports:{}},we={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ot=typeof Symbol=="function"&&Symbol.for,Wv=ot?Symbol.for("react.element"):60103,Hv=ot?Symbol.for("react.portal"):60106,Fd=ot?Symbol.for("react.fragment"):60107,Ud=ot?Symbol.for("react.strict_mode"):60108,jd=ot?Symbol.for("react.profiler"):60114,Bd=ot?Symbol.for("react.provider"):60109,$d=ot?Symbol.for("react.context"):60110,qv=ot?Symbol.for("react.async_mode"):60111,zd=ot?Symbol.for("react.concurrent_mode"):60111,Wd=ot?Symbol.for("react.forward_ref"):60112,Hd=ot?Symbol.for("react.suspense"):60113,r$=ot?Symbol.for("react.suspense_list"):60120,qd=ot?Symbol.for("react.memo"):60115,Kd=ot?Symbol.for("react.lazy"):60116,s$=ot?Symbol.for("react.block"):60121,i$=ot?Symbol.for("react.fundamental"):60117,o$=ot?Symbol.for("react.responder"):60118,a$=ot?Symbol.for("react.scope"):60119;function mn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Wv:switch(t=t.type,t){case qv:case zd:case Fd:case jd:case Ud:case Hd:return t;default:switch(t=t&&t.$$typeof,t){case $d:case Wd:case Kd:case qd:case Bd:return t;default:return e}}case Hv:return e}}}function yx(t){return mn(t)===zd}we.AsyncMode=qv;we.ConcurrentMode=zd;we.ContextConsumer=$d;we.ContextProvider=Bd;we.Element=Wv;we.ForwardRef=Wd;we.Fragment=Fd;we.Lazy=Kd;we.Memo=qd;we.Portal=Hv;we.Profiler=jd;we.StrictMode=Ud;we.Suspense=Hd;we.isAsyncMode=function(t){return yx(t)||mn(t)===qv};we.isConcurrentMode=yx;we.isContextConsumer=function(t){return mn(t)===$d};we.isContextProvider=function(t){return mn(t)===Bd};we.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Wv};we.isForwardRef=function(t){return mn(t)===Wd};we.isFragment=function(t){return mn(t)===Fd};we.isLazy=function(t){return mn(t)===Kd};we.isMemo=function(t){return mn(t)===qd};we.isPortal=function(t){return mn(t)===Hv};we.isProfiler=function(t){return mn(t)===jd};we.isStrictMode=function(t){return mn(t)===Ud};we.isSuspense=function(t){return mn(t)===Hd};we.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Fd||t===zd||t===jd||t===Ud||t===Hd||t===r$||typeof t=="object"&&t!==null&&(t.$$typeof===Kd||t.$$typeof===qd||t.$$typeof===Bd||t.$$typeof===$d||t.$$typeof===Wd||t.$$typeof===i$||t.$$typeof===o$||t.$$typeof===a$||t.$$typeof===s$)};we.typeOf=mn;gx.exports=we;var l$=gx.exports,Kv=l$,u$={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},c$={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},h$={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},vx={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Gv={};Gv[Kv.ForwardRef]=h$;Gv[Kv.Memo]=vx;function uS(t){return Kv.isMemo(t)?vx:Gv[t.$$typeof]||u$}var d$=Object.defineProperty,f$=Object.getOwnPropertyNames,cS=Object.getOwnPropertySymbols,p$=Object.getOwnPropertyDescriptor,m$=Object.getPrototypeOf,hS=Object.prototype;function _x(t,e,n){if(typeof e!="string"){if(hS){var r=m$(e);r&&r!==hS&&_x(t,r,n)}var s=f$(e);cS&&(s=s.concat(cS(e)));for(var i=uS(t),o=uS(e),a=0;a<s.length;++a){var l=s[a];if(!c$[l]&&!(n&&n[l])&&!(o&&o[l])&&!(i&&i[l])){var c=p$(e,l);try{d$(t,l,c)}catch{}}}}return t}var g$=_x;const y$=ty(g$);function Eg(){return Eg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Eg.apply(this,arguments)}function v$(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function _$(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var xn={},w$=0;function E$(t,e){return e=e||{},function(r){var s=r.displayName||r.name||"Component",i=function(a){_$(l,a);function l(h,d){var f;return f=a.call(this,h,d)||this,f.state={},f.__scriptURL="",f}var c=l.prototype;return c.asyncScriptLoaderGetScriptLoaderID=function(){return this.__scriptLoaderID||(this.__scriptLoaderID="async-script-loader-"+w$++),this.__scriptLoaderID},c.setupScriptURL=function(){return this.__scriptURL=typeof t=="function"?t():t,this.__scriptURL},c.asyncScriptLoaderHandleLoad=function(d){var f=this;this.setState(d,function(){return f.props.asyncScriptOnLoad&&f.props.asyncScriptOnLoad(f.state)})},c.asyncScriptLoaderTriggerOnScriptLoaded=function(){var d=xn[this.__scriptURL];if(!d||!d.loaded)throw new Error("Script is not loaded.");for(var f in d.observers)d.observers[f](d);delete window[e.callbackName]},c.componentDidMount=function(){var d=this,f=this.setupScriptURL(),y=this.asyncScriptLoaderGetScriptLoaderID(),w=e,T=w.globalName,P=w.callbackName,E=w.scriptId;if(T&&typeof window[T]<"u"&&(xn[f]={loaded:!0,observers:{}}),xn[f]){var g=xn[f];if(g&&(g.loaded||g.errored)){this.asyncScriptLoaderHandleLoad(g);return}g.observers[y]=function(S){return d.asyncScriptLoaderHandleLoad(S)};return}var _={};_[y]=function(S){return d.asyncScriptLoaderHandleLoad(S)},xn[f]={loaded:!1,observers:_};var x=document.createElement("script");x.src=f,x.async=!0;for(var D in e.attributes)x.setAttribute(D,e.attributes[D]);E&&(x.id=E);var V=function(v){if(xn[f]){var A=xn[f],C=A.observers;for(var R in C)v(C[R])&&delete C[R]}};P&&typeof window<"u"&&(window[P]=function(){return d.asyncScriptLoaderTriggerOnScriptLoaded()}),x.onload=function(){var S=xn[f];S&&(S.loaded=!0,V(function(v){return P?!1:(v(S),!0)}))},x.onerror=function(){var S=xn[f];S&&(S.errored=!0,V(function(v){return v(S),!0}))},document.body.appendChild(x)},c.componentWillUnmount=function(){var d=this.__scriptURL;if(e.removeOnUnmount===!0)for(var f=document.getElementsByTagName("script"),y=0;y<f.length;y+=1)f[y].src.indexOf(d)>-1&&f[y].parentNode&&f[y].parentNode.removeChild(f[y]);var w=xn[d];w&&(delete w.observers[this.asyncScriptLoaderGetScriptLoaderID()],e.removeOnUnmount===!0&&delete xn[d])},c.render=function(){var d=e.globalName,f=this.props;f.asyncScriptOnLoad;var y=f.forwardedRef,w=v$(f,["asyncScriptOnLoad","forwardedRef"]);return d&&typeof window<"u"&&(w[d]=typeof window[d]<"u"?window[d]:void 0),w.ref=y,O.createElement(r,w)},l}(O.Component),o=O.forwardRef(function(a,l){return O.createElement(i,Eg({},a,{forwardedRef:l}))});return o.displayName="AsyncScriptLoader("+s+")",o.propTypes={asyncScriptOnLoad:Wt.func},y$(o,r)}}var Tg="onloadcallback",T$="grecaptcha";function Sg(){return typeof window<"u"&&window.recaptchaOptions||{}}function S$(){var t=Sg(),e=t.useRecaptchaNet?"recaptcha.net":"www.google.com";return t.enterprise?"https://"+e+"/recaptcha/enterprise.js?onload="+Tg+"&render=explicit":"https://"+e+"/recaptcha/api.js?onload="+Tg+"&render=explicit"}const I$=E$(S$,{callbackName:Tg,globalName:T$,attributes:Sg().nonce?{nonce:Sg().nonce}:{}})(Md),P$=()=>{const t=Yo(),e=Ri(),[n,r]=O.useState(!1),[s,i]=O.useState(""),[o,a]=O.useState(""),[l,c]=O.useState(""),[h,d]=O.useState(""),[f,y]=O.useState(!1),w=g=>{g?(y(!0),d("")):(y(!1),d("Please complete the ReCAPTCHA"))},T=async()=>{if(!f){d("Please complete the ReCAPTCHA");return}r(!0);try{const _=(await Fh(t,new Yn)).user;console.log("Google User:",_),alert(`Welcome, ${_.displayName}!`),e("/")}catch(g){console.error("Google Sign-Up Error:",g.message),d(g.message)}finally{r(!1)}},P=async()=>{if(!f){d("Please complete the ReCAPTCHA");return}r(!0);try{const _=(await Fh(t,new Xn)).user;console.log("Facebook User:",_),alert(`Welcome, ${_.displayName}!`),e("/")}catch(g){console.error("Facebook Sign-Up Error:",g.message),d(g.message)}finally{r(!1)}},E=async()=>{if(!f){d("Please complete the ReCAPTCHA");return}if(o!==l){d("Passwords do not match");return}r(!0);try{const _=(await i2(t,s,o)).user;await a2(_),alert("A verification email has been sent to your email address. Please check your inbox."),console.log("Email User:",_),e("/login")}catch(g){console.error("Email Sign-Up Error:",g.message),d(g.message)}finally{r(!1)}};return k.jsxs("div",{className:"w-full h-screen flex",children:[k.jsx("div",{className:"w-1/2 h-full flex flex-col items-center justify-center",style:{backgroundImage:`url(${dx})`,backgroundSize:"cover",backgroundPosition:"center"}}),k.jsxs("div",{className:"w-1/2 h-full bg-black flex flex-col p-20 justify-center",children:[k.jsxs("div",{className:"w-full flex flex-col max-w-[450px] mx-auto",children:[k.jsxs("div",{className:"w-full flex flex-col mb-10 text-white",children:[k.jsx("h3",{className:"text-4xl font-bold mb-2",children:"Sign Up"}),k.jsx("p",{className:"text-lg mb-4",children:"Welcome! Please enter your information below to begin."})]}),k.jsxs("div",{className:"w-full flex flex-col mb-6",children:[k.jsx("input",{type:"email",placeholder:"Email",className:"w-full text-white py-2 mb-4 bg-transparent border-b border-gray-500 focus:outline-none focus:border-white",value:s,onChange:g=>i(g.target.value)}),k.jsx("input",{type:"password",placeholder:"Password",className:"w-full text-white py-2 mb-4 bg-transparent border-b border-gray-500 focus:outline-none focus:border-white",value:o,onChange:g=>a(g.target.value)}),k.jsx("input",{type:"password",placeholder:"Re-Enter Password",className:"w-full text-white py-2 mb-4 bg-transparent border-b border-gray-500 focus:outline-none focus:border-white",value:l,onChange:g=>c(g.target.value)})]}),h&&k.jsx("div",{className:"text-red-500 mb-4",children:h}),k.jsx("div",{className:"w-full flex flex-col mb-4",children:k.jsx("button",{onClick:E,disabled:n||!f,className:`w-full ${f?"bg-transparent border border-white text-white":"bg-gray-500 text-gray-300 cursor-not-allowed"} my-2 font-semibold rounded-md p-4 text-center flex items-center justify-center`,children:"Sign Up"})}),k.jsxs("div",{className:"w-full flex items-center justify-center relative py-4",children:[k.jsx("div",{className:"w-full h-[1px] bg-gray-500"}),k.jsx("p",{className:"text-lg absolute text-gray-500 bg-black px-2",children:"OR"})]}),k.jsx("button",{onClick:T,disabled:n||!f,className:`w-full ${f?"bg-white text-black":"bg-gray-500 text-gray-300 cursor-not-allowed"} font-semibold rounded-md p-4 text-center flex items-center justify-center mt-7`,children:"Sign Up With Google"}),k.jsx("button",{onClick:P,disabled:n||!f,className:`w-full ${f?"bg-blue-600 text-white":"bg-gray-500 text-gray-300 cursor-not-allowed"} font-semibold rounded-md p-4 text-center flex items-center justify-center mt-4`,children:"Sign Up With Facebook"})]}),k.jsx("div",{className:"w-full flex flex-col items-center mt-6",children:k.jsx(I$,{sitekey:"6LcaUncqAAAAAPPda7l8UKdkZgIHtTJ3yAicMQeB",onChange:w})}),k.jsx("div",{className:"w-full flex items-center justify-center mt-10",children:k.jsxs("p",{className:"text-sm font-normal text-gray-400",children:["Already have an account?"," ",k.jsx("span",{className:"font-semibold text-white cursor-pointer underline",children:k.jsx("a",{href:"/login",children:"Log In"})})]})})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx="firebasestorage.googleapis.com",Ex="storageBucket",A$=2*60*1e3,R$=10*60*1e3,x$=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je extends hr{constructor(e,n,r=0){super(Dp(e),`Firebase Storage: ${n} (${Dp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,je.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Dp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var be;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(be||(be={}));function Dp(t){return"storage/"+t}function Qv(){const t="An unknown error occurred, please check the error payload for server response.";return new je(be.UNKNOWN,t)}function C$(t){return new je(be.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function b$(t){return new je(be.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function k$(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new je(be.UNAUTHENTICATED,t)}function N$(){return new je(be.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function O$(t){return new je(be.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Tx(){return new je(be.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Sx(){return new je(be.CANCELED,"User canceled the upload/download.")}function D$(t){return new je(be.INVALID_URL,"Invalid URL '"+t+"'.")}function L$(t){return new je(be.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function V$(){return new je(be.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Ex+"' property when initializing the app?")}function Ix(){return new je(be.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function M$(){return new je(be.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function F$(){return new je(be.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function U$(t){return new je(be.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ig(t){return new je(be.INVALID_ARGUMENT,t)}function Px(){return new je(be.APP_DELETED,"The Firebase app was deleted.")}function j$(t){return new je(be.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function al(t,e){return new je(be.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function xa(t){throw new je(be.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=on.makeFromUrl(e,n)}catch{return new on(e,"")}if(r.path==="")return r;throw L$(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(x){x.path.charAt(x.path.length-1)==="/"&&(x.path_=x.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(x){x.path_=decodeURIComponent(x.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",y=new RegExp(`^https?://${d}/${h}/b/${s}/o${f}`,"i"),w={bucket:1,path:3},T=n===wx?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",E=new RegExp(`^https?://${T}/${s}/${P}`,"i"),_=[{regex:a,indices:l,postModify:i},{regex:y,indices:w,postModify:c},{regex:E,indices:{bucket:1,path:2},postModify:c}];for(let x=0;x<_.length;x++){const D=_[x],V=D.regex.exec(e);if(V){const S=V[D.indices.bucket];let v=V[D.indices.path];v||(v=""),r=new on(S,v),D.postModify(r);break}}if(r==null)throw D$(e);return r}}class B${constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $$(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function h(...P){c||(c=!0,e.apply(null,P))}function d(P){s=setTimeout(()=>{s=null,t(y,l())},P)}function f(){i&&clearTimeout(i)}function y(P,...E){if(c){f();return}if(P){f(),h.call(null,P,...E);return}if(l()||o){f(),h.call(null,P,...E);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,d(_)}let w=!1;function T(P){w||(w=!0,f(),!c&&(s!==null?(P||(a=2),clearTimeout(s),d(0)):P||(a=1)))}return d(0),i=setTimeout(()=>{o=!0,T(!0)},n),T}function z$(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W$(t){return t!==void 0}function H$(t){return typeof t=="function"}function q$(t){return typeof t=="object"&&!Array.isArray(t)}function Gd(t){return typeof t=="string"||t instanceof String}function dS(t){return Xv()&&t instanceof Blob}function Xv(){return typeof Blob<"u"}function fS(t,e,n,r){if(r<e)throw Ig(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Ig(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Ax(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var oi;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(oi||(oi={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K${constructor(e,n,r,s,i,o,a,l,c,h,d,f=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,w)=>{this.resolve_=y,this.reject_=w,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new hc(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===oi.NO_ERROR,l=i.getStatus();if(!a||Rx(l,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===oi.ABORT;r(!1,new hc(!1,null,h));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new hc(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());W$(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=Qv();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?Px():Sx();o(l)}else{const l=Tx();o(l)}};this.canceled_?n(!1,new hc(!1,null,!0)):this.backoffId_=$$(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&z$(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class hc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function G$(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Q$(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function X$(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Y$(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function J$(t,e,n,r,s,i,o=!0){const a=Ax(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return X$(c,e),G$(c,n),Q$(c,i),Y$(c,r),new K$(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z$(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function e3(...t){const e=Z$();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Xv())return new Blob(t);throw new je(be.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function t3(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n3(t){if(typeof atob>"u")throw U$("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Lp{constructor(e,n){this.data=e,this.contentType=n||null}}function r3(t,e){switch(t){case Jn.RAW:return new Lp(xx(e));case Jn.BASE64:case Jn.BASE64URL:return new Lp(Cx(t,e));case Jn.DATA_URL:return new Lp(i3(e),o3(e))}throw Qv()}function xx(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function s3(t){let e;try{e=decodeURIComponent(t)}catch{throw al(Jn.DATA_URL,"Malformed data URL.")}return xx(e)}function Cx(t,e){switch(t){case Jn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw al(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Jn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw al(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=n3(e)}catch(s){throw s.message.includes("polyfill")?s:al(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class bx{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw al(Jn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=a3(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function i3(t){const e=new bx(t);return e.base64?Cx(Jn.BASE64,e.rest):s3(e.rest)}function o3(t){return new bx(t).contentType}function a3(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e,n){let r=0,s="";dS(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(dS(this.data_)){const r=this.data_,s=t3(r,e,n);return s===null?null:new _r(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new _r(r,!0)}}static getBlob(...e){if(Xv()){const n=e.map(r=>r instanceof _r?r.data_:r);return new _r(e3.apply(null,n))}else{const n=e.map(o=>Gd(o)?r3(Jn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new _r(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(t){let e;try{e=JSON.parse(t)}catch{return null}return q$(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l3(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function u3(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function Nx(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c3(t,e){return e}class Ft{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||c3}}let dc=null;function h3(t){return!Gd(t)||t.length<2?t:Nx(t)}function Yv(){if(dc)return dc;const t=[];t.push(new Ft("bucket")),t.push(new Ft("generation")),t.push(new Ft("metageneration")),t.push(new Ft("name","fullPath",!0));function e(i,o){return h3(o)}const n=new Ft("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Ft("size");return s.xform=r,t.push(s),t.push(new Ft("timeCreated")),t.push(new Ft("updated")),t.push(new Ft("md5Hash",null,!0)),t.push(new Ft("cacheControl",null,!0)),t.push(new Ft("contentDisposition",null,!0)),t.push(new Ft("contentEncoding",null,!0)),t.push(new Ft("contentLanguage",null,!0)),t.push(new Ft("contentType",null,!0)),t.push(new Ft("metadata","customMetadata",!0)),dc=t,dc}function d3(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new on(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function f3(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return d3(r,t),r}function Ox(t,e,n){const r=kx(e);return r===null?null:f3(t,r,n)}function p3(t,e,n,r){const s=kx(e);if(s===null||!Gd(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const h=t.bucket,d=t.fullPath,f="/b/"+o(h)+"/o/"+o(d),y=hu(f,n,r),w=Ax({alt:"media",token:c});return y+w})[0]}function Dx(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Zo{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(t){if(!t)throw Qv()}function Jv(t,e){function n(r,s){const i=Ox(t,s,e);return kr(i!==null),i}return n}function m3(t,e){function n(r,s){const i=Ox(t,s,e);return kr(i!==null),p3(i,s,t.host,t._protocol)}return n}function du(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=N$():s=k$():n.getStatus()===402?s=b$(t.bucket):n.getStatus()===403?s=O$(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function Lx(t){const e=du(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=C$(t.path)),i.serverResponse=s.serverResponse,i}return n}function g3(t,e,n){const r=e.fullServerUrl(),s=hu(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new Zo(s,i,Jv(t,n),o);return a.errorHandler=Lx(e),a}function y3(t,e,n){const r=e.fullServerUrl(),s=hu(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new Zo(s,i,m3(t,n),o);return a.errorHandler=Lx(e),a}function v3(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Vx(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=v3(null,e)),r}function Mx(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let x=0;x<2;x++)_=_+Math.random().toString().slice(2);return _}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=Vx(e,r,s),h=Dx(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",y=_r.getBlob(d,r,f);if(y===null)throw Ix();const w={name:c.fullPath},T=hu(i,t.host,t._protocol),P="POST",E=t.maxUploadRetryTime,g=new Zo(T,P,Jv(t,n),E);return g.urlParams=w,g.headers=o,g.body=y.uploadData(),g.errorHandler=du(e),g}class qh{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function Zv(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{kr(!1)}return kr(!!n&&(e||["active"]).indexOf(n)!==-1),n}function _3(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=Vx(e,r,s),a={name:o.fullPath},l=hu(i,t.host,t._protocol),c="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},d=Dx(o,n),f=t.maxUploadRetryTime;function y(T){Zv(T);let P;try{P=T.getResponseHeader("X-Goog-Upload-URL")}catch{kr(!1)}return kr(Gd(P)),P}const w=new Zo(l,c,y,f);return w.urlParams=a,w.headers=h,w.body=d,w.errorHandler=du(e),w}function w3(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(c){const h=Zv(c,["active","final"]);let d=null;try{d=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{kr(!1)}d||kr(!1);const f=Number(d);return kr(!isNaN(f)),new qh(f,r.size(),h==="final")}const o="POST",a=t.maxUploadRetryTime,l=new Zo(n,o,i,a);return l.headers=s,l.errorHandler=du(e),l}const pS=256*1024;function E3(t,e,n,r,s,i,o,a){const l=new qh(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw M$();const c=l.total-l.current;let h=c;s>0&&(h=Math.min(h,s));const d=l.current,f=d+h;let y="";h===0?y="finalize":c===h?y="upload, finalize":y="upload";const w={"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":`${l.current}`},T=r.slice(d,f);if(T===null)throw Ix();function P(x,D){const V=Zv(x,["active","final"]),S=l.current+h,v=r.size();let A;return V==="final"?A=Jv(e,i)(x,D):A=null,new qh(S,v,V==="final",A)}const E="POST",g=e.maxUploadRetryTime,_=new Zo(n,E,P,g);return _.headers=w,_.body=T.uploadData(),_.progressCallback=a||null,_.errorHandler=du(t),_}const qt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Vp(t){switch(t){case"running":case"pausing":case"canceling":return qt.RUNNING;case"paused":return qt.PAUSED;case"success":return qt.SUCCESS;case"canceled":return qt.CANCELED;case"error":return qt.ERROR;default:return qt.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(e,n,r){if(H$(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class S3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=oi.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=oi.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=oi.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw xa("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw xa("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw xa("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw xa("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw xa("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class I3 extends S3{initXhr(){this.xhr_.responseType="text"}}function qs(){return new I3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Yv(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(be.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(Rx(s.status,[]))if(i)s=Tx();else{this.sleepTime=Math.max(this.sleepTime*2,x$),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(be.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=_3(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,qs,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=w3(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,qs,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=pS*this._chunkMultiplier,n=new qh(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=E3(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,qs,s,i,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){pS*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=g3(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,qs,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=Mx(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,qs,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Sx(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Vp(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new T3(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Vp(this._state)){case qt.SUCCESS:Fi(this._resolve.bind(null,this.snapshot))();break;case qt.CANCELED:case qt.ERROR:const n=this._reject;Fi(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Vp(this._state)){case qt.RUNNING:case qt.PAUSED:e.next&&Fi(e.next.bind(e,this.snapshot))();break;case qt.SUCCESS:e.complete&&Fi(e.complete.bind(e))();break;case qt.CANCELED:case qt.ERROR:e.error&&Fi(e.error.bind(e,this._error))();break;default:e.error&&Fi(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,n){this._service=e,n instanceof on?this._location=n:this._location=on.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new _i(e,n)}get root(){const e=new on(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Nx(this._location.path)}get storage(){return this._service}get parent(){const e=l3(this._location.path);if(e===null)return null;const n=new on(this._location.bucket,e);return new _i(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw j$(e)}}function A3(t,e,n){t._throwIfRoot("uploadBytes");const r=Mx(t.storage,t._location,Yv(),new _r(e,!0),n);return t.storage.makeRequestWithTokens(r,qs).then(s=>({metadata:s,ref:t}))}function R3(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new P3(t,new _r(e),n)}function x3(t){t._throwIfRoot("getDownloadURL");const e=y3(t.storage,t._location,Yv());return t.storage.makeRequestWithTokens(e,qs).then(n=>{if(n===null)throw F$();return n})}function C3(t,e){const n=u3(t._location.path,e),r=new on(t._location.bucket,n);return new _i(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(t){return/^[A-Za-z]+:\/\//.test(t)}function k3(t,e){return new _i(t,e)}function Fx(t,e){if(t instanceof e_){const n=t;if(n._bucket==null)throw V$();const r=new _i(n,n._bucket);return e!=null?Fx(r,e):r}else return e!==void 0?C3(t,e):t}function N3(t,e){if(e&&b3(e)){if(t instanceof e_)return k3(t,e);throw Ig("To use ref(service, url), the first argument must be a Storage instance.")}else return Fx(t,e)}function mS(t,e){const n=e==null?void 0:e[Ex];return n==null?null:on.makeFromBucketSpec(n,t)}function O3(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:ZP(s,t.app.options.projectId))}class e_{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=wx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=A$,this._maxUploadRetryTime=R$,this._requests=new Set,s!=null?this._bucket=on.makeFromBucketSpec(s,this._host):this._bucket=mS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=on.makeFromBucketSpec(this._url,e):this._bucket=mS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){fS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){fS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new _i(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new B$(Px());{const o=J$(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const gS="@firebase/storage",yS="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="storage";function D3(t,e,n){return t=Ae(t),A3(t,e,n)}function L3(t,e,n){return t=Ae(t),R3(t,e,n)}function jx(t){return t=Ae(t),x3(t)}function Bx(t,e){return t=Ae(t),N3(t,e)}function $x(t=ev(),e){t=Ae(t);const r=Rd(t,Ux).getImmediate({identifier:e}),s=XP("storage");return s&&V3(r,...s),r}function V3(t,e,n,r={}){O3(t,e,n,r)}function M3(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new e_(n,r,s,e,xi)}function F3(){mi(new Ts(Ux,M3,"PUBLIC").setMultipleInstances(!0)),nr(gS,yS,""),nr(gS,yS,"esm2017")}F3();const U3=()=>{const[t,e]=O.useState(""),[n,r]=O.useState(""),[s,i]=O.useState(""),[o,a]=O.useState(""),[l,c]=O.useState(null),[h,d]=O.useState(""),[f,y]=O.useState(""),[w,T]=O.useState(""),E=Yo().currentUser,g=$x();O.useEffect(()=>{if(E){if(E.displayName){const[x,D]=E.displayName.split(" ");r(x||""),i(D||"")}a(E.email||""),E.photoURL&&T(E.photoURL)}},[E]);const _=async x=>{x.preventDefault(),d(""),y("");try{if(t&&(await h2(E,t),y(D=>D+" Password updated successfully! ")),n||s||l){const D={};if((n||s)&&(D.displayName=`${n} ${s}`.trim()),l){const V=Bx(g,`profilePictures/${E.uid}`);await D3(V,l);const S=await jx(V);D.photoURL=S,T(S)}await u2(E,D),y(V=>V+" Profile updated successfully! ")}o&&o!==E.email&&(await c2(E,o),y(D=>D+" Email updated successfully!"))}catch(D){console.error("Error updating profile:",D),d(D.message)}};return k.jsxs("div",{className:"flex h-screen bg-gradient-to-r from-gray-200 via-gray-300 to-gray-400",children:[k.jsxs("div",{className:"w-1/3 bg-gradient-to-br from-blue-500 to-purple-600 flex flex-col justify-center items-center p-6 text-white",children:[k.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Votre Espace Profil"}),k.jsx("p",{className:"text-center text-lg mb-6",children:"Ici, vous pouvez configurer vos informations personnelles et mettre à jour vos préférences de compte."}),k.jsx("dotlottie-player",{src:"https://lottie.host/80208766-c731-404f-9cb6-e5e9675dea75/jpuzZFXmbb.lottie",background:"transparent",speed:"1",style:{width:"300px",height:"300px"},loop:!0,autoplay:!0})]}),k.jsx("div",{className:"w-2/3 flex flex-col justify-center items-center bg-white p-18",children:k.jsxs(ei.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"bg-gray-100 p-8 rounded-xl shadow-lg w-full max-w-4xl",children:[k.jsxs("div",{className:"flex items-center gap-6 mb-6",children:[k.jsx("img",{src:w||"https://via.placeholder.com/150",alt:"Profile",className:"w-32 h-32 rounded-full border-4 border-gray-300 object-cover"}),k.jsx("div",{children:k.jsx("p",{className:"text-3xl font-bold text-gray-800 mb-6 text-center",children:"Configuration du Profil de l'utilisateur"})})]}),k.jsxs("form",{onSubmit:_,className:"space-y-6",children:[k.jsxs("div",{className:"flex gap-6",children:[k.jsxs("div",{className:"flex-1",children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Prénom"}),k.jsx("input",{type:"text",value:n,onChange:x=>r(x.target.value),className:"mt-1 p-3 border rounded-md w-full"})]}),k.jsxs("div",{className:"flex-1",children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nom"}),k.jsx("input",{type:"text",value:s,onChange:x=>i(x.target.value),className:"mt-1 p-3 border rounded-md w-full"})]})]}),k.jsxs("div",{className:"flex gap-6",children:[k.jsxs("div",{className:"flex-1",children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),k.jsx("input",{type:"email",value:o,onChange:x=>a(x.target.value),className:"mt-1 p-3 border rounded-md w-full"})]}),k.jsxs("div",{className:"flex-1",children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mot de passe"}),k.jsx("input",{type:"password",value:t,onChange:x=>e(x.target.value),className:"mt-1 p-3 border rounded-md w-full"})]})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Photo de profil"}),k.jsx("input",{type:"file",onChange:x=>c(x.target.files[0]),className:"mt-1 p-3 border rounded-md w-full"})]}),h&&k.jsx("p",{className:"text-red-500 text-sm",children:h}),f&&k.jsx("p",{className:"text-green-500 text-sm",children:f}),k.jsx("div",{className:"flex justify-center",children:k.jsx("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-md",children:"Enregistrer les modifications"})})]}),k.jsxs("div",{className:"mt-10",children:[k.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"Activités récentes"}),k.jsxs("ul",{className:"flex gap-6",children:[k.jsxs("li",{className:"flex items-center space-x-4 bg-gray-100 p-4 rounded-lg shadow",children:[k.jsx("div",{className:"bg-blue-100 text-blue-500 p-2 rounded-full",children:k.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:k.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v4a1 1 0 001 1h2a1 1 0 100-2h-1V7z",clipRule:"evenodd"})})}),k.jsxs("p",{className:"text-gray-600",children:["Dernière connexion :"," ",k.jsx("span",{className:"font-semibold",children:new Date().toLocaleString()})]})]}),k.jsxs("li",{className:"flex items-center space-x-4 bg-gray-100 p-4 rounded-lg shadow",children:[k.jsx("div",{className:"bg-green-100 text-green-500 p-2 rounded-full",children:k.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:k.jsx("path",{d:"M13.707 3.293a1 1 0 010 1.414L9.414 9l4.293 4.293a1 1 0 01-1.414 1.414l-5-5a1 1 0 010-1.414l5-5a1 1 0 011.414 0z"})})}),k.jsxs("p",{className:"text-gray-600",children:["Dernière modification du profil :"," ",k.jsx("span",{className:"font-semibold",children:"01/11/2024"})]})]})]})]})]})})]})};function zx(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=zx(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function is(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=zx(t))&&(r&&(r+=" "),r+=e);return r}const jl=t=>typeof t=="number"&&!isNaN(t),ai=t=>typeof t=="string",an=t=>typeof t=="function",Wc=t=>ai(t)||an(t)?t:null,Pg=t=>O.isValidElement(t)||ai(t)||an(t)||jl(t);function j3(t,e,n){n===void 0&&(n=300);const{scrollHeight:r,style:s}=t;requestAnimationFrame(()=>{s.minHeight="initial",s.height=r+"px",s.transition=`all ${n}ms`,requestAnimationFrame(()=>{s.height="0",s.padding="0",s.margin="0",setTimeout(e,n)})})}function Qd(t){let{enter:e,exit:n,appendPosition:r=!1,collapse:s=!0,collapseDuration:i=300}=t;return function(o){let{children:a,position:l,preventExitTransition:c,done:h,nodeRef:d,isIn:f,playToast:y}=o;const w=r?`${e}--${l}`:e,T=r?`${n}--${l}`:n,P=O.useRef(0);return O.useLayoutEffect(()=>{const E=d.current,g=w.split(" "),_=x=>{x.target===d.current&&(y(),E.removeEventListener("animationend",_),E.removeEventListener("animationcancel",_),P.current===0&&x.type!=="animationcancel"&&E.classList.remove(...g))};E.classList.add(...g),E.addEventListener("animationend",_),E.addEventListener("animationcancel",_)},[]),O.useEffect(()=>{const E=d.current,g=()=>{E.removeEventListener("animationend",g),s?j3(E,h,i):h()};f||(c?g():(P.current=1,E.className+=` ${T}`,E.addEventListener("animationend",g)))},[f]),ye.createElement(ye.Fragment,null,a)}}function vS(t,e){return t!=null?{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:e}:{}}const jt=new Map;let Bl=[];const Ag=new Set,B3=t=>Ag.forEach(e=>e(t)),Wx=()=>jt.size>0;function Hx(t,e){var n;if(e)return!((n=jt.get(e))==null||!n.isToastActive(t));let r=!1;return jt.forEach(s=>{s.isToastActive(t)&&(r=!0)}),r}function qx(t,e){Pg(t)&&(Wx()||Bl.push({content:t,options:e}),jt.forEach(n=>{n.buildToast(t,e)}))}function _S(t,e){jt.forEach(n=>{e!=null&&e!=null&&e.containerId?(e==null?void 0:e.containerId)===n.id&&n.toggle(t,e==null?void 0:e.id):n.toggle(t,e==null?void 0:e.id)})}function $3(t){const{subscribe:e,getSnapshot:n,setProps:r}=O.useRef(function(i){const o=i.containerId||1;return{subscribe(a){const l=function(h,d,f){let y=1,w=0,T=[],P=[],E=[],g=d;const _=new Map,x=new Set,D=()=>{E=Array.from(_.values()),x.forEach(v=>v())},V=v=>{P=v==null?[]:P.filter(A=>A!==v),D()},S=v=>{const{toastId:A,onOpen:C,updateId:R,children:N}=v.props,b=R==null;v.staleId&&_.delete(v.staleId),_.set(A,v),P=[...P,v.props.toastId].filter(Z=>Z!==v.staleId),D(),f(vS(v,b?"added":"updated")),b&&an(C)&&C(O.isValidElement(N)&&N.props)};return{id:h,props:g,observe:v=>(x.add(v),()=>x.delete(v)),toggle:(v,A)=>{_.forEach(C=>{A!=null&&A!==C.props.toastId||an(C.toggle)&&C.toggle(v)})},removeToast:V,toasts:_,clearQueue:()=>{w-=T.length,T=[]},buildToast:(v,A)=>{if((ne=>{let{containerId:le,toastId:ze,updateId:Ke}=ne;const at=le?le!==h:h!==1,Lt=_.has(ze)&&Ke==null;return at||Lt})(A))return;const{toastId:C,updateId:R,data:N,staleId:b,delay:Z}=A,de=()=>{V(C)},Dt=R==null;Dt&&w++;const oe={...g,style:g.toastStyle,key:y++,...Object.fromEntries(Object.entries(A).filter(ne=>{let[le,ze]=ne;return ze!=null})),toastId:C,updateId:R,data:N,closeToast:de,isIn:!1,className:Wc(A.className||g.toastClassName),bodyClassName:Wc(A.bodyClassName||g.bodyClassName),progressClassName:Wc(A.progressClassName||g.progressClassName),autoClose:!A.isLoading&&(B=A.autoClose,H=g.autoClose,B===!1||jl(B)&&B>0?B:H),deleteToast(){const ne=_.get(C),{onClose:le,children:ze}=ne.props;an(le)&&le(O.isValidElement(ze)&&ze.props),f(vS(ne,"removed")),_.delete(C),w--,w<0&&(w=0),T.length>0?S(T.shift()):D()}};var B,H;oe.closeButton=g.closeButton,A.closeButton===!1||Pg(A.closeButton)?oe.closeButton=A.closeButton:A.closeButton===!0&&(oe.closeButton=!Pg(g.closeButton)||g.closeButton);let G=v;O.isValidElement(v)&&!ai(v.type)?G=O.cloneElement(v,{closeToast:de,toastProps:oe,data:N}):an(v)&&(G=v({closeToast:de,toastProps:oe,data:N}));const ge={content:G,props:oe,staleId:b};g.limit&&g.limit>0&&w>g.limit&&Dt?T.push(ge):jl(Z)?setTimeout(()=>{S(ge)},Z):S(ge)},setProps(v){g=v},setToggle:(v,A)=>{_.get(v).toggle=A},isToastActive:v=>P.some(A=>A===v),getSnapshot:()=>E}}(o,i,B3);jt.set(o,l);const c=l.observe(a);return Bl.forEach(h=>qx(h.content,h.options)),Bl=[],()=>{c(),jt.delete(o)}},setProps(a){var l;(l=jt.get(o))==null||l.setProps(a)},getSnapshot(){var a;return(a=jt.get(o))==null?void 0:a.getSnapshot()}}}(t)).current;r(t);const s=O.useSyncExternalStore(e,n,n);return{getToastToRender:function(i){if(!s)return[];const o=new Map;return t.newestOnTop&&s.reverse(),s.forEach(a=>{const{position:l}=a.props;o.has(l)||o.set(l,[]),o.get(l).push(a)}),Array.from(o,a=>i(a[0],a[1]))},isToastActive:Hx,count:s==null?void 0:s.length}}function z3(t){const[e,n]=O.useState(!1),[r,s]=O.useState(!1),i=O.useRef(null),o=O.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:a,pauseOnHover:l,closeToast:c,onClick:h,closeOnClick:d}=t;var f,y;function w(){n(!0)}function T(){n(!1)}function P(_){const x=i.current;o.canDrag&&x&&(o.didMove=!0,e&&T(),o.delta=t.draggableDirection==="x"?_.clientX-o.start:_.clientY-o.start,o.start!==_.clientX&&(o.canCloseOnClick=!1),x.style.transform=`translate3d(${t.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`},0)`,x.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function E(){document.removeEventListener("pointermove",P),document.removeEventListener("pointerup",E);const _=i.current;if(o.canDrag&&o.didMove&&_){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return s(!0),t.closeToast(),void t.collapseAll();_.style.transition="transform 0.2s, opacity 0.2s",_.style.removeProperty("transform"),_.style.removeProperty("opacity")}}(y=jt.get((f={id:t.toastId,containerId:t.containerId,fn:n}).containerId||1))==null||y.setToggle(f.id,f.fn),O.useEffect(()=>{if(t.pauseOnFocusLoss)return document.hasFocus()||T(),window.addEventListener("focus",w),window.addEventListener("blur",T),()=>{window.removeEventListener("focus",w),window.removeEventListener("blur",T)}},[t.pauseOnFocusLoss]);const g={onPointerDown:function(_){if(t.draggable===!0||t.draggable===_.pointerType){o.didMove=!1,document.addEventListener("pointermove",P),document.addEventListener("pointerup",E);const x=i.current;o.canCloseOnClick=!0,o.canDrag=!0,x.style.transition="none",t.draggableDirection==="x"?(o.start=_.clientX,o.removalDistance=x.offsetWidth*(t.draggablePercent/100)):(o.start=_.clientY,o.removalDistance=x.offsetHeight*(t.draggablePercent===80?1.5*t.draggablePercent:t.draggablePercent)/100)}},onPointerUp:function(_){const{top:x,bottom:D,left:V,right:S}=i.current.getBoundingClientRect();_.nativeEvent.type!=="touchend"&&t.pauseOnHover&&_.clientX>=V&&_.clientX<=S&&_.clientY>=x&&_.clientY<=D?T():w()}};return a&&l&&(g.onMouseEnter=T,t.stacked||(g.onMouseLeave=w)),d&&(g.onClick=_=>{h&&h(_),o.canCloseOnClick&&c()}),{playToast:w,pauseToast:T,isRunning:e,preventExitTransition:r,toastRef:i,eventHandlers:g}}function W3(t){let{delay:e,isRunning:n,closeToast:r,type:s="default",hide:i,className:o,style:a,controlledProgress:l,progress:c,rtl:h,isIn:d,theme:f}=t;const y=i||l&&c===0,w={...a,animationDuration:`${e}ms`,animationPlayState:n?"running":"paused"};l&&(w.transform=`scaleX(${c})`);const T=is("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${f}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":h}),P=an(o)?o({rtl:h,type:s,defaultClassName:T}):is(T,o),E={[l&&c>=1?"onTransitionEnd":"onAnimationEnd"]:l&&c<1?null:()=>{d&&r()}};return ye.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":y},ye.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${f} Toastify__progress-bar--${s}`}),ye.createElement("div",{role:"progressbar","aria-hidden":y?"true":"false","aria-label":"notification timer",className:P,style:w,...E}))}let H3=1;const Kx=()=>""+H3++;function q3(t){return t&&(ai(t.toastId)||jl(t.toastId))?t.toastId:Kx()}function ll(t,e){return qx(t,e),e.toastId}function Kh(t,e){return{...e,type:e&&e.type||t,toastId:q3(e)}}function fc(t){return(e,n)=>ll(e,Kh(t,n))}function ce(t,e){return ll(t,Kh("default",e))}ce.loading=(t,e)=>ll(t,Kh("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),ce.promise=function(t,e,n){let r,{pending:s,error:i,success:o}=e;s&&(r=ai(s)?ce.loading(s,n):ce.loading(s.render,{...n,...s}));const a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(h,d,f)=>{if(d==null)return void ce.dismiss(r);const y={type:h,...a,...n,data:f},w=ai(d)?{render:d}:d;return r?ce.update(r,{...y,...w}):ce(w.render,{...y,...w}),f},c=an(t)?t():t;return c.then(h=>l("success",o,h)).catch(h=>l("error",i,h)),c},ce.success=fc("success"),ce.info=fc("info"),ce.error=fc("error"),ce.warning=fc("warning"),ce.warn=ce.warning,ce.dark=(t,e)=>ll(t,Kh("default",{theme:"dark",...e})),ce.dismiss=function(t){(function(e){var n;if(Wx()){if(e==null||ai(n=e)||jl(n))jt.forEach(r=>{r.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){const r=jt.get(e.containerId);r?r.removeToast(e.id):jt.forEach(s=>{s.removeToast(e.id)})}}else Bl=Bl.filter(r=>e!=null&&r.options.toastId!==e)})(t)},ce.clearWaitingQueue=function(t){t===void 0&&(t={}),jt.forEach(e=>{!e.props.limit||t.containerId&&e.id!==t.containerId||e.clearQueue()})},ce.isActive=Hx,ce.update=function(t,e){e===void 0&&(e={});const n=((r,s)=>{var i;let{containerId:o}=s;return(i=jt.get(o||1))==null?void 0:i.toasts.get(r)})(t,e);if(n){const{props:r,content:s}=n,i={delay:100,...r,...e,toastId:e.toastId||t,updateId:Kx()};i.toastId!==t&&(i.staleId=t);const o=i.render||s;delete i.render,ll(o,i)}},ce.done=t=>{ce.update(t,{progress:1})},ce.onChange=function(t){return Ag.add(t),()=>{Ag.delete(t)}},ce.play=t=>_S(!0,t),ce.pause=t=>_S(!1,t);const K3=typeof window<"u"?O.useLayoutEffect:O.useEffect,pc=t=>{let{theme:e,type:n,isLoading:r,...s}=t;return ye.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...s})},Mp={info:function(t){return ye.createElement(pc,{...t},ye.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return ye.createElement(pc,{...t},ye.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return ye.createElement(pc,{...t},ye.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return ye.createElement(pc,{...t},ye.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return ye.createElement("div",{className:"Toastify__spinner"})}},G3=t=>{const{isRunning:e,preventExitTransition:n,toastRef:r,eventHandlers:s,playToast:i}=z3(t),{closeButton:o,children:a,autoClose:l,onClick:c,type:h,hideProgressBar:d,closeToast:f,transition:y,position:w,className:T,style:P,bodyClassName:E,bodyStyle:g,progressClassName:_,progressStyle:x,updateId:D,role:V,progress:S,rtl:v,toastId:A,deleteToast:C,isIn:R,isLoading:N,closeOnClick:b,theme:Z}=t,de=is("Toastify__toast",`Toastify__toast-theme--${Z}`,`Toastify__toast--${h}`,{"Toastify__toast--rtl":v},{"Toastify__toast--close-on-click":b}),Dt=an(T)?T({rtl:v,position:w,type:h,defaultClassName:de}):is(de,T),oe=function(ge){let{theme:ne,type:le,isLoading:ze,icon:Ke}=ge,at=null;const Lt={theme:ne,type:le};return Ke===!1||(an(Ke)?at=Ke({...Lt,isLoading:ze}):O.isValidElement(Ke)?at=O.cloneElement(Ke,Lt):ze?at=Mp.spinner():(yf=>yf in Mp)(le)&&(at=Mp[le](Lt))),at}(t),B=!!S||!l,H={closeToast:f,type:h,theme:Z};let G=null;return o===!1||(G=an(o)?o(H):O.isValidElement(o)?O.cloneElement(o,H):function(ge){let{closeToast:ne,theme:le,ariaLabel:ze="close"}=ge;return ye.createElement("button",{className:`Toastify__close-button Toastify__close-button--${le}`,type:"button",onClick:Ke=>{Ke.stopPropagation(),ne(Ke)},"aria-label":ze},ye.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},ye.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(H)),ye.createElement(y,{isIn:R,done:C,position:w,preventExitTransition:n,nodeRef:r,playToast:i},ye.createElement("div",{id:A,onClick:c,"data-in":R,className:Dt,...s,style:P,ref:r},ye.createElement("div",{...R&&{role:V},className:an(E)?E({type:h}):is("Toastify__toast-body",E),style:g},oe!=null&&ye.createElement("div",{className:is("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!N})},oe),ye.createElement("div",null,a)),G,ye.createElement(W3,{...D&&!B?{key:`pb-${D}`}:{},rtl:v,theme:Z,delay:l,isRunning:e,isIn:R,closeToast:f,hide:d,type:h,style:x,className:_,controlledProgress:B,progress:S||0})))},Xd=function(t,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}},Q3=Qd(Xd("bounce",!0));Qd(Xd("slide",!0));Qd(Xd("zoom"));Qd(Xd("flip"));const X3={position:"top-right",transition:Q3,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};function Y3(t){let e={...X3,...t};const n=t.stacked,[r,s]=O.useState(!0),i=O.useRef(null),{getToastToRender:o,isToastActive:a,count:l}=$3(e),{className:c,style:h,rtl:d,containerId:f}=e;function y(T){const P=is("Toastify__toast-container",`Toastify__toast-container--${T}`,{"Toastify__toast-container--rtl":d});return an(c)?c({position:T,rtl:d,defaultClassName:P}):is(P,Wc(c))}function w(){n&&(s(!0),ce.play())}return K3(()=>{if(n){var T;const P=i.current.querySelectorAll('[data-in="true"]'),E=12,g=(T=e.position)==null?void 0:T.includes("top");let _=0,x=0;Array.from(P).reverse().forEach((D,V)=>{const S=D;S.classList.add("Toastify__toast--stacked"),V>0&&(S.dataset.collapsed=`${r}`),S.dataset.pos||(S.dataset.pos=g?"top":"bot");const v=_*(r?.2:1)+(r?0:E*V);S.style.setProperty("--y",`${g?v:-1*v}px`),S.style.setProperty("--g",`${E}`),S.style.setProperty("--s",""+(1-(r?x:0))),_+=S.offsetHeight,x+=.025})}},[r,l,n]),ye.createElement("div",{ref:i,className:"Toastify",id:f,onMouseEnter:()=>{n&&(s(!1),ce.pause())},onMouseLeave:w},o((T,P)=>{const E=P.length?{...h}:{...h,pointerEvents:"none"};return ye.createElement("div",{className:y(T),style:E,key:`container-${T}`},P.map(g=>{let{content:_,props:x}=g;return ye.createElement(G3,{...x,stacked:n,collapseAll:w,isIn:a(x.toastId,x.containerId),style:x.style,key:`toast-${x.key}`},_)}))}))}var wS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var li,Gx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,v){function A(){}A.prototype=v.prototype,S.D=v.prototype,S.prototype=new A,S.prototype.constructor=S,S.C=function(C,R,N){for(var b=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)b[Z-2]=arguments[Z];return v.prototype[R].apply(C,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,v,A){A||(A=0);var C=Array(16);if(typeof v=="string")for(var R=0;16>R;++R)C[R]=v.charCodeAt(A++)|v.charCodeAt(A++)<<8|v.charCodeAt(A++)<<16|v.charCodeAt(A++)<<24;else for(R=0;16>R;++R)C[R]=v[A++]|v[A++]<<8|v[A++]<<16|v[A++]<<24;v=S.g[0],A=S.g[1],R=S.g[2];var N=S.g[3],b=v+(N^A&(R^N))+C[0]+3614090360&4294967295;v=A+(b<<7&4294967295|b>>>25),b=N+(R^v&(A^R))+C[1]+3905402710&4294967295,N=v+(b<<12&4294967295|b>>>20),b=R+(A^N&(v^A))+C[2]+606105819&4294967295,R=N+(b<<17&4294967295|b>>>15),b=A+(v^R&(N^v))+C[3]+3250441966&4294967295,A=R+(b<<22&4294967295|b>>>10),b=v+(N^A&(R^N))+C[4]+4118548399&4294967295,v=A+(b<<7&4294967295|b>>>25),b=N+(R^v&(A^R))+C[5]+1200080426&4294967295,N=v+(b<<12&4294967295|b>>>20),b=R+(A^N&(v^A))+C[6]+2821735955&4294967295,R=N+(b<<17&4294967295|b>>>15),b=A+(v^R&(N^v))+C[7]+4249261313&4294967295,A=R+(b<<22&4294967295|b>>>10),b=v+(N^A&(R^N))+C[8]+1770035416&4294967295,v=A+(b<<7&4294967295|b>>>25),b=N+(R^v&(A^R))+C[9]+2336552879&4294967295,N=v+(b<<12&4294967295|b>>>20),b=R+(A^N&(v^A))+C[10]+4294925233&4294967295,R=N+(b<<17&4294967295|b>>>15),b=A+(v^R&(N^v))+C[11]+2304563134&4294967295,A=R+(b<<22&4294967295|b>>>10),b=v+(N^A&(R^N))+C[12]+1804603682&4294967295,v=A+(b<<7&4294967295|b>>>25),b=N+(R^v&(A^R))+C[13]+4254626195&4294967295,N=v+(b<<12&4294967295|b>>>20),b=R+(A^N&(v^A))+C[14]+2792965006&4294967295,R=N+(b<<17&4294967295|b>>>15),b=A+(v^R&(N^v))+C[15]+1236535329&4294967295,A=R+(b<<22&4294967295|b>>>10),b=v+(R^N&(A^R))+C[1]+4129170786&4294967295,v=A+(b<<5&4294967295|b>>>27),b=N+(A^R&(v^A))+C[6]+3225465664&4294967295,N=v+(b<<9&4294967295|b>>>23),b=R+(v^A&(N^v))+C[11]+643717713&4294967295,R=N+(b<<14&4294967295|b>>>18),b=A+(N^v&(R^N))+C[0]+3921069994&4294967295,A=R+(b<<20&4294967295|b>>>12),b=v+(R^N&(A^R))+C[5]+3593408605&4294967295,v=A+(b<<5&4294967295|b>>>27),b=N+(A^R&(v^A))+C[10]+38016083&4294967295,N=v+(b<<9&4294967295|b>>>23),b=R+(v^A&(N^v))+C[15]+3634488961&4294967295,R=N+(b<<14&4294967295|b>>>18),b=A+(N^v&(R^N))+C[4]+3889429448&4294967295,A=R+(b<<20&4294967295|b>>>12),b=v+(R^N&(A^R))+C[9]+568446438&4294967295,v=A+(b<<5&4294967295|b>>>27),b=N+(A^R&(v^A))+C[14]+3275163606&4294967295,N=v+(b<<9&4294967295|b>>>23),b=R+(v^A&(N^v))+C[3]+4107603335&4294967295,R=N+(b<<14&4294967295|b>>>18),b=A+(N^v&(R^N))+C[8]+1163531501&4294967295,A=R+(b<<20&4294967295|b>>>12),b=v+(R^N&(A^R))+C[13]+2850285829&4294967295,v=A+(b<<5&4294967295|b>>>27),b=N+(A^R&(v^A))+C[2]+4243563512&4294967295,N=v+(b<<9&4294967295|b>>>23),b=R+(v^A&(N^v))+C[7]+1735328473&4294967295,R=N+(b<<14&4294967295|b>>>18),b=A+(N^v&(R^N))+C[12]+2368359562&4294967295,A=R+(b<<20&4294967295|b>>>12),b=v+(A^R^N)+C[5]+4294588738&4294967295,v=A+(b<<4&4294967295|b>>>28),b=N+(v^A^R)+C[8]+2272392833&4294967295,N=v+(b<<11&4294967295|b>>>21),b=R+(N^v^A)+C[11]+1839030562&4294967295,R=N+(b<<16&4294967295|b>>>16),b=A+(R^N^v)+C[14]+4259657740&4294967295,A=R+(b<<23&4294967295|b>>>9),b=v+(A^R^N)+C[1]+2763975236&4294967295,v=A+(b<<4&4294967295|b>>>28),b=N+(v^A^R)+C[4]+1272893353&4294967295,N=v+(b<<11&4294967295|b>>>21),b=R+(N^v^A)+C[7]+4139469664&4294967295,R=N+(b<<16&4294967295|b>>>16),b=A+(R^N^v)+C[10]+3200236656&4294967295,A=R+(b<<23&4294967295|b>>>9),b=v+(A^R^N)+C[13]+681279174&4294967295,v=A+(b<<4&4294967295|b>>>28),b=N+(v^A^R)+C[0]+3936430074&4294967295,N=v+(b<<11&4294967295|b>>>21),b=R+(N^v^A)+C[3]+3572445317&4294967295,R=N+(b<<16&4294967295|b>>>16),b=A+(R^N^v)+C[6]+76029189&4294967295,A=R+(b<<23&4294967295|b>>>9),b=v+(A^R^N)+C[9]+3654602809&4294967295,v=A+(b<<4&4294967295|b>>>28),b=N+(v^A^R)+C[12]+3873151461&4294967295,N=v+(b<<11&4294967295|b>>>21),b=R+(N^v^A)+C[15]+530742520&4294967295,R=N+(b<<16&4294967295|b>>>16),b=A+(R^N^v)+C[2]+3299628645&4294967295,A=R+(b<<23&4294967295|b>>>9),b=v+(R^(A|~N))+C[0]+4096336452&4294967295,v=A+(b<<6&4294967295|b>>>26),b=N+(A^(v|~R))+C[7]+1126891415&4294967295,N=v+(b<<10&4294967295|b>>>22),b=R+(v^(N|~A))+C[14]+2878612391&4294967295,R=N+(b<<15&4294967295|b>>>17),b=A+(N^(R|~v))+C[5]+4237533241&4294967295,A=R+(b<<21&4294967295|b>>>11),b=v+(R^(A|~N))+C[12]+1700485571&4294967295,v=A+(b<<6&4294967295|b>>>26),b=N+(A^(v|~R))+C[3]+2399980690&4294967295,N=v+(b<<10&4294967295|b>>>22),b=R+(v^(N|~A))+C[10]+4293915773&4294967295,R=N+(b<<15&4294967295|b>>>17),b=A+(N^(R|~v))+C[1]+2240044497&4294967295,A=R+(b<<21&4294967295|b>>>11),b=v+(R^(A|~N))+C[8]+1873313359&4294967295,v=A+(b<<6&4294967295|b>>>26),b=N+(A^(v|~R))+C[15]+4264355552&4294967295,N=v+(b<<10&4294967295|b>>>22),b=R+(v^(N|~A))+C[6]+2734768916&4294967295,R=N+(b<<15&4294967295|b>>>17),b=A+(N^(R|~v))+C[13]+1309151649&4294967295,A=R+(b<<21&4294967295|b>>>11),b=v+(R^(A|~N))+C[4]+4149444226&4294967295,v=A+(b<<6&4294967295|b>>>26),b=N+(A^(v|~R))+C[11]+3174756917&4294967295,N=v+(b<<10&4294967295|b>>>22),b=R+(v^(N|~A))+C[2]+718787259&4294967295,R=N+(b<<15&4294967295|b>>>17),b=A+(N^(R|~v))+C[9]+3951481745&4294967295,S.g[0]=S.g[0]+v&4294967295,S.g[1]=S.g[1]+(R+(b<<21&4294967295|b>>>11))&4294967295,S.g[2]=S.g[2]+R&4294967295,S.g[3]=S.g[3]+N&4294967295}r.prototype.u=function(S,v){v===void 0&&(v=S.length);for(var A=v-this.blockSize,C=this.B,R=this.h,N=0;N<v;){if(R==0)for(;N<=A;)s(this,S,N),N+=this.blockSize;if(typeof S=="string"){for(;N<v;)if(C[R++]=S.charCodeAt(N++),R==this.blockSize){s(this,C),R=0;break}}else for(;N<v;)if(C[R++]=S[N++],R==this.blockSize){s(this,C),R=0;break}}this.h=R,this.o+=v},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var v=1;v<S.length-8;++v)S[v]=0;var A=8*this.o;for(v=S.length-8;v<S.length;++v)S[v]=A&255,A/=256;for(this.u(S),S=Array(16),v=A=0;4>v;++v)for(var C=0;32>C;C+=8)S[A++]=this.g[v]>>>C&255;return S};function i(S,v){var A=a;return Object.prototype.hasOwnProperty.call(A,S)?A[S]:A[S]=v(S)}function o(S,v){this.h=v;for(var A=[],C=!0,R=S.length-1;0<=R;R--){var N=S[R]|0;C&&N==v||(A[R]=N,C=!1)}this.g=A}var a={};function l(S){return-128<=S&&128>S?i(S,function(v){return new o([v|0],0>v?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return d;if(0>S)return P(c(-S));for(var v=[],A=1,C=0;S>=A;C++)v[C]=S/A|0,A*=4294967296;return new o(v,0)}function h(S,v){if(S.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(S.charAt(0)=="-")return P(h(S.substring(1),v));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=c(Math.pow(v,8)),C=d,R=0;R<S.length;R+=8){var N=Math.min(8,S.length-R),b=parseInt(S.substring(R,R+N),v);8>N?(N=c(Math.pow(v,N)),C=C.j(N).add(c(b))):(C=C.j(A),C=C.add(c(b)))}return C}var d=l(0),f=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(T(this))return-P(this).m();for(var S=0,v=1,A=0;A<this.g.length;A++){var C=this.i(A);S+=(0<=C?C:4294967296+C)*v,v*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(w(this))return"0";if(T(this))return"-"+P(this).toString(S);for(var v=c(Math.pow(S,6)),A=this,C="";;){var R=x(A,v).g;A=E(A,R.j(v));var N=((0<A.g.length?A.g[0]:A.h)>>>0).toString(S);if(A=R,w(A))return N+C;for(;6>N.length;)N="0"+N;C=N+C}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function w(S){if(S.h!=0)return!1;for(var v=0;v<S.g.length;v++)if(S.g[v]!=0)return!1;return!0}function T(S){return S.h==-1}t.l=function(S){return S=E(this,S),T(S)?-1:w(S)?0:1};function P(S){for(var v=S.g.length,A=[],C=0;C<v;C++)A[C]=~S.g[C];return new o(A,~S.h).add(f)}t.abs=function(){return T(this)?P(this):this},t.add=function(S){for(var v=Math.max(this.g.length,S.g.length),A=[],C=0,R=0;R<=v;R++){var N=C+(this.i(R)&65535)+(S.i(R)&65535),b=(N>>>16)+(this.i(R)>>>16)+(S.i(R)>>>16);C=b>>>16,N&=65535,b&=65535,A[R]=b<<16|N}return new o(A,A[A.length-1]&-2147483648?-1:0)};function E(S,v){return S.add(P(v))}t.j=function(S){if(w(this)||w(S))return d;if(T(this))return T(S)?P(this).j(P(S)):P(P(this).j(S));if(T(S))return P(this.j(P(S)));if(0>this.l(y)&&0>S.l(y))return c(this.m()*S.m());for(var v=this.g.length+S.g.length,A=[],C=0;C<2*v;C++)A[C]=0;for(C=0;C<this.g.length;C++)for(var R=0;R<S.g.length;R++){var N=this.i(C)>>>16,b=this.i(C)&65535,Z=S.i(R)>>>16,de=S.i(R)&65535;A[2*C+2*R]+=b*de,g(A,2*C+2*R),A[2*C+2*R+1]+=N*de,g(A,2*C+2*R+1),A[2*C+2*R+1]+=b*Z,g(A,2*C+2*R+1),A[2*C+2*R+2]+=N*Z,g(A,2*C+2*R+2)}for(C=0;C<v;C++)A[C]=A[2*C+1]<<16|A[2*C];for(C=v;C<2*v;C++)A[C]=0;return new o(A,0)};function g(S,v){for(;(S[v]&65535)!=S[v];)S[v+1]+=S[v]>>>16,S[v]&=65535,v++}function _(S,v){this.g=S,this.h=v}function x(S,v){if(w(v))throw Error("division by zero");if(w(S))return new _(d,d);if(T(S))return v=x(P(S),v),new _(P(v.g),P(v.h));if(T(v))return v=x(S,P(v)),new _(P(v.g),v.h);if(30<S.g.length){if(T(S)||T(v))throw Error("slowDivide_ only works with positive integers.");for(var A=f,C=v;0>=C.l(S);)A=D(A),C=D(C);var R=V(A,1),N=V(C,1);for(C=V(C,2),A=V(A,2);!w(C);){var b=N.add(C);0>=b.l(S)&&(R=R.add(A),N=b),C=V(C,1),A=V(A,1)}return v=E(S,R.j(v)),new _(R,v)}for(R=d;0<=S.l(v);){for(A=Math.max(1,Math.floor(S.m()/v.m())),C=Math.ceil(Math.log(A)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),N=c(A),b=N.j(v);T(b)||0<b.l(S);)A-=C,N=c(A),b=N.j(v);w(N)&&(N=f),R=R.add(N),S=E(S,b)}return new _(R,S)}t.A=function(S){return x(this,S).h},t.and=function(S){for(var v=Math.max(this.g.length,S.g.length),A=[],C=0;C<v;C++)A[C]=this.i(C)&S.i(C);return new o(A,this.h&S.h)},t.or=function(S){for(var v=Math.max(this.g.length,S.g.length),A=[],C=0;C<v;C++)A[C]=this.i(C)|S.i(C);return new o(A,this.h|S.h)},t.xor=function(S){for(var v=Math.max(this.g.length,S.g.length),A=[],C=0;C<v;C++)A[C]=this.i(C)^S.i(C);return new o(A,this.h^S.h)};function D(S){for(var v=S.g.length+1,A=[],C=0;C<v;C++)A[C]=S.i(C)<<1|S.i(C-1)>>>31;return new o(A,S.h)}function V(S,v){var A=v>>5;v%=32;for(var C=S.g.length-A,R=[],N=0;N<C;N++)R[N]=0<v?S.i(N+A)>>>v|S.i(N+A+1)<<32-v:S.i(N+A);return new o(R,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Gx=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,li=o}).apply(typeof wS<"u"?wS:typeof self<"u"?self:typeof window<"u"?window:{});var mc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qx,Fa,Xx,Hc,Rg,Yx,Jx,Zx;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,m){return u==Array.prototype||u==Object.prototype||(u[p]=m.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof mc=="object"&&mc];for(var p=0;p<u.length;++p){var m=u[p];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(u,p){if(p)e:{var m=r;u=u.split(".");for(var I=0;I<u.length-1;I++){var L=u[I];if(!(L in m))break e;m=m[L]}u=u[u.length-1],I=m[u],p=p(I),p!=I&&p!=null&&e(m,u,{configurable:!0,writable:!0,value:p})}}function i(u,p){u instanceof String&&(u+="");var m=0,I=!1,L={next:function(){if(!I&&m<u.length){var M=m++;return{value:p(M,u[M]),done:!1}}return I=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}s("Array.prototype.values",function(u){return u||function(){return i(this,function(p,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function c(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function h(u,p,m){return u.call.apply(u.bind,arguments)}function d(u,p,m){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,I),u.apply(p,L)}}return function(){return u.apply(p,arguments)}}function f(u,p,m){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,f.apply(null,arguments)}function y(u,p){var m=Array.prototype.slice.call(arguments,1);return function(){var I=m.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function w(u,p){function m(){}m.prototype=p.prototype,u.aa=p.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(I,L,M){for(var $=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)$[Ie-2]=arguments[Ie];return p.prototype[L].apply(I,$)}}function T(u){const p=u.length;if(0<p){const m=Array(p);for(let I=0;I<p;I++)m[I]=u[I];return m}return[]}function P(u,p){for(let m=1;m<arguments.length;m++){const I=arguments[m];if(l(I)){const L=u.length||0,M=I.length||0;u.length=L+M;for(let $=0;$<M;$++)u[L+$]=I[$]}else u.push(I)}}class E{constructor(p,m){this.i=p,this.j=m,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function g(u){return/^[\s\xa0]*$/.test(u)}function _(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function x(u){return x[" "](u),u}x[" "]=function(){};var D=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function V(u,p,m){for(const I in u)p.call(m,u[I],I,u)}function S(u,p){for(const m in u)p.call(void 0,u[m],m,u)}function v(u){const p={};for(const m in u)p[m]=u[m];return p}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(u,p){let m,I;for(let L=1;L<arguments.length;L++){I=arguments[L];for(m in I)u[m]=I[m];for(let M=0;M<A.length;M++)m=A[M],Object.prototype.hasOwnProperty.call(I,m)&&(u[m]=I[m])}}function R(u){var p=1;u=u.split(":");const m=[];for(;0<p&&u.length;)m.push(u.shift()),p--;return u.length&&m.push(u.join(":")),m}function N(u){a.setTimeout(()=>{throw u},0)}function b(){var u=H;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class Z{constructor(){this.h=this.g=null}add(p,m){const I=de.get();I.set(p,m),this.h?this.h.next=I:this.g=I,this.h=I}}var de=new E(()=>new Dt,u=>u.reset());class Dt{constructor(){this.next=this.g=this.h=null}set(p,m){this.h=p,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,B=!1,H=new Z,G=()=>{const u=a.Promise.resolve(void 0);oe=()=>{u.then(ge)}};var ge=()=>{for(var u;u=b();){try{u.h.call(u.g)}catch(m){N(m)}var p=de;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}B=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var ze=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,p),a.removeEventListener("test",m,p)}catch{}return u}();function Ke(u,p){if(le.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(D){e:{try{x(p.nodeName);var L=!0;break e}catch{}L=!1}L||(p=null)}}else m=="mouseover"?p=u.fromElement:m=="mouseout"&&(p=u.toElement);this.relatedTarget=p,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:at[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ke.aa.h.call(this)}}w(Ke,le);var at={2:"touch",3:"pen",4:"mouse"};Ke.prototype.h=function(){Ke.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Lt="closure_listenable_"+(1e6*Math.random()|0),yf=0;function Ek(u,p,m,I,L){this.listener=u,this.proxy=null,this.src=p,this.type=m,this.capture=!!I,this.ha=L,this.key=++yf,this.da=this.fa=!1}function Iu(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Pu(u){this.src=u,this.g={},this.h=0}Pu.prototype.add=function(u,p,m,I,L){var M=u.toString();u=this.g[M],u||(u=this.g[M]=[],this.h++);var $=_f(u,p,I,L);return-1<$?(p=u[$],m||(p.fa=!1)):(p=new Ek(p,this.src,M,!!I,L),p.fa=m,u.push(p)),p};function vf(u,p){var m=p.type;if(m in u.g){var I=u.g[m],L=Array.prototype.indexOf.call(I,p,void 0),M;(M=0<=L)&&Array.prototype.splice.call(I,L,1),M&&(Iu(p),u.g[m].length==0&&(delete u.g[m],u.h--))}}function _f(u,p,m,I){for(var L=0;L<u.length;++L){var M=u[L];if(!M.da&&M.listener==p&&M.capture==!!m&&M.ha==I)return L}return-1}var wf="closure_lm_"+(1e6*Math.random()|0),Ef={};function s0(u,p,m,I,L){if(Array.isArray(p)){for(var M=0;M<p.length;M++)s0(u,p[M],m,I,L);return null}return m=a0(m),u&&u[Lt]?u.K(p,m,c(I)?!!I.capture:!!I,L):Tk(u,p,m,!1,I,L)}function Tk(u,p,m,I,L,M){if(!p)throw Error("Invalid event type");var $=c(L)?!!L.capture:!!L,Ie=Sf(u);if(Ie||(u[wf]=Ie=new Pu(u)),m=Ie.add(p,m,I,$,M),m.proxy)return m;if(I=Sk(),m.proxy=I,I.src=u,I.listener=m,u.addEventListener)ze||(L=$),L===void 0&&(L=!1),u.addEventListener(p.toString(),I,L);else if(u.attachEvent)u.attachEvent(o0(p.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Sk(){function u(m){return p.call(u.src,u.listener,m)}const p=Ik;return u}function i0(u,p,m,I,L){if(Array.isArray(p))for(var M=0;M<p.length;M++)i0(u,p[M],m,I,L);else I=c(I)?!!I.capture:!!I,m=a0(m),u&&u[Lt]?(u=u.i,p=String(p).toString(),p in u.g&&(M=u.g[p],m=_f(M,m,I,L),-1<m&&(Iu(M[m]),Array.prototype.splice.call(M,m,1),M.length==0&&(delete u.g[p],u.h--)))):u&&(u=Sf(u))&&(p=u.g[p.toString()],u=-1,p&&(u=_f(p,m,I,L)),(m=-1<u?p[u]:null)&&Tf(m))}function Tf(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Lt])vf(p.i,u);else{var m=u.type,I=u.proxy;p.removeEventListener?p.removeEventListener(m,I,u.capture):p.detachEvent?p.detachEvent(o0(m),I):p.addListener&&p.removeListener&&p.removeListener(I),(m=Sf(p))?(vf(m,u),m.h==0&&(m.src=null,p[wf]=null)):Iu(u)}}}function o0(u){return u in Ef?Ef[u]:Ef[u]="on"+u}function Ik(u,p){if(u.da)u=!0;else{p=new Ke(p,this);var m=u.listener,I=u.ha||u.src;u.fa&&Tf(u),u=m.call(I,p)}return u}function Sf(u){return u=u[wf],u instanceof Pu?u:null}var If="__closure_events_fn_"+(1e9*Math.random()>>>0);function a0(u){return typeof u=="function"?u:(u[If]||(u[If]=function(p){return u.handleEvent(p)}),u[If])}function _t(){ne.call(this),this.i=new Pu(this),this.M=this,this.F=null}w(_t,ne),_t.prototype[Lt]=!0,_t.prototype.removeEventListener=function(u,p,m,I){i0(this,u,p,m,I)};function Vt(u,p){var m,I=u.F;if(I)for(m=[];I;I=I.F)m.push(I);if(u=u.M,I=p.type||p,typeof p=="string")p=new le(p,u);else if(p instanceof le)p.target=p.target||u;else{var L=p;p=new le(I,u),C(p,L)}if(L=!0,m)for(var M=m.length-1;0<=M;M--){var $=p.g=m[M];L=Au($,I,!0,p)&&L}if($=p.g=u,L=Au($,I,!0,p)&&L,L=Au($,I,!1,p)&&L,m)for(M=0;M<m.length;M++)$=p.g=m[M],L=Au($,I,!1,p)&&L}_t.prototype.N=function(){if(_t.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var m=u.g[p],I=0;I<m.length;I++)Iu(m[I]);delete u.g[p],u.h--}}this.F=null},_t.prototype.K=function(u,p,m,I){return this.i.add(String(u),p,!1,m,I)},_t.prototype.L=function(u,p,m,I){return this.i.add(String(u),p,!0,m,I)};function Au(u,p,m,I){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var L=!0,M=0;M<p.length;++M){var $=p[M];if($&&!$.da&&$.capture==m){var Ie=$.listener,lt=$.ha||$.src;$.fa&&vf(u.i,$),L=Ie.call(lt,I)!==!1&&L}}return L&&!I.defaultPrevented}function l0(u,p,m){if(typeof u=="function")m&&(u=f(u,m));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(u,p||0)}function u0(u){u.g=l0(()=>{u.g=null,u.i&&(u.i=!1,u0(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Pk extends ne{constructor(p,m){super(),this.m=p,this.l=m,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:u0(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oa(u){ne.call(this),this.h=u,this.g={}}w(oa,ne);var c0=[];function h0(u){V(u.g,function(p,m){this.g.hasOwnProperty(m)&&Tf(p)},u),u.g={}}oa.prototype.N=function(){oa.aa.N.call(this),h0(this)},oa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pf=a.JSON.stringify,Ak=a.JSON.parse,Rk=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Af(){}Af.prototype.h=null;function d0(u){return u.h||(u.h=u.i())}function f0(){}var aa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Rf(){le.call(this,"d")}w(Rf,le);function xf(){le.call(this,"c")}w(xf,le);var Vs={},p0=null;function Ru(){return p0=p0||new _t}Vs.La="serverreachability";function m0(u){le.call(this,Vs.La,u)}w(m0,le);function la(u){const p=Ru();Vt(p,new m0(p))}Vs.STAT_EVENT="statevent";function g0(u,p){le.call(this,Vs.STAT_EVENT,u),this.stat=p}w(g0,le);function Mt(u){const p=Ru();Vt(p,new g0(p,u))}Vs.Ma="timingevent";function y0(u,p){le.call(this,Vs.Ma,u),this.size=p}w(y0,le);function ua(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function ca(){this.g=!0}ca.prototype.xa=function(){this.g=!1};function xk(u,p,m,I,L,M){u.info(function(){if(u.g)if(M)for(var $="",Ie=M.split("&"),lt=0;lt<Ie.length;lt++){var pe=Ie[lt].split("=");if(1<pe.length){var wt=pe[0];pe=pe[1];var Et=wt.split("_");$=2<=Et.length&&Et[1]=="type"?$+(wt+"="+pe+"&"):$+(wt+"=redacted&")}}else $=null;else $=M;return"XMLHTTP REQ ("+I+") [attempt "+L+"]: "+p+`
`+m+`
`+$})}function Ck(u,p,m,I,L,M,$){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+L+"]: "+p+`
`+m+`
`+M+" "+$})}function Oi(u,p,m,I){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+kk(u,m)+(I?" "+I:"")})}function bk(u,p){u.info(function(){return"TIMEOUT: "+p})}ca.prototype.info=function(){};function kk(u,p){if(!u.g)return p;if(!p)return null;try{var m=JSON.parse(p);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var I=m[u];if(!(2>I.length)){var L=I[1];if(Array.isArray(L)&&!(1>L.length)){var M=L[0];if(M!="noop"&&M!="stop"&&M!="close")for(var $=1;$<L.length;$++)L[$]=""}}}}return Pf(m)}catch{return p}}var xu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},v0={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Cf;function Cu(){}w(Cu,Af),Cu.prototype.g=function(){return new XMLHttpRequest},Cu.prototype.i=function(){return{}},Cf=new Cu;function zr(u,p,m,I){this.j=u,this.i=p,this.l=m,this.R=I||1,this.U=new oa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _0}function _0(){this.i=null,this.g="",this.h=!1}var w0={},bf={};function kf(u,p,m){u.L=1,u.v=Ou(dr(p)),u.m=m,u.P=!0,E0(u,null)}function E0(u,p){u.F=Date.now(),bu(u),u.A=dr(u.v);var m=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),L0(m.i,"t",I),u.C=0,m=u.j.J,u.h=new _0,u.g=Z0(u.j,m?p:null,!u.m),0<u.O&&(u.M=new Pk(f(u.Y,u,u.g),u.O)),p=u.U,m=u.g,I=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(c0[0]=L.toString()),L=c0);for(var M=0;M<L.length;M++){var $=s0(m,L[M],I||p.handleEvent,!1,p.h||p);if(!$)break;p.g[$.key]=$}p=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),la(),xk(u.i,u.u,u.A,u.l,u.R,u.m)}zr.prototype.ca=function(u){u=u.target;const p=this.M;p&&fr(u)==3?p.j():this.Y(u)},zr.prototype.Y=function(u){try{if(u==this.g)e:{const Et=fr(this.g);var p=this.g.Ba();const Vi=this.g.Z();if(!(3>Et)&&(Et!=3||this.g&&(this.h.h||this.g.oa()||$0(this.g)))){this.J||Et!=4||p==7||(p==8||0>=Vi?la(3):la(2)),Nf(this);var m=this.g.Z();this.X=m;t:if(T0(this)){var I=$0(this.g);u="";var L=I.length,M=fr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ms(this),ha(this);var $="";break t}this.h.i=new a.TextDecoder}for(p=0;p<L;p++)this.h.h=!0,u+=this.h.i.decode(I[p],{stream:!(M&&p==L-1)});I.length=0,this.h.g+=u,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=m==200,Ck(this.i,this.u,this.A,this.l,this.R,Et,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ie,lt=this.g;if((Ie=lt.g?lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!g(Ie)){var pe=Ie;break t}}pe=null}if(m=pe)Oi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Of(this,m);else{this.o=!1,this.s=3,Mt(12),Ms(this),ha(this);break e}}if(this.P){m=!0;let An;for(;!this.J&&this.C<$.length;)if(An=Nk(this,$),An==bf){Et==4&&(this.s=4,Mt(14),m=!1),Oi(this.i,this.l,null,"[Incomplete Response]");break}else if(An==w0){this.s=4,Mt(15),Oi(this.i,this.l,$,"[Invalid Chunk]"),m=!1;break}else Oi(this.i,this.l,An,null),Of(this,An);if(T0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Et!=4||$.length!=0||this.h.h||(this.s=1,Mt(16),m=!1),this.o=this.o&&m,!m)Oi(this.i,this.l,$,"[Invalid Chunked Response]"),Ms(this),ha(this);else if(0<$.length&&!this.W){this.W=!0;var wt=this.j;wt.g==this&&wt.ba&&!wt.M&&(wt.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),Uf(wt),wt.M=!0,Mt(11))}}else Oi(this.i,this.l,$,null),Of(this,$);Et==4&&Ms(this),this.o&&!this.J&&(Et==4?Q0(this.j,this):(this.o=!1,bu(this)))}else Qk(this.g),m==400&&0<$.indexOf("Unknown SID")?(this.s=3,Mt(12)):(this.s=0,Mt(13)),Ms(this),ha(this)}}}catch{}finally{}};function T0(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Nk(u,p){var m=u.C,I=p.indexOf(`
`,m);return I==-1?bf:(m=Number(p.substring(m,I)),isNaN(m)?w0:(I+=1,I+m>p.length?bf:(p=p.slice(I,I+m),u.C=I+m,p)))}zr.prototype.cancel=function(){this.J=!0,Ms(this)};function bu(u){u.S=Date.now()+u.I,S0(u,u.I)}function S0(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ua(f(u.ba,u),p)}function Nf(u){u.B&&(a.clearTimeout(u.B),u.B=null)}zr.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(bk(this.i,this.A),this.L!=2&&(la(),Mt(17)),Ms(this),this.s=2,ha(this)):S0(this,this.S-u)};function ha(u){u.j.G==0||u.J||Q0(u.j,u)}function Ms(u){Nf(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,h0(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Of(u,p){try{var m=u.j;if(m.G!=0&&(m.g==u||Df(m.h,u))){if(!u.K&&Df(m.h,u)&&m.G==3){try{var I=m.Da.g.parse(p)}catch{I=null}if(Array.isArray(I)&&I.length==3){var L=I;if(L[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Uu(m),Mu(m);else break e;Ff(m),Mt(18)}}else m.za=L[1],0<m.za-m.T&&37500>L[2]&&m.F&&m.v==0&&!m.C&&(m.C=ua(f(m.Za,m),6e3));if(1>=A0(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Us(m,11)}else if((u.K||m.g==u)&&Uu(m),!g(p))for(L=m.Da.g.parse(p),p=0;p<L.length;p++){let pe=L[p];if(m.T=pe[0],pe=pe[1],m.G==2)if(pe[0]=="c"){m.K=pe[1],m.ia=pe[2];const wt=pe[3];wt!=null&&(m.la=wt,m.j.info("VER="+m.la));const Et=pe[4];Et!=null&&(m.Aa=Et,m.j.info("SVER="+m.Aa));const Vi=pe[5];Vi!=null&&typeof Vi=="number"&&0<Vi&&(I=1.5*Vi,m.L=I,m.j.info("backChannelRequestTimeoutMs_="+I)),I=m;const An=u.g;if(An){const Bu=An.g?An.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bu){var M=I.h;M.g||Bu.indexOf("spdy")==-1&&Bu.indexOf("quic")==-1&&Bu.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Lf(M,M.h),M.h=null))}if(I.D){const jf=An.g?An.g.getResponseHeader("X-HTTP-Session-Id"):null;jf&&(I.ya=jf,Re(I.I,I.D,jf))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),I=m;var $=u;if(I.qa=J0(I,I.J?I.ia:null,I.W),$.K){R0(I.h,$);var Ie=$,lt=I.L;lt&&(Ie.I=lt),Ie.B&&(Nf(Ie),bu(Ie)),I.g=$}else K0(I);0<m.i.length&&Fu(m)}else pe[0]!="stop"&&pe[0]!="close"||Us(m,7);else m.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?Us(m,7):Mf(m):pe[0]!="noop"&&m.l&&m.l.ta(pe),m.v=0)}}la(4)}catch{}}var Ok=class{constructor(u,p){this.g=u,this.map=p}};function I0(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function P0(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function A0(u){return u.h?1:u.g?u.g.size:0}function Df(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Lf(u,p){u.g?u.g.add(p):u.h=p}function R0(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}I0.prototype.cancel=function(){if(this.i=x0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function x0(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const m of u.g.values())p=p.concat(m.D);return p}return T(u.i)}function Dk(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var p=[],m=u.length,I=0;I<m;I++)p.push(u[I]);return p}p=[],m=0;for(I in u)p[m++]=u[I];return p}function Lk(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var p=[];u=u.length;for(var m=0;m<u;m++)p.push(m);return p}p=[],m=0;for(const I in u)p[m++]=I;return p}}}function C0(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var m=Lk(u),I=Dk(u),L=I.length,M=0;M<L;M++)p.call(void 0,I[M],m&&m[M],u)}var b0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vk(u,p){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var I=u[m].indexOf("="),L=null;if(0<=I){var M=u[m].substring(0,I);L=u[m].substring(I+1)}else M=u[m];p(M,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Fs(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Fs){this.h=u.h,ku(this,u.j),this.o=u.o,this.g=u.g,Nu(this,u.s),this.l=u.l;var p=u.i,m=new pa;m.i=p.i,p.g&&(m.g=new Map(p.g),m.h=p.h),k0(this,m),this.m=u.m}else u&&(p=String(u).match(b0))?(this.h=!1,ku(this,p[1]||"",!0),this.o=da(p[2]||""),this.g=da(p[3]||"",!0),Nu(this,p[4]),this.l=da(p[5]||"",!0),k0(this,p[6]||"",!0),this.m=da(p[7]||"")):(this.h=!1,this.i=new pa(null,this.h))}Fs.prototype.toString=function(){var u=[],p=this.j;p&&u.push(fa(p,N0,!0),":");var m=this.g;return(m||p=="file")&&(u.push("//"),(p=this.o)&&u.push(fa(p,N0,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(fa(m,m.charAt(0)=="/"?Uk:Fk,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",fa(m,Bk)),u.join("")};function dr(u){return new Fs(u)}function ku(u,p,m){u.j=m?da(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Nu(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function k0(u,p,m){p instanceof pa?(u.i=p,$k(u.i,u.h)):(m||(p=fa(p,jk)),u.i=new pa(p,u.h))}function Re(u,p,m){u.i.set(p,m)}function Ou(u){return Re(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function da(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function fa(u,p,m){return typeof u=="string"?(u=encodeURI(u).replace(p,Mk),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Mk(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var N0=/[#\/\?@]/g,Fk=/[#\?:]/g,Uk=/[#\?]/g,jk=/[#\?@]/g,Bk=/#/g;function pa(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Wr(u){u.g||(u.g=new Map,u.h=0,u.i&&Vk(u.i,function(p,m){u.add(decodeURIComponent(p.replace(/\+/g," ")),m)}))}t=pa.prototype,t.add=function(u,p){Wr(this),this.i=null,u=Di(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(p),this.h+=1,this};function O0(u,p){Wr(u),p=Di(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function D0(u,p){return Wr(u),p=Di(u,p),u.g.has(p)}t.forEach=function(u,p){Wr(this),this.g.forEach(function(m,I){m.forEach(function(L){u.call(p,L,I,this)},this)},this)},t.na=function(){Wr(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),m=[];for(let I=0;I<p.length;I++){const L=u[I];for(let M=0;M<L.length;M++)m.push(p[I])}return m},t.V=function(u){Wr(this);let p=[];if(typeof u=="string")D0(this,u)&&(p=p.concat(this.g.get(Di(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)p=p.concat(u[m])}return p},t.set=function(u,p){return Wr(this),this.i=null,u=Di(this,u),D0(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function L0(u,p,m){O0(u,p),0<m.length&&(u.i=null,u.g.set(Di(u,p),T(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var m=0;m<p.length;m++){var I=p[m];const M=encodeURIComponent(String(I)),$=this.V(I);for(I=0;I<$.length;I++){var L=M;$[I]!==""&&(L+="="+encodeURIComponent(String($[I]))),u.push(L)}}return this.i=u.join("&")};function Di(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function $k(u,p){p&&!u.j&&(Wr(u),u.i=null,u.g.forEach(function(m,I){var L=I.toLowerCase();I!=L&&(O0(this,I),L0(this,L,m))},u)),u.j=p}function zk(u,p){const m=new ca;if(a.Image){const I=new Image;I.onload=y(Hr,m,"TestLoadImage: loaded",!0,p,I),I.onerror=y(Hr,m,"TestLoadImage: error",!1,p,I),I.onabort=y(Hr,m,"TestLoadImage: abort",!1,p,I),I.ontimeout=y(Hr,m,"TestLoadImage: timeout",!1,p,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else p(!1)}function Wk(u,p){const m=new ca,I=new AbortController,L=setTimeout(()=>{I.abort(),Hr(m,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:I.signal}).then(M=>{clearTimeout(L),M.ok?Hr(m,"TestPingServer: ok",!0,p):Hr(m,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),Hr(m,"TestPingServer: error",!1,p)})}function Hr(u,p,m,I,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),I(m)}catch{}}function Hk(){this.g=new Rk}function qk(u,p,m){const I=m||"";try{C0(u,function(L,M){let $=L;c(L)&&($=Pf(L)),p.push(I+M+"="+encodeURIComponent($))})}catch(L){throw p.push(I+"type="+encodeURIComponent("_badmap")),L}}function Du(u){this.l=u.Ub||null,this.j=u.eb||!1}w(Du,Af),Du.prototype.g=function(){return new Lu(this.l,this.j)},Du.prototype.i=function(u){return function(){return u}}({});function Lu(u,p){_t.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Lu,_t),t=Lu.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,ga(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ma(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ga(this)),this.g&&(this.readyState=3,ga(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;V0(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function V0(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?ma(this):ga(this),this.readyState==3&&V0(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,ma(this))},t.Qa=function(u){this.g&&(this.response=u,ma(this))},t.ga=function(){this.g&&ma(this)};function ma(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ga(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var m=p.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=p.next();return u.join(`\r
`)};function ga(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Lu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function M0(u){let p="";return V(u,function(m,I){p+=I,p+=":",p+=m,p+=`\r
`}),p}function Vf(u,p,m){e:{for(I in m){var I=!1;break e}I=!0}I||(m=M0(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):Re(u,p,m))}function Be(u){_t.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Be,_t);var Kk=/^https?$/i,Gk=["POST","PUT"];t=Be.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,m,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Cf.g(),this.v=this.o?d0(this.o):d0(Cf),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(M){F0(this,M);return}if(u=m||"",m=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var L in I)m.set(L,I[L]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const M of I.keys())m.set(M,I.get(M));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(m.keys()).find(M=>M.toLowerCase()=="content-type"),L=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Gk,p,void 0))||I||L||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,$]of m)this.g.setRequestHeader(M,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{B0(this),this.u=!0,this.g.send(u),this.u=!1}catch(M){F0(this,M)}};function F0(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,U0(u),Vu(u)}function U0(u){u.A||(u.A=!0,Vt(u,"complete"),Vt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Vt(this,"complete"),Vt(this,"abort"),Vu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vu(this,!0)),Be.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?j0(this):this.bb())},t.bb=function(){j0(this)};function j0(u){if(u.h&&typeof o<"u"&&(!u.v[1]||fr(u)!=4||u.Z()!=2)){if(u.u&&fr(u)==4)l0(u.Ea,0,u);else if(Vt(u,"readystatechange"),fr(u)==4){u.h=!1;try{const $=u.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var m;if(!(m=p)){var I;if(I=$===0){var L=String(u.D).match(b0)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),I=!Kk.test(L?L.toLowerCase():"")}m=I}if(m)Vt(u,"complete"),Vt(u,"success");else{u.m=6;try{var M=2<fr(u)?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.Z()+"]",U0(u)}}finally{Vu(u)}}}}function Vu(u,p){if(u.g){B0(u);const m=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||Vt(u,"ready");try{m.onreadystatechange=I}catch{}}}function B0(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function fr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<fr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Ak(p)}};function $0(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Qk(u){const p={};u=(u.g&&2<=fr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(g(u[I]))continue;var m=R(u[I]);const L=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const M=p[L]||[];p[L]=M,M.push(m)}S(p,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ya(u,p,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||p}function z0(u){this.Aa=0,this.i=[],this.j=new ca,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ya("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ya("baseRetryDelayMs",5e3,u),this.cb=ya("retryDelaySeedMs",1e4,u),this.Wa=ya("forwardChannelMaxRetries",2,u),this.wa=ya("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new I0(u&&u.concurrentRequestLimit),this.Da=new Hk,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=z0.prototype,t.la=8,t.G=1,t.connect=function(u,p,m,I){Mt(0),this.W=u,this.H=p||{},m&&I!==void 0&&(this.H.OSID=m,this.H.OAID=I),this.F=this.X,this.I=J0(this,null,this.W),Fu(this)};function Mf(u){if(W0(u),u.G==3){var p=u.U++,m=dr(u.I);if(Re(m,"SID",u.K),Re(m,"RID",p),Re(m,"TYPE","terminate"),va(u,m),p=new zr(u,u.j,p),p.L=2,p.v=Ou(dr(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=p.v,m=!0),m||(p.g=Z0(p.j,null),p.g.ea(p.v)),p.F=Date.now(),bu(p)}Y0(u)}function Mu(u){u.g&&(Uf(u),u.g.cancel(),u.g=null)}function W0(u){Mu(u),u.u&&(a.clearTimeout(u.u),u.u=null),Uu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Fu(u){if(!P0(u.h)&&!u.s){u.s=!0;var p=u.Ga;oe||G(),B||(oe(),B=!0),H.add(p,u),u.B=0}}function Xk(u,p){return A0(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ua(f(u.Ga,u,p),X0(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new zr(this,this.j,u);let M=this.o;if(this.S&&(M?(M=v(M),C(M,this.S)):M=this.S),this.m!==null||this.O||(L.H=M,M=null),this.P)e:{for(var p=0,m=0;m<this.i.length;m++){t:{var I=this.i[m];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(p+=I,4096<p){p=m;break e}if(p===4096||m===this.i.length-1){p=m+1;break e}}p=1e3}else p=1e3;p=q0(this,L,p),m=dr(this.I),Re(m,"RID",u),Re(m,"CVER",22),this.D&&Re(m,"X-HTTP-Session-Id",this.D),va(this,m),M&&(this.O?p="headers="+encodeURIComponent(String(M0(M)))+"&"+p:this.m&&Vf(m,this.m,M)),Lf(this.h,L),this.Ua&&Re(m,"TYPE","init"),this.P?(Re(m,"$req",p),Re(m,"SID","null"),L.T=!0,kf(L,m,null)):kf(L,m,p),this.G=2}}else this.G==3&&(u?H0(this,u):this.i.length==0||P0(this.h)||H0(this))};function H0(u,p){var m;p?m=p.l:m=u.U++;const I=dr(u.I);Re(I,"SID",u.K),Re(I,"RID",m),Re(I,"AID",u.T),va(u,I),u.m&&u.o&&Vf(I,u.m,u.o),m=new zr(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),p&&(u.i=p.D.concat(u.i)),p=q0(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Lf(u.h,m),kf(m,I,p)}function va(u,p){u.H&&V(u.H,function(m,I){Re(p,I,m)}),u.l&&C0({},function(m,I){Re(p,I,m)})}function q0(u,p,m){m=Math.min(u.i.length,m);var I=u.l?f(u.l.Na,u.l,u):null;e:{var L=u.i;let M=-1;for(;;){const $=["count="+m];M==-1?0<m?(M=L[0].g,$.push("ofs="+M)):M=0:$.push("ofs="+M);let Ie=!0;for(let lt=0;lt<m;lt++){let pe=L[lt].g;const wt=L[lt].map;if(pe-=M,0>pe)M=Math.max(0,L[lt].g-100),Ie=!1;else try{qk(wt,$,"req"+pe+"_")}catch{I&&I(wt)}}if(Ie){I=$.join("&");break e}}}return u=u.i.splice(0,m),p.D=u,I}function K0(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;oe||G(),B||(oe(),B=!0),H.add(p,u),u.v=0}}function Ff(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ua(f(u.Fa,u),X0(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,G0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ua(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Mt(10),Mu(this),G0(this))};function Uf(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function G0(u){u.g=new zr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=dr(u.qa);Re(p,"RID","rpc"),Re(p,"SID",u.K),Re(p,"AID",u.T),Re(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Re(p,"TO",u.ja),Re(p,"TYPE","xmlhttp"),va(u,p),u.m&&u.o&&Vf(p,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Ou(dr(p)),m.m=null,m.P=!0,E0(m,u)}t.Za=function(){this.C!=null&&(this.C=null,Mu(this),Ff(this),Mt(19))};function Uu(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Q0(u,p){var m=null;if(u.g==p){Uu(u),Uf(u),u.g=null;var I=2}else if(Df(u.h,p))m=p.D,R0(u.h,p),I=1;else return;if(u.G!=0){if(p.o)if(I==1){m=p.m?p.m.length:0,p=Date.now()-p.F;var L=u.B;I=Ru(),Vt(I,new y0(I,m)),Fu(u)}else K0(u);else if(L=p.s,L==3||L==0&&0<p.X||!(I==1&&Xk(u,p)||I==2&&Ff(u)))switch(m&&0<m.length&&(p=u.h,p.i=p.i.concat(m)),L){case 1:Us(u,5);break;case 4:Us(u,10);break;case 3:Us(u,6);break;default:Us(u,2)}}}function X0(u,p){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*p}function Us(u,p){if(u.j.info("Error code "+p),p==2){var m=f(u.fb,u),I=u.Xa;const L=!I;I=new Fs(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ku(I,"https"),Ou(I),L?zk(I.toString(),m):Wk(I.toString(),m)}else Mt(2);u.G=0,u.l&&u.l.sa(p),Y0(u),W0(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function Y0(u){if(u.G=0,u.ka=[],u.l){const p=x0(u.h);(p.length!=0||u.i.length!=0)&&(P(u.ka,p),P(u.ka,u.i),u.h.i.length=0,T(u.i),u.i.length=0),u.l.ra()}}function J0(u,p,m){var I=m instanceof Fs?dr(m):new Fs(m);if(I.g!="")p&&(I.g=p+"."+I.g),Nu(I,I.s);else{var L=a.location;I=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;var M=new Fs(null);I&&ku(M,I),p&&(M.g=p),L&&Nu(M,L),m&&(M.l=m),I=M}return m=u.D,p=u.ya,m&&p&&Re(I,m,p),Re(I,"VER",u.la),va(u,I),I}function Z0(u,p,m){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new Be(new Du({eb:m})):new Be(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ew(){}t=ew.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ju(){}ju.prototype.g=function(u,p){return new en(u,p)};function en(u,p){_t.call(this),this.g=new z0(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!g(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!g(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Li(this)}w(en,_t),en.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},en.prototype.close=function(){Mf(this.g)},en.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=Pf(u),u=m);p.i.push(new Ok(p.Ya++,u)),p.G==3&&Fu(p)},en.prototype.N=function(){this.g.l=null,delete this.j,Mf(this.g),delete this.g,en.aa.N.call(this)};function tw(u){Rf.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const m in p){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}w(tw,Rf);function nw(){xf.call(this),this.status=1}w(nw,xf);function Li(u){this.g=u}w(Li,ew),Li.prototype.ua=function(){Vt(this.g,"a")},Li.prototype.ta=function(u){Vt(this.g,new tw(u))},Li.prototype.sa=function(u){Vt(this.g,new nw)},Li.prototype.ra=function(){Vt(this.g,"b")},ju.prototype.createWebChannel=ju.prototype.g,en.prototype.send=en.prototype.o,en.prototype.open=en.prototype.m,en.prototype.close=en.prototype.close,Zx=function(){return new ju},Jx=function(){return Ru()},Yx=Vs,Rg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xu.NO_ERROR=0,xu.TIMEOUT=8,xu.HTTP_ERROR=6,Hc=xu,v0.COMPLETE="complete",Xx=v0,f0.EventType=aa,aa.OPEN="a",aa.CLOSE="b",aa.ERROR="c",aa.MESSAGE="d",_t.prototype.listen=_t.prototype.K,Fa=f0,Be.prototype.listenOnce=Be.prototype.L,Be.prototype.getLastError=Be.prototype.Ka,Be.prototype.getLastErrorCode=Be.prototype.Ba,Be.prototype.getStatus=Be.prototype.Z,Be.prototype.getResponseJson=Be.prototype.Oa,Be.prototype.getResponseText=Be.prototype.oa,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Ha,Qx=Be}).apply(typeof mc<"u"?mc:typeof self<"u"?self:typeof window<"u"?window:{});const ES="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rt.UNAUTHENTICATED=new Rt(null),Rt.GOOGLE_CREDENTIALS=new Rt("google-credentials-uid"),Rt.FIRST_PARTY=new Rt("first-party-uid"),Rt.MOCK_USER=new Rt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ea="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi=new Jy("@firebase/firestore");function Ca(){return wi.logLevel}function W(t,...e){if(wi.logLevel<=ae.DEBUG){const n=e.map(t_);wi.debug(`Firestore (${ea}): ${t}`,...n)}}function Fr(t,...e){if(wi.logLevel<=ae.ERROR){const n=e.map(t_);wi.error(`Firestore (${ea}): ${t}`,...n)}}function Vo(t,...e){if(wi.logLevel<=ae.WARN){const n=e.map(t_);wi.warn(`Firestore (${ea}): ${t}`,...n)}}function t_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t="Unexpected state"){const e=`FIRESTORE (${ea}) INTERNAL ASSERTION FAILED: `+t;throw Fr(e),new Error(e)}function _e(t,e){t||J()}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends hr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class J3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Rt.UNAUTHENTICATED))}shutdown(){}}class Z3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class e6{constructor(e){this.t=e,this.currentUser=Rt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_e(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new ui;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ui,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ui)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string"),new eC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string"),new Rt(e)}}class t6{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Rt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class n6{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new t6(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Rt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class r6{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class s6{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){_e(this.o===void 0);const r=i=>{i.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string"),this.R=n.token,new r6(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=i6(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function me(t,e){return t<e?-1:t>e?1:0}function Mo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new tt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ee(e)}static min(){return new ee(new tt(0,0))}static max(){return new ee(new tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n,r){n===void 0?n=0:n>e.length&&J(),r===void 0?r=e.length-n:r>e.length-n&&J(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return $l.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof $l?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ne extends $l{construct(e,n,r){return new Ne(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ne(n)}static emptyPath(){return new Ne([])}}const o6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ft extends $l{construct(e,n,r){return new ft(e,n,r)}static isValidIdentifier(e){return o6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ft(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new K(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new K(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new K(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ft(n)}static emptyPath(){return new ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(Ne.fromString(e))}static fromName(e){return new Q(Ne.fromString(e).popFirst(5))}static empty(){return new Q(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new Ne(e.slice()))}}function a6(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ee.fromTimestamp(r===1e9?new tt(n+1,0):new tt(n,r));return new As(s,Q.empty(),e)}function l6(t){return new As(t.readTime,t.key,-1)}class As{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new As(ee.min(),Q.empty(),-1)}static max(){return new As(ee.max(),Q.empty(),-1)}}function u6(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class h6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fu(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==c6)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function d6(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function pu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}n_.oe=-1;function Yd(t){return t==null}function Gh(t){return t===0&&1/t==-1/0}function f6(t){return typeof t=="number"&&Number.isInteger(t)&&!Gh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function bi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function nC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){this.comparator=e,this.root=n||dt.EMPTY}insert(e,n){return new Ue(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dt.BLACK,null,null))}remove(e){return new Ue(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gc(this.root,e,this.comparator,!1)}getReverseIterator(){return new gc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gc(this.root,e,this.comparator,!0)}}class gc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??dt.RED,this.left=s??dt.EMPTY,this.right=i??dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new dt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return dt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw J();const e=this.left.check();if(e!==this.right.check())throw J();return e+(this.isRed()?0:1)}}dt.EMPTY=null,dt.RED=!0,dt.BLACK=!1;dt.EMPTY=new class{constructor(){this.size=0}get key(){throw J()}get value(){throw J()}get color(){throw J()}get left(){throw J()}get right(){throw J()}copy(e,n,r,s,i){return this}insert(e,n,r){return new dt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new SS(this.data.getIterator())}getIteratorFrom(e){return new SS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof mt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new mt(this.comparator);return n.data=e,n}}class SS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.fields=e,e.sort(ft.comparator)}static empty(){return new ln([])}unionWith(e){let n=new mt(ft.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Mo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new rC("Invalid base64 string: "+i):i}}(e);return new yt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new yt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yt.EMPTY_BYTE_STRING=new yt("");const p6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rs(t){if(_e(!!t),typeof t=="string"){let e=0;const n=p6.exec(t);if(_e(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:He(t.seconds),nanos:He(t.nanos)}}function He(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ei(t){return typeof t=="string"?yt.fromBase64String(t):yt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function s_(t){const e=t.mapValue.fields.__previous_value__;return r_(e)?s_(e):e}function zl(t){const e=Rs(t.mapValue.fields.__local_write_time__.timestampValue);return new tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Wl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Wl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Wl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ti(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?r_(t)?4:y6(t)?9007199254740991:g6(t)?10:11:J()}function ur(t,e){if(t===e)return!0;const n=Ti(t);if(n!==Ti(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return zl(t).isEqual(zl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Rs(s.timestampValue),a=Rs(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Ei(s.bytesValue).isEqual(Ei(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return He(s.geoPointValue.latitude)===He(i.geoPointValue.latitude)&&He(s.geoPointValue.longitude)===He(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return He(s.integerValue)===He(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=He(s.doubleValue),a=He(i.doubleValue);return o===a?Gh(o)===Gh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Mo(t.arrayValue.values||[],e.arrayValue.values||[],ur);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(TS(o)!==TS(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ur(o[l],a[l])))return!1;return!0}(t,e);default:return J()}}function Hl(t,e){return(t.values||[]).find(n=>ur(n,e))!==void 0}function Fo(t,e){if(t===e)return 0;const n=Ti(t),r=Ti(e);if(n!==r)return me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=He(i.integerValue||i.doubleValue),l=He(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return IS(t.timestampValue,e.timestampValue);case 4:return IS(zl(t),zl(e));case 5:return me(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Ei(i),l=Ei(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=me(a[c],l[c]);if(h!==0)return h}return me(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=me(He(i.latitude),He(o.latitude));return a!==0?a:me(He(i.longitude),He(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return PS(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,h;const d=i.fields||{},f=o.fields||{},y=(a=d.value)===null||a===void 0?void 0:a.arrayValue,w=(l=f.value)===null||l===void 0?void 0:l.arrayValue,T=me(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((h=w==null?void 0:w.values)===null||h===void 0?void 0:h.length)||0);return T!==0?T:PS(y,w)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===yc.mapValue&&o===yc.mapValue)return 0;if(i===yc.mapValue)return 1;if(o===yc.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=me(l[d],h[d]);if(f!==0)return f;const y=Fo(a[l[d]],c[h[d]]);if(y!==0)return y}return me(l.length,h.length)}(t.mapValue,e.mapValue);default:throw J()}}function IS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);const n=Rs(t),r=Rs(e),s=me(n.seconds,r.seconds);return s!==0?s:me(n.nanos,r.nanos)}function PS(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Fo(n[s],r[s]);if(i)return i}return me(n.length,r.length)}function Uo(t){return xg(t)}function xg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Rs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ei(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=xg(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${xg(n.fields[o])}`;return s+"}"}(t.mapValue):J()}function Cg(t){return!!t&&"integerValue"in t}function i_(t){return!!t&&"arrayValue"in t}function AS(t){return!!t&&"nullValue"in t}function RS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function qc(t){return!!t&&"mapValue"in t}function g6(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ul(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return bi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ul(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ul(t.arrayValue.values[n]);return e}return Object.assign({},t)}function y6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.value=e}static empty(){return new Gt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!qc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ul(n)}setAll(e){let n=ft.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=ul(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());qc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ur(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];qc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){bi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Gt(ul(this.value))}}function sC(t){const e=[];return bi(t.fields,(n,r)=>{const s=new ft([n]);if(qc(r)){const i=sC(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ct(e,0,ee.min(),ee.min(),ee.min(),Gt.empty(),0)}static newFoundDocument(e,n,r,s){return new Ct(e,1,n,ee.min(),r,s,0)}static newNoDocument(e,n){return new Ct(e,2,n,ee.min(),ee.min(),Gt.empty(),0)}static newUnknownDocument(e,n){return new Ct(e,3,n,ee.min(),ee.min(),Gt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ct&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ct(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,n){this.position=e,this.inclusive=n}}function xS(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Q.comparator(Q.fromName(o.referenceValue),n.key):r=Fo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function CS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ur(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n="asc"){this.field=e,this.dir=n}}function v6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{}class Ze extends iC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new w6(e,n,r):n==="array-contains"?new S6(e,r):n==="in"?new I6(e,r):n==="not-in"?new P6(e,r):n==="array-contains-any"?new A6(e,r):new Ze(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new E6(e,r):new T6(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Fo(n,this.value)):n!==null&&Ti(this.value)===Ti(n)&&this.matchesComparison(Fo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cr extends iC{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new cr(e,n)}matches(e){return oC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function oC(t){return t.op==="and"}function aC(t){return _6(t)&&oC(t)}function _6(t){for(const e of t.filters)if(e instanceof cr)return!1;return!0}function bg(t){if(t instanceof Ze)return t.field.canonicalString()+t.op.toString()+Uo(t.value);if(aC(t))return t.filters.map(e=>bg(e)).join(",");{const e=t.filters.map(n=>bg(n)).join(",");return`${t.op}(${e})`}}function lC(t,e){return t instanceof Ze?function(r,s){return s instanceof Ze&&r.op===s.op&&r.field.isEqual(s.field)&&ur(r.value,s.value)}(t,e):t instanceof cr?function(r,s){return s instanceof cr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&lC(o,s.filters[a]),!0):!1}(t,e):void J()}function uC(t){return t instanceof Ze?function(n){return`${n.field.canonicalString()} ${n.op} ${Uo(n.value)}`}(t):t instanceof cr?function(n){return n.op.toString()+" {"+n.getFilters().map(uC).join(" ,")+"}"}(t):"Filter"}class w6 extends Ze{constructor(e,n,r){super(e,n,r),this.key=Q.fromName(r.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class E6 extends Ze{constructor(e,n){super(e,"in",n),this.keys=cC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class T6 extends Ze{constructor(e,n){super(e,"not-in",n),this.keys=cC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function cC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Q.fromName(r.referenceValue))}class S6 extends Ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return i_(n)&&Hl(n.arrayValue,this.value)}}class I6 extends Ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Hl(this.value.arrayValue,n)}}class P6 extends Ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(Hl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Hl(this.value.arrayValue,n)}}class A6 extends Ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!i_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Hl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function bS(t,e=null,n=[],r=[],s=null,i=null,o=null){return new R6(t,e,n,r,s,i,o)}function o_(t){const e=te(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>bg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Yd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Uo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Uo(r)).join(",")),e.ue=n}return e.ue}function a_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!v6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!lC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!CS(t.startAt,e.startAt)&&CS(t.endAt,e.endAt)}function kg(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function x6(t,e,n,r,s,i,o,a){return new Jd(t,e,n,r,s,i,o,a)}function l_(t){return new Jd(t)}function kS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function C6(t){return t.collectionGroup!==null}function cl(t){const e=te(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new mt(ft.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Xh(i,r))}),n.has(ft.keyField().canonicalString())||e.ce.push(new Xh(ft.keyField(),r))}return e.ce}function ar(t){const e=te(t);return e.le||(e.le=b6(e,cl(t))),e.le}function b6(t,e){if(t.limitType==="F")return bS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Xh(s.field,i)});const n=t.endAt?new Qh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Qh(t.startAt.position,t.startAt.inclusive):null;return bS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ng(t,e,n){return new Jd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Zd(t,e){return a_(ar(t),ar(e))&&t.limitType===e.limitType}function hC(t){return`${o_(ar(t))}|lt:${t.limitType}`}function Bi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>uC(s)).join(", ")}]`),Yd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Uo(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Uo(s)).join(",")),`Target(${r})`}(ar(t))}; limitType=${t.limitType})`}function ef(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Q.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of cl(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=xS(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,cl(r),s)||r.endAt&&!function(o,a,l){const c=xS(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,cl(r),s))}(t,e)}function k6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function dC(t){return(e,n)=>{let r=!1;for(const s of cl(t)){const i=N6(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function N6(t,e,n){const r=t.field.isKeyField()?Q.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Fo(l,c):J()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return J()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){bi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return nC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O6=new Ue(Q.comparator);function Ur(){return O6}const fC=new Ue(Q.comparator);function Ua(...t){let e=fC;for(const n of t)e=e.insert(n.key,n);return e}function pC(t){let e=fC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ti(){return hl()}function mC(){return hl()}function hl(){return new ta(t=>t.toString(),(t,e)=>t.isEqual(e))}const D6=new Ue(Q.comparator),L6=new mt(Q.comparator);function ie(...t){let e=L6;for(const n of t)e=e.add(n);return e}const V6=new mt(me);function M6(){return V6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gh(e)?"-0":e}}function gC(t){return{integerValue:""+t}}function F6(t,e){return f6(e)?gC(e):u_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(){this._=void 0}}function U6(t,e,n){return t instanceof Yh?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&r_(i)&&(i=s_(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof ql?vC(t,e):t instanceof Kl?_C(t,e):function(s,i){const o=yC(s,i),a=NS(o)+NS(s.Pe);return Cg(o)&&Cg(s.Pe)?gC(a):u_(s.serializer,a)}(t,e)}function j6(t,e,n){return t instanceof ql?vC(t,e):t instanceof Kl?_C(t,e):n}function yC(t,e){return t instanceof Jh?function(r){return Cg(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Yh extends tf{}class ql extends tf{constructor(e){super(),this.elements=e}}function vC(t,e){const n=wC(e);for(const r of t.elements)n.some(s=>ur(s,r))||n.push(r);return{arrayValue:{values:n}}}class Kl extends tf{constructor(e){super(),this.elements=e}}function _C(t,e){let n=wC(e);for(const r of t.elements)n=n.filter(s=>!ur(s,r));return{arrayValue:{values:n}}}class Jh extends tf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function NS(t){return He(t.integerValue||t.doubleValue)}function wC(t){return i_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function B6(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ql&&s instanceof ql||r instanceof Kl&&s instanceof Kl?Mo(r.elements,s.elements,ur):r instanceof Jh&&s instanceof Jh?ur(r.Pe,s.Pe):r instanceof Yh&&s instanceof Yh}(t.transform,e.transform)}class $6{constructor(e,n){this.version=e,this.transformResults=n}}class jn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new jn}static exists(e){return new jn(void 0,e)}static updateTime(e){return new jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class nf{}function EC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new c_(t.key,jn.none()):new mu(t.key,t.data,jn.none());{const n=t.data,r=Gt.empty();let s=new mt(ft.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ls(t.key,r,new ln(s.toArray()),jn.none())}}function z6(t,e,n){t instanceof mu?function(s,i,o){const a=s.value.clone(),l=DS(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ls?function(s,i,o){if(!Kc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=DS(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(TC(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function dl(t,e,n,r){return t instanceof mu?function(i,o,a,l){if(!Kc(i.precondition,o))return a;const c=i.value.clone(),h=LS(i.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ls?function(i,o,a,l){if(!Kc(i.precondition,o))return a;const c=LS(i.fieldTransforms,l,o),h=o.data;return h.setAll(TC(i)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(i,o,a){return Kc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function W6(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=yC(r.transform,s||null);i!=null&&(n===null&&(n=Gt.empty()),n.set(r.field,i))}return n||null}function OS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Mo(r,s,(i,o)=>B6(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class mu extends nf{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ls extends nf{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function TC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function DS(t,e,n){const r=new Map;_e(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,j6(o,a,n[s]))}return r}function LS(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,U6(i,o,e))}return r}class c_ extends nf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class H6 extends nf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&z6(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=dl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=dl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=mC();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=EC(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&Mo(this.mutations,e.mutations,(n,r)=>OS(n,r))&&Mo(this.baseMutations,e.baseMutations,(n,r)=>OS(n,r))}}class h_{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){_e(e.mutations.length===r.length);let s=function(){return D6}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new h_(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge,ue;function Q6(t){switch(t){default:return J();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function SC(t){if(t===void 0)return Fr("GRPC error has no .code"),U.UNKNOWN;switch(t){case Ge.OK:return U.OK;case Ge.CANCELLED:return U.CANCELLED;case Ge.UNKNOWN:return U.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return U.INTERNAL;case Ge.UNAVAILABLE:return U.UNAVAILABLE;case Ge.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Ge.NOT_FOUND:return U.NOT_FOUND;case Ge.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Ge.ABORTED:return U.ABORTED;case Ge.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Ge.DATA_LOSS:return U.DATA_LOSS;default:return J()}}(ue=Ge||(Ge={}))[ue.OK=0]="OK",ue[ue.CANCELLED=1]="CANCELLED",ue[ue.UNKNOWN=2]="UNKNOWN",ue[ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ue[ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ue[ue.NOT_FOUND=5]="NOT_FOUND",ue[ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",ue[ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",ue[ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",ue[ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ue[ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ue[ue.ABORTED=10]="ABORTED",ue[ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",ue[ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",ue[ue.INTERNAL=13]="INTERNAL",ue[ue.UNAVAILABLE=14]="UNAVAILABLE",ue[ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y6=new li([4294967295,4294967295],0);function VS(t){const e=X6().encode(t),n=new Gx;return n.update(e),new Uint8Array(n.digest())}function MS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new li([n,r],0),new li([s,i],0)]}class d_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ja(`Invalid padding: ${n}`);if(r<0)throw new ja(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ja(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ja(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=li.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(li.fromNumber(r)));return s.compare(Y6)===1&&(s=new li([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=VS(e),[r,s]=MS(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new d_(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=VS(e),[r,s]=MS(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ja extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,gu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new rf(ee.min(),s,new Ue(me),Ur(),ie())}}class gu{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new gu(r,n,ie(),ie(),ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class IC{constructor(e,n){this.targetId=e,this.me=n}}class PC{constructor(e,n,r=yt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class FS{constructor(){this.fe=0,this.ge=jS(),this.pe=yt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ie(),n=ie(),r=ie();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:J()}}),new gu(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=jS()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,_e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class J6{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ur(),this.qe=US(),this.Qe=new Ue(me)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:J()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(kg(i))if(r===0){const o=new Q(i.path);this.Ue(n,o,Ct.newNoDocument(o,ee.min()))}else _e(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Ei(r).toUint8Array()}catch(l){if(l instanceof rC)return Vo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new d_(o,s,i)}catch(l){return Vo(l instanceof ja?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&kg(a.target)){const l=new Q(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Ct.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ie();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new rf(e,n,this.Qe,this.ke,r);return this.ke=Ur(),this.qe=US(),this.Qe=new Ue(me),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new FS,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new mt(me),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new FS),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function US(){return new Ue(Q.comparator)}function jS(){return new Ue(Q.comparator)}const Z6={asc:"ASCENDING",desc:"DESCENDING"},e9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},t9={and:"AND",or:"OR"};class n9{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Og(t,e){return t.useProto3Json||Yd(e)?e:{value:e}}function Zh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function AC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function r9(t,e){return Zh(t,e.toTimestamp())}function lr(t){return _e(!!t),ee.fromTimestamp(function(n){const r=Rs(n);return new tt(r.seconds,r.nanos)}(t))}function f_(t,e){return Dg(t,e).canonicalString()}function Dg(t,e){const n=function(s){return new Ne(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function RC(t){const e=Ne.fromString(t);return _e(NC(e)),e}function Lg(t,e){return f_(t.databaseId,e.path)}function Fp(t,e){const n=RC(e);if(n.get(1)!==t.databaseId.projectId)throw new K(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(CC(n))}function xC(t,e){return f_(t.databaseId,e)}function s9(t){const e=RC(t);return e.length===4?Ne.emptyPath():CC(e)}function Vg(t){return new Ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function CC(t){return _e(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function BS(t,e,n){return{name:Lg(t,e),fields:n.value.mapValue.fields}}function i9(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:J()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,h){return c.useProto3Json?(_e(h===void 0||typeof h=="string"),yt.fromBase64String(h||"")):(_e(h===void 0||h instanceof Buffer||h instanceof Uint8Array),yt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?U.UNKNOWN:SC(c.code);return new K(h,c.message||"")}(o);n=new PC(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Fp(t,r.document.name),i=lr(r.document.updateTime),o=r.document.createTime?lr(r.document.createTime):ee.min(),a=new Gt({mapValue:{fields:r.document.fields}}),l=Ct.newFoundDocument(s,i,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Gc(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Fp(t,r.document),i=r.readTime?lr(r.readTime):ee.min(),o=Ct.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Gc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Fp(t,r.document),i=r.removedTargetIds||[];n=new Gc([],i,s,null)}else{if(!("filter"in e))return J();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new G6(s,i),a=r.targetId;n=new IC(a,o)}}return n}function o9(t,e){let n;if(e instanceof mu)n={update:BS(t,e.key,e.value)};else if(e instanceof c_)n={delete:Lg(t,e.key)};else if(e instanceof Ls)n={update:BS(t,e.key,e.data),updateMask:m9(e.fieldMask)};else{if(!(e instanceof H6))return J();n={verify:Lg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Yh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ql)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Kl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Jh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw J()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:r9(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:J()}(t,e.precondition)),n}function a9(t,e){return t&&t.length>0?(_e(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?lr(s.updateTime):lr(i);return o.isEqual(ee.min())&&(o=lr(i)),new $6(o,s.transformResults||[])}(n,e))):[]}function l9(t,e){return{documents:[xC(t,e.path)]}}function u9(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=xC(t,s);const i=function(c){if(c.length!==0)return kC(cr.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(h=>function(f){return{field:$i(f.field),direction:d9(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Og(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function c9(t){let e=s9(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){_e(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(d){const f=bC(d);return f instanceof cr&&aC(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(w){return new Xh(zi(w.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,Yd(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,y=d.values||[];return new Qh(y,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,y=d.values||[];return new Qh(y,f)}(n.endAt)),x6(e,s,o,i,a,"F",l,c)}function h9(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function bC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=zi(n.unaryFilter.field);return Ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=zi(n.unaryFilter.field);return Ze.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=zi(n.unaryFilter.field);return Ze.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=zi(n.unaryFilter.field);return Ze.create(o,"!=",{nullValue:"NULL_VALUE"});default:return J()}}(t):t.fieldFilter!==void 0?function(n){return Ze.create(zi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return J()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return cr.create(n.compositeFilter.filters.map(r=>bC(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return J()}}(n.compositeFilter.op))}(t):J()}function d9(t){return Z6[t]}function f9(t){return e9[t]}function p9(t){return t9[t]}function $i(t){return{fieldPath:t.canonicalString()}}function zi(t){return ft.fromServerFormat(t.fieldPath)}function kC(t){return t instanceof Ze?function(n){if(n.op==="=="){if(RS(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NAN"}};if(AS(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(RS(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NOT_NAN"}};if(AS(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$i(n.field),op:f9(n.op),value:n.value}}}(t):t instanceof cr?function(n){const r=n.getFilters().map(s=>kC(s));return r.length===1?r[0]:{compositeFilter:{op:p9(n.op),filters:r}}}(t):J()}function m9(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function NC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,n,r,s,i=ee.min(),o=ee.min(),a=yt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new os(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g9{constructor(e){this.ct=e}}function y9(t){const e=c9({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ng(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v9{constructor(){this.un=new _9}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(As.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(As.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class _9{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new mt(Ne.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new mt(Ne.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new jo(0)}static kn(){return new jo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w9{constructor(){this.changes=new ta(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ct.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E9{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T9{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&dl(r.mutation,s,ln.empty(),tt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ie()){const s=ti();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ua();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ti();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ie()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Ur();const o=hl(),a=function(){return hl()}();return n.forEach((l,c)=>{const h=r.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof Ls)?i=i.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),dl(h.mutation,c,h.mutation.getFieldMask(),tt.now())):o.set(c.key,ln.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new E9(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=hl();let s=new Ue((o,a)=>o-a),i=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||ln.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(s.get(a.batchId)||ie()).add(l);s=s.insert(a.batchId,d)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=mC();h.forEach(f=>{if(!i.has(f)){const y=EC(n.get(f),r.get(f));y!==null&&d.set(f,y),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):C6(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(ti());let a=-1,l=i;return o.next(c=>F.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(h)?F.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,ie())).next(h=>({batchId:a,changes:pC(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(r=>{let s=Ua();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ua();return this.indexManager.getCollectionParents(e,i).next(a=>F.forEach(a,l=>{const c=function(d,f){return new Jd(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Ct.newInvalidDocument(h)))});let a=Ua();return o.forEach((l,c)=>{const h=i.get(l);h!==void 0&&dl(h.mutation,c,ln.empty(),tt.now()),ef(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S9{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:lr(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:y9(s.bundledQuery),readTime:lr(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I9{constructor(){this.overlays=new Ue(Q.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ti();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=ti(),i=n.length+1,o=new Q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ue((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=i.get(c.largestBatchId);h===null&&(h=ti(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=ti(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=s)););return F.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new K6(n,r));let i=this.Ir.get(n);i===void 0&&(i=ie(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P9{constructor(){this.sessionToken=yt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(){this.Tr=new mt(rt.Er),this.dr=new mt(rt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new rt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new rt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Q(new Ne([])),r=new rt(n,e),s=new rt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Q(new Ne([])),r=new rt(n,e),s=new rt(n,e+1);let i=ie();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new rt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class rt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Q.comparator(e.key,n.key)||me(e.wr,n.wr)}static Ar(e,n){return me(e.wr,n.wr)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A9{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new mt(rt.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new q6(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new rt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new rt(n,0),s=new rt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new mt(me);return n.forEach(s=>{const i=new rt(s,0),o=new rt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Q.isDocumentKey(i)||(i=i.child(""));const o=new rt(new Q(i),0);let a=new mt(me);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.wr)),!0)},o),F.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){_e(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,s=>{const i=new rt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new rt(n,0),s=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R9{constructor(e){this.Mr=e,this.docs=function(){return new Ue(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():Ct.newInvalidDocument(n))}getEntries(e,n){let r=Ur();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ct.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Ur();const o=n.path,a=new Q(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||u6(l6(h),r)<=0||(s.has(h.key)||ef(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){J()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new x9(this)}getSize(e){return F.resolve(this.size)}}class x9 extends w9{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C9{constructor(e){this.persistence=e,this.Nr=new ta(n=>o_(n),a_),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new p_,this.targetCount=0,this.kr=jo.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new jo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b9{constructor(e,n){this.qr={},this.overlays={},this.Qr=new n_(0),this.Kr=!1,this.Kr=!0,this.$r=new P9,this.referenceDelegate=e(this),this.Ur=new C9(this),this.indexManager=new v9,this.remoteDocumentCache=function(s){return new R9(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new g9(n),this.Gr=new S9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new I9,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new A9(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const s=new k9(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class k9 extends h6{constructor(e){super(),this.currentSequenceNumber=e}}class m_{constructor(e){this.persistence=e,this.Jr=new p_,this.Yr=null}static Zr(e){return new m_(e)}get Xr(){if(this.Yr)return this.Yr;throw J()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const s=Q.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ie(),s=ie();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new g_(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N9{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O9{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return zL()?8:d6(Ot())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new N9;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Ca()<=ae.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Bi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(Ca()<=ae.DEBUG&&W("QueryEngine","Query:",Bi(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Ca()<=ae.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Bi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ar(n))):F.resolve())}Yi(e,n){if(kS(n))return F.resolve(null);let r=ar(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ng(n,null,"F"),r=ar(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ie(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,Ng(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,s){return kS(n)||s.isEqual(ee.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?F.resolve(null):(Ca()<=ae.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Bi(n)),this.rs(e,o,n,a6(s,-1)).next(a=>a))})}ts(e,n){let r=new mt(dC(e));return n.forEach((s,i)=>{ef(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Ca()<=ae.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Bi(n)),this.Ji.getDocumentsMatchingQuery(e,n,As.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D9{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ue(me),this._s=new ta(i=>o_(i),a_),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new T9(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function L9(t,e,n,r){return new D9(t,e,n,r)}async function OC(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=ie();for(const c of s){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of i){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function V9(t,e){const n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,f=d.keys();let y=F.resolve();return f.forEach(w=>{y=y.next(()=>h.getEntry(l,w)).next(T=>{const P=c.docVersions.get(w);_e(P!==null),T.version.compareTo(P)<0&&(d.applyToRemoteDocument(T,c),T.isValidDocument()&&(T.setReadTime(c.commitVersion),h.addEntry(T)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ie();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function DC(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function M9(t,e){const n=te(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const f=s.get(d);if(!f)return;a.push(n.Ur.removeMatchingKeys(i,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(i,h.addedDocuments,d)));let y=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?y=y.withResumeToken(yt.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),s=s.insert(d,y),function(T,P,E){return T.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(f,y,h)&&a.push(n.Ur.updateTargetData(i,y))});let l=Ur(),c=ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(F9(i,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!r.isEqual(ee.min())){const h=n.Ur.getLastRemoteSnapshotVersion(i).next(d=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return F.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.os=s,i))}function F9(t,e,n){let r=ie(),s=ie();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Ur();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ee.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):W("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function U9(t,e){const n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function j9(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new os(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Mg(t,e,n){const r=te(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!pu(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function $S(t,e,n){const r=te(t);let s=ee.min(),i=ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=te(l),f=d._s.get(h);return f!==void 0?F.resolve(d.os.get(f)):d.Ur.getTargetData(c,h)}(r,o,ar(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ee.min(),n?i:ie())).next(a=>(B9(r,k6(e),a),{documents:a,Ts:i})))}function B9(t,e,n){let r=t.us.get(e)||ee.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class zS{constructor(){this.activeTargetIds=M6()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $9{constructor(){this.so=new zS,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new zS,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z9{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vc=null;function Up(){return vc===null?vc=function(){return 268435456+Math.round(2147483648*Math.random())}():vc++,"0x"+vc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H9{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const It="WebChannelConnection";class q9 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=Up(),l=this.xo(n,r.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,l,c,s).then(h=>(W("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Vo("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",s),h})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ea}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=W9[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Up();return new Promise((o,a)=>{const l=new Qx;l.setWithCredentials(!0),l.listenOnce(Xx.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Hc.NO_ERROR:const h=l.getResponseJson();W(It,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case Hc.TIMEOUT:W(It,`RPC '${e}' ${i} timed out`),a(new K(U.DEADLINE_EXCEEDED,"Request time out"));break;case Hc.HTTP_ERROR:const d=l.getStatus();if(W(It,`RPC '${e}' ${i} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const y=f==null?void 0:f.error;if(y&&y.status&&y.message){const w=function(P){const E=P.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(E)>=0?E:U.UNKNOWN}(y.status);a(new K(w,y.message))}else a(new K(U.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new K(U.UNAVAILABLE,"Connection failed."));break;default:J()}}finally{W(It,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);W(It,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=Up(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Zx(),a=Jx(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");W(It,`Creating RPC '${e}' stream ${s}: ${h}`,l);const d=o.createWebChannel(h,l);let f=!1,y=!1;const w=new H9({Io:P=>{y?W(It,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(f||(W(It,`Opening RPC '${e}' stream ${s} transport.`),d.open(),f=!0),W(It,`RPC '${e}' stream ${s} sending:`,P),d.send(P))},To:()=>d.close()}),T=(P,E,g)=>{P.listen(E,_=>{try{g(_)}catch(x){setTimeout(()=>{throw x},0)}})};return T(d,Fa.EventType.OPEN,()=>{y||(W(It,`RPC '${e}' stream ${s} transport opened.`),w.yo())}),T(d,Fa.EventType.CLOSE,()=>{y||(y=!0,W(It,`RPC '${e}' stream ${s} transport closed`),w.So())}),T(d,Fa.EventType.ERROR,P=>{y||(y=!0,Vo(It,`RPC '${e}' stream ${s} transport errored:`,P),w.So(new K(U.UNAVAILABLE,"The operation could not be completed")))}),T(d,Fa.EventType.MESSAGE,P=>{var E;if(!y){const g=P.data[0];_e(!!g);const _=g,x=_.error||((E=_[0])===null||E===void 0?void 0:E.error);if(x){W(It,`RPC '${e}' stream ${s} received error:`,x);const D=x.status;let V=function(A){const C=Ge[A];if(C!==void 0)return SC(C)}(D),S=x.message;V===void 0&&(V=U.INTERNAL,S="Unknown error status: "+D+" with message "+x.message),y=!0,w.So(new K(V,S)),d.close()}else W(It,`RPC '${e}' stream ${s} received:`,g),w.bo(g)}}),T(a,Yx.STAT_EVENT,P=>{P.stat===Rg.PROXY?W(It,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===Rg.NOPROXY&&W(It,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}}function jp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sf(t){return new n9(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&W("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,n,r,s,i,o,a,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new LC(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Fr(n.toString()),Fr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new K(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class K9 extends VC{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=i9(this.serializer,e),r=function(i){if(!("targetChange"in i))return ee.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?lr(o.readTime):ee.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Vg(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=kg(l)?{documents:l9(i,l)}:{query:u9(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=AC(i,o.resumeToken);const c=Og(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ee.min())>0){a.readTime=Zh(i,o.snapshotVersion.toTimestamp());const c=Og(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=h9(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Vg(this.serializer),n.removeTarget=e,this.a_(n)}}class G9 extends VC{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return _e(!!e.streamToken),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){_e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=a9(e.writeResults,e.commitTime),r=lr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Vg(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>o9(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q9 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new K(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Dg(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(U.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Dg(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(U.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class X9{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Fr(n),this.D_=!1):W("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y9{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{ki(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=te(l);c.L_.add(4),await yu(c),c.q_.set("Unknown"),c.L_.delete(4),await of(c)}(this))})}),this.q_=new X9(r,s)}}async function of(t){if(ki(t))for(const e of t.B_)await e(!0)}async function yu(t){for(const e of t.B_)await e(!1)}function MC(t,e){const n=te(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),w_(n)?__(n):na(n).r_()&&v_(n,e))}function y_(t,e){const n=te(t),r=na(n);n.N_.delete(e),r.r_()&&FC(n,e),n.N_.size===0&&(r.r_()?r.o_():ki(n)&&n.q_.set("Unknown"))}function v_(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}na(t).A_(e)}function FC(t,e){t.Q_.xe(e),na(t).R_(e)}function __(t){t.Q_=new J6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),na(t).start(),t.q_.v_()}function w_(t){return ki(t)&&!na(t).n_()&&t.N_.size>0}function ki(t){return te(t).L_.size===0}function UC(t){t.Q_=void 0}async function J9(t){t.q_.set("Online")}async function Z9(t){t.N_.forEach((e,n)=>{v_(t,e)})}async function e5(t,e){UC(t),w_(t)?(t.q_.M_(e),__(t)):t.q_.set("Unknown")}async function t5(t,e,n){if(t.q_.set("Online"),e instanceof PC&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ed(t,r)}else if(e instanceof Gc?t.Q_.Ke(e):e instanceof IC?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ee.min()))try{const r=await DC(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.N_.get(c);h&&i.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=i.N_.get(l);if(!h)return;i.N_.set(l,h.withResumeToken(yt.EMPTY_BYTE_STRING,h.snapshotVersion)),FC(i,l);const d=new os(h.target,l,c,h.sequenceNumber);v_(i,d)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await ed(t,r)}}async function ed(t,e,n){if(!pu(e))throw e;t.L_.add(1),await yu(t),t.q_.set("Offline"),n||(n=()=>DC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await of(t)})}function jC(t,e){return e().catch(n=>ed(t,n,e))}async function af(t){const e=te(t),n=xs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;n5(e);)try{const s=await U9(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,r5(e,s)}catch(s){await ed(e,s)}BC(e)&&$C(e)}function n5(t){return ki(t)&&t.O_.length<10}function r5(t,e){t.O_.push(e);const n=xs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function BC(t){return ki(t)&&!xs(t).n_()&&t.O_.length>0}function $C(t){xs(t).start()}async function s5(t){xs(t).p_()}async function i5(t){const e=xs(t);for(const n of t.O_)e.m_(n.mutations)}async function o5(t,e,n){const r=t.O_.shift(),s=h_.from(r,e,n);await jC(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await af(t)}async function a5(t,e){e&&xs(t).V_&&await async function(r,s){if(function(o){return Q6(o)&&o!==U.ABORTED}(s.code)){const i=r.O_.shift();xs(r).s_(),await jC(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await af(r)}}(t,e),BC(t)&&$C(t)}async function HS(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=ki(n);n.L_.add(3),await yu(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await of(n)}async function l5(t,e){const n=te(t);e?(n.L_.delete(2),await of(n)):e||(n.L_.add(2),await yu(n),n.q_.set("Unknown"))}function na(t){return t.K_||(t.K_=function(n,r,s){const i=te(n);return i.w_(),new K9(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:J9.bind(null,t),Ro:Z9.bind(null,t),mo:e5.bind(null,t),d_:t5.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),w_(t)?__(t):t.q_.set("Unknown")):(await t.K_.stop(),UC(t))})),t.K_}function xs(t){return t.U_||(t.U_=function(n,r,s){const i=te(n);return i.w_(),new G9(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:s5.bind(null,t),mo:a5.bind(null,t),f_:i5.bind(null,t),g_:o5.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await af(t)):(await t.U_.stop(),t.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new E_(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function T_(t,e){if(Fr("AsyncQueue",`${e}: ${t}`),pu(t))return new K(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Q.comparator(n.key,r.key):(n,r)=>Q.comparator(n.key,r.key),this.keyedMap=Ua(),this.sortedSet=new Ue(this.comparator)}static emptySet(e){return new wo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof wo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new wo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(){this.W_=new Ue(Q.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):J():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Bo{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Bo(e,n,wo.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class c5{constructor(){this.queries=KS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=te(n),i=s.queries;s.queries=KS(),i.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new K(U.ABORTED,"Firestore shutting down"))}}function KS(){return new ta(t=>hC(t),Zd)}async function h5(t,e){const n=te(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new u5,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=T_(o,`Initialization of query '${Bi(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&S_(n)}async function d5(t,e){const n=te(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function f5(t,e){const n=te(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&S_(n)}function p5(t,e,n){const r=te(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function S_(t){t.Y_.forEach(e=>{e.next()})}var Fg,GS;(GS=Fg||(Fg={})).ea="default",GS.Cache="cache";class m5{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Bo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Bo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Fg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e){this.key=e}}class WC{constructor(e){this.key=e}}class g5{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ie(),this.mutatedKeys=ie(),this.Aa=dC(e),this.Ra=new wo(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new qS,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,d)=>{const f=s.get(h),y=ef(this.query,d)?d:null,w=!!f&&this.mutatedKeys.has(f.key),T=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let P=!1;f&&y?f.data.isEqual(y.data)?w!==T&&(r.track({type:3,doc:y}),P=!0):this.ga(f,y)||(r.track({type:2,doc:y}),P=!0,(l&&this.Aa(y,l)>0||c&&this.Aa(y,c)<0)&&(a=!0)):!f&&y?(r.track({type:0,doc:y}),P=!0):f&&!y&&(r.track({type:1,doc:f}),P=!0,(l||c)&&(a=!0)),P&&(y?(o=o.add(y),i=T?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(y,w){const T=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J()}};return T(y)-T(w)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Bo(this.query,e.Ra,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new qS,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new WC(r))}),this.da.forEach(r=>{e.has(r)||n.push(new zC(r))}),n}ba(e){this.Ta=e.Ts,this.da=ie();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Bo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class y5{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class v5{constructor(e){this.key=e,this.va=!1}}class _5{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ta(a=>hC(a),Zd),this.Ma=new Map,this.xa=new Set,this.Oa=new Ue(Q.comparator),this.Na=new Map,this.La=new p_,this.Ba={},this.ka=new Map,this.qa=jo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function w5(t,e,n=!0){const r=XC(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await HC(r,e,n,!0),s}async function E5(t,e){const n=XC(t);await HC(n,e,!0,!1)}async function HC(t,e,n,r){const s=await j9(t.localStore,ar(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await T5(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&MC(t.remoteStore,s),a}async function T5(t,e,n,r,s){t.Ka=(d,f,y)=>async function(T,P,E,g){let _=P.view.ma(E);_.ns&&(_=await $S(T.localStore,P.query,!1).then(({documents:S})=>P.view.ma(S,_)));const x=g&&g.targetChanges.get(P.targetId),D=g&&g.targetMismatches.get(P.targetId)!=null,V=P.view.applyChanges(_,T.isPrimaryClient,x,D);return XS(T,P.targetId,V.wa),V.snapshot}(t,d,f,y);const i=await $S(t.localStore,e,!0),o=new g5(e,i.Ts),a=o.ma(i.documents),l=gu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);XS(t,n,c.wa);const h=new y5(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function S5(t,e,n){const r=te(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Zd(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Mg(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&y_(r.remoteStore,s.targetId),Ug(r,s.targetId)}).catch(fu)):(Ug(r,s.targetId),await Mg(r.localStore,s.targetId,!0))}async function I5(t,e){const n=te(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),y_(n.remoteStore,r.targetId))}async function P5(t,e,n){const r=N5(t);try{const s=await function(o,a){const l=te(o),c=tt.now(),h=a.reduce((y,w)=>y.add(w.key),ie());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let w=Ur(),T=ie();return l.cs.getEntries(y,h).next(P=>{w=P,w.forEach((E,g)=>{g.isValidDocument()||(T=T.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,w)).next(P=>{d=P;const E=[];for(const g of a){const _=W6(g,d.get(g.key).overlayedDocument);_!=null&&E.push(new Ls(g.key,_,sC(_.value.mapValue),jn.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,E,a)}).next(P=>{f=P;const E=P.applyToLocalDocumentSet(d,T);return l.documentOverlayCache.saveOverlays(y,P.batchId,E)})}).then(()=>({batchId:f.batchId,changes:pC(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Ue(me)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await vu(r,s.changes),await af(r.remoteStore)}catch(s){const i=T_(s,"Failed to persist write");n.reject(i)}}async function qC(t,e){const n=te(t);try{const r=await M9(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(_e(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?_e(o.va):s.removedDocuments.size>0&&(_e(o.va),o.va=!1))}),await vu(n,r,e)}catch(r){await fu(r)}}function QS(t,e,n){const r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=te(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const f of d.j_)f.Z_(a)&&(c=!0)}),c&&S_(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function A5(t,e,n){const r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Ue(Q.comparator);o=o.insert(i,Ct.newNoDocument(i,ee.min()));const a=ie().add(i),l=new rf(ee.min(),new Map,new Ue(me),o,a);await qC(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),I_(r)}else await Mg(r.localStore,e,!1).then(()=>Ug(r,e,n)).catch(fu)}async function R5(t,e){const n=te(t),r=e.batch.batchId;try{const s=await V9(n.localStore,e);GC(n,r,null),KC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await vu(n,s)}catch(s){await fu(s)}}async function x5(t,e,n){const r=te(t);try{const s=await function(o,a){const l=te(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(_e(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);GC(r,e,n),KC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await vu(r,s)}catch(s){await fu(s)}}function KC(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function GC(t,e,n){const r=te(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Ug(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||QC(t,r)})}function QC(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(y_(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),I_(t))}function XS(t,e,n){for(const r of n)r instanceof zC?(t.La.addReference(r.key,e),C5(t,r)):r instanceof WC?(W("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||QC(t,r.key)):J()}function C5(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(W("SyncEngine","New document in limbo: "+n),t.xa.add(r),I_(t))}function I_(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Q(Ne.fromString(e)),r=t.qa.next();t.Na.set(r,new v5(n)),t.Oa=t.Oa.insert(n,r),MC(t.remoteStore,new os(ar(l_(n.path)),r,"TargetPurposeLimboResolution",n_.oe))}}async function vu(t,e,n){const r=te(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){s.push(c);const d=g_.Wi(l.targetId,c);i.push(d)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,c){const h=te(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>F.forEach(c,f=>F.forEach(f.$i,y=>h.persistence.referenceDelegate.addReference(d,f.targetId,y)).next(()=>F.forEach(f.Ui,y=>h.persistence.referenceDelegate.removeReference(d,f.targetId,y)))))}catch(d){if(!pu(d))throw d;W("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const y=h.os.get(f),w=y.snapshotVersion,T=y.withLastLimboFreeSnapshotVersion(w);h.os=h.os.insert(f,T)}}}(r.localStore,i))}async function b5(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await OC(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(l=>{l.reject(new K(U.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await vu(n,r.hs)}}function k5(t,e){const n=te(t),r=n.Na.get(e);if(r&&r.va)return ie().add(r.key);{let s=ie();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function XC(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=qC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=k5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=A5.bind(null,e),e.Ca.d_=f5.bind(null,e.eventManager),e.Ca.$a=p5.bind(null,e.eventManager),e}function N5(t){const e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=R5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=x5.bind(null,e),e}class td{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sf(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return L9(this.persistence,new O9,e.initialUser,this.serializer)}Ga(e){return new b9(m_.Zr,this.serializer)}Wa(e){return new $9}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}td.provider={build:()=>new td};class jg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>QS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=b5.bind(null,this.syncEngine),await l5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new c5}()}createDatastore(e){const n=sf(e.databaseInfo.databaseId),r=function(i){return new q9(i)}(e.databaseInfo);return function(i,o,a,l){return new Q9(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new Y9(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>QS(this.syncEngine,n,0),function(){return WS.D()?new WS:new z9}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,h){const d=new _5(s,i,o,a,l,c);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=te(s);W("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await yu(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}jg.provider={build:()=>new jg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Fr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Rt.UNAUTHENTICATED,this.clientId=tC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{W("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=T_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Bp(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await OC(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function YS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await L5(t);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>HS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>HS(e.remoteStore,s)),t._onlineComponents=e}async function L5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await Bp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Vo("Error using user provided cache. Falling back to memory cache: "+n),await Bp(t,new td)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await Bp(t,new td);return t._offlineComponents}async function YC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await YS(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await YS(t,new jg))),t._onlineComponents}function V5(t){return YC(t).then(e=>e.syncEngine)}async function JS(t){const e=await YC(t),n=e.eventManager;return n.onListen=w5.bind(null,e.syncEngine),n.onUnlisten=S5.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=E5.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=I5.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(t,e,n){if(!n)throw new K(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function M5(t,e,n,r){if(e===!0&&r===!0)throw new K(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function e1(t){if(!Q.isDocumentKey(t))throw new K(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function t1(t){if(Q.isDocumentKey(t))throw new K(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function P_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J()}function vs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=P_(t);throw new K(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}M5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lf{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new n1({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new n1(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new J3;switch(r.type){case"firstParty":return new n6(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=ZS.get(n);r&&(W("ComponentProvider","Removing Datastore"),ZS.delete(n),r.terminate())}(this),Promise.resolve()}}function F5(t,e,n,r={}){var s;const i=(t=vs(t,lf))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Rt.MOCK_USER;else{a=ZP(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new K(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Rt(c)}t._authCredentials=new Z3(new eC(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new uf(this.firestore,e,this._query)}}class cn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _s(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cn(this.firestore,e,this._key)}}class _s extends uf{constructor(e,n,r){super(e,n,l_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cn(this.firestore,null,new Q(e))}withConverter(e){return new _s(this.firestore,e,this._path)}}function Gl(t,e,...n){if(t=Ae(t),ZC("collection","path",e),t instanceof lf){const r=Ne.fromString(e,...n);return t1(r),new _s(t,null,r)}{if(!(t instanceof cn||t instanceof _s))throw new K(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return t1(r),new _s(t.firestore,null,r)}}function Ks(t,e,...n){if(t=Ae(t),arguments.length===1&&(e=tC.newId()),ZC("doc","path",e),t instanceof lf){const r=Ne.fromString(e,...n);return e1(r),new cn(t,null,new Q(r))}{if(!(t instanceof cn||t instanceof _s))throw new K(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return e1(r),new cn(t.firestore,t instanceof _s?t.converter:null,new Q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new LC(this,"async_queue_retry"),this.Vu=()=>{const r=jp();r&&W("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=jp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=jp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new ui;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!pu(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Fr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=E_.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&J()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function s1(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class $o extends lf{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new r1,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new r1(e),this._firestoreClient=void 0,await e}}}function U5(t,e){const n=typeof t=="object"?t:ev(),r=typeof t=="string"?t:"(default)",s=Rd(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=XP("firestore");i&&F5(s,...i)}return s}function eb(t){if(t._terminated)throw new K(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||j5(t),t._firestoreClient}function j5(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,h){return new m6(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,JC(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new D5(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zo(yt.fromBase64String(e))}catch(n){throw new K(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zo(yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B5=/^__.*__$/;class $5{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ls(e,this.data,this.fieldMask,n,this.fieldTransforms):new mu(e,this.data,n,this.fieldTransforms)}}class tb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ls(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function nb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J()}}class C_{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new C_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return nd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(nb(this.Cu)&&B5.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class z5{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||sf(e)}Qu(e,n,r,s=!1){return new C_({Cu:e,methodName:n,qu:r,path:ft.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rb(t){const e=t._freezeSettings(),n=sf(t._databaseId);return new z5(t._databaseId,!!e.ignoreUndefinedProperties,n)}function W5(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);b_("Data must be an object, but it was:",o,r);const a=sb(r,o);let l,c;if(i.merge)l=new ln(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const f=Bg(e,d,n);if(!o.contains(f))throw new K(U.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);ob(h,f)||h.push(f)}l=new ln(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new $5(new Gt(a),l,c)}class hf extends A_{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hf}}function H5(t,e,n,r){const s=t.Qu(1,e,n);b_("Data must be an object, but it was:",s,r);const i=[],o=Gt.empty();bi(r,(l,c)=>{const h=k_(e,l,n);c=Ae(c);const d=s.Nu(h);if(c instanceof hf)i.push(h);else{const f=df(c,d);f!=null&&(i.push(h),o.set(h,f))}});const a=new ln(i);return new tb(o,a,s.fieldTransforms)}function q5(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[Bg(e,r,n)],l=[s];if(i.length%2!=0)throw new K(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(Bg(e,i[f])),l.push(i[f+1]);const c=[],h=Gt.empty();for(let f=a.length-1;f>=0;--f)if(!ob(c,a[f])){const y=a[f];let w=l[f];w=Ae(w);const T=o.Nu(y);if(w instanceof hf)c.push(y);else{const P=df(w,T);P!=null&&(c.push(y),h.set(y,P))}}const d=new ln(c);return new tb(h,d,o.fieldTransforms)}function df(t,e){if(ib(t=Ae(t)))return b_("Unsupported field value:",e,t),sb(t,e);if(t instanceof A_)return function(r,s){if(!nb(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=df(a,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ae(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return F6(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=tt.fromDate(r);return{timestampValue:Zh(s.serializer,i)}}if(r instanceof tt){const i=new tt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Zh(s.serializer,i)}}if(r instanceof R_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zo)return{bytesValue:AC(s.serializer,r._byteString)};if(r instanceof cn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:f_(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof x_)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return u_(a.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${P_(r)}`)}(t,e)}function sb(t,e){const n={};return nC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bi(t,(r,s)=>{const i=df(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function ib(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof tt||t instanceof R_||t instanceof zo||t instanceof cn||t instanceof A_||t instanceof x_)}function b_(t,e,n){if(!ib(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=P_(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Bg(t,e,n){if((e=Ae(e))instanceof cf)return e._internalPath;if(typeof e=="string")return k_(t,e);throw nd("Field path arguments must be of type string or ",t,!1,void 0,n)}const K5=new RegExp("[~\\*/\\[\\]]");function k_(t,e,n){if(e.search(K5)>=0)throw nd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new cf(...e.split("."))._internalPath}catch{throw nd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function nd(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new K(U.INVALID_ARGUMENT,a+t+l)}function ob(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new cn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new G5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(lb("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class G5 extends ab{data(){return super.data()}}function lb(t,e){return typeof e=="string"?k_(t,e):e instanceof cf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q5(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class X5{convertValue(e,n="none"){switch(Ti(e)){case 0:return null;case 1:return e.booleanValue;case 2:return He(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ei(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw J()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return bi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>He(o.doubleValue));return new x_(i)}convertGeoPoint(e){return new R_(He(e.latitude),He(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=s_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(zl(e));default:return null}}convertTimestamp(e){const n=Rs(e);return new tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ne.fromString(e);_e(NC(r));const s=new Wl(r.get(1),r.get(3)),i=new Q(r.popFirst(5));return s.isEqual(n)||Fr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y5(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ub extends ab{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Qc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(lb("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Qc extends ub{data(e={}){return super.data(e)}}class J5{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ba(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Qc(this._firestore,this._userDataWriter,r.key,r,new Ba(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Qc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ba(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Qc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ba(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:Z5(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Z5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J()}}class cb extends X5{constructor(e){super(),this.firestore=e}convertBytes(e){return new zo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new cn(this.firestore,null,n)}}function _c(t,e,n,...r){t=vs(t,cn);const s=vs(t.firestore,$o),i=rb(s);let o;return o=typeof(e=Ae(e))=="string"||e instanceof cf?q5(i,"updateDoc",t._key,e,n,r):H5(i,"updateDoc",t._key,e),O_(s,[o.toMutation(t._key,jn.exists(!0))])}function hb(t){return O_(vs(t.firestore,$o),[new c_(t._key,jn.none())])}function db(t,e){const n=vs(t.firestore,$o),r=Ks(t),s=Y5(t.converter,e);return O_(n,[W5(rb(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,jn.exists(!1))]).then(()=>r)}function N_(t,...e){var n,r,s;t=Ae(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||s1(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(s1(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(s=d.complete)===null||s===void 0?void 0:s.bind(d)}let l,c,h;if(t instanceof cn)c=vs(t.firestore,$o),h=l_(t._key.path),l={next:d=>{e[o]&&e[o](ez(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=vs(t,uf);c=vs(d.firestore,$o),h=d._query;const f=new cb(c);l={next:y=>{e[o]&&e[o](new J5(c,f,d,y))},error:e[o+1],complete:e[o+2]},Q5(t._query)}return function(f,y,w,T){const P=new O5(T),E=new m5(y,P,w);return f.asyncQueue.enqueueAndForget(async()=>h5(await JS(f),E)),()=>{P.Za(),f.asyncQueue.enqueueAndForget(async()=>d5(await JS(f),E))}}(eb(c),h,a,l)}function O_(t,e){return function(r,s){const i=new ui;return r.asyncQueue.enqueueAndForget(async()=>P5(await V5(r),s,i)),i.promise}(eb(t),e)}function ez(t,e,n){const r=n.docs.get(e._key),s=new cb(t);return new ub(t,s,e._key,r,new Ba(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){ea=s})(xi),mi(new Ts("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new $o(new e6(r.getProvider("auth-internal")),new s6(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new K(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wl(c.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),nr(ES,"4.7.3",e),nr(ES,"4.7.3","esm2017")})();const $g="RFC3986",zg={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:t=>String(t)},tz="RFC1738",nz=Array.isArray,Hn=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),$p=1024,rz=(t,e,n,r,s)=>{if(t.length===0)return t;let i=t;if(typeof t=="symbol"?i=Symbol.prototype.toString.call(t):typeof t!="string"&&(i=String(t)),n==="iso-8859-1")return escape(i).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});let o="";for(let a=0;a<i.length;a+=$p){const l=i.length>=$p?i.slice(a,a+$p):i,c=[];for(let h=0;h<l.length;++h){let d=l.charCodeAt(h);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||s===tz&&(d===40||d===41)){c[c.length]=l.charAt(h);continue}if(d<128){c[c.length]=Hn[d];continue}if(d<2048){c[c.length]=Hn[192|d>>6]+Hn[128|d&63];continue}if(d<55296||d>=57344){c[c.length]=Hn[224|d>>12]+Hn[128|d>>6&63]+Hn[128|d&63];continue}h+=1,d=65536+((d&1023)<<10|l.charCodeAt(h)&1023),c[c.length]=Hn[240|d>>18]+Hn[128|d>>12&63]+Hn[128|d>>6&63]+Hn[128|d&63]}o+=c.join("")}return o};function sz(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function i1(t,e){if(nz(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const iz=Object.prototype.hasOwnProperty,fb={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},Kn=Array.isArray,oz=Array.prototype.push,pb=function(t,e){oz.apply(t,Kn(e)?e:[e])},az=Date.prototype.toISOString,Ye={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:rz,encodeValuesOnly:!1,format:$g,formatter:zg[$g],indices:!1,serializeDate(t){return az.call(t)},skipNulls:!1,strictNullHandling:!1};function lz(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const zp={};function mb(t,e,n,r,s,i,o,a,l,c,h,d,f,y,w,T,P,E){let g=t,_=E,x=0,D=!1;for(;(_=_.get(zp))!==void 0&&!D;){const C=_.get(t);if(x+=1,typeof C<"u"){if(C===x)throw new RangeError("Cyclic object value");D=!0}typeof _.get(zp)>"u"&&(x=0)}if(typeof c=="function"?g=c(e,g):g instanceof Date?g=f==null?void 0:f(g):n==="comma"&&Kn(g)&&(g=i1(g,function(C){return C instanceof Date?f==null?void 0:f(C):C})),g===null){if(i)return l&&!T?l(e,Ye.encoder,P,"key",y):e;g=""}if(lz(g)||sz(g)){if(l){const C=T?e:l(e,Ye.encoder,P,"key",y);return[(w==null?void 0:w(C))+"="+(w==null?void 0:w(l(g,Ye.encoder,P,"value",y)))]}return[(w==null?void 0:w(e))+"="+(w==null?void 0:w(String(g)))]}const V=[];if(typeof g>"u")return V;let S;if(n==="comma"&&Kn(g))T&&l&&(g=i1(g,l)),S=[{value:g.length>0?g.join(",")||null:void 0}];else if(Kn(c))S=c;else{const C=Object.keys(g);S=h?C.sort(h):C}const v=a?String(e).replace(/\./g,"%2E"):String(e),A=r&&Kn(g)&&g.length===1?v+"[]":v;if(s&&Kn(g)&&g.length===0)return A+"[]";for(let C=0;C<S.length;++C){const R=S[C],N=typeof R=="object"&&typeof R.value<"u"?R.value:g[R];if(o&&N===null)continue;const b=d&&a?R.replace(/\./g,"%2E"):R,Z=Kn(g)?typeof n=="function"?n(A,b):A:A+(d?"."+b:"["+b+"]");E.set(t,x);const de=new WeakMap;de.set(zp,E),pb(V,mb(N,Z,n,r,s,i,o,a,n==="comma"&&T&&Kn(g)?null:l,c,h,d,f,y,w,T,P,de))}return V}function uz(t=Ye){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||Ye.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=$g;if(typeof t.format<"u"){if(!iz.call(zg,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=zg[n];let s=Ye.filter;(typeof t.filter=="function"||Kn(t.filter))&&(s=t.filter);let i;if(t.arrayFormat&&t.arrayFormat in fb?i=t.arrayFormat:"indices"in t?i=t.indices?"indices":"repeat":i=Ye.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Ye.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Ye.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Ye.allowEmptyArrays,arrayFormat:i,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Ye.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Ye.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Ye.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Ye.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Ye.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Ye.encodeValuesOnly,filter:s,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Ye.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Ye.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Ye.strictNullHandling}}function cz(t,e={}){let n=t;const r=uz(e);let s,i;typeof r.filter=="function"?(i=r.filter,n=i("",n)):Kn(r.filter)&&(i=r.filter,s=i);const o=[];if(typeof n!="object"||n===null)return"";const a=fb[r.arrayFormat],l=a==="comma"&&r.commaRoundTrip;s||(s=Object.keys(n)),r.sort&&s.sort(r.sort);const c=new WeakMap;for(let f=0;f<s.length;++f){const y=s[f];r.skipNulls&&n[y]===null||pb(o,mb(n[y],y,a,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,c))}const h=o.join(r.delimiter);let d=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),h.length>0?d+h:""}const Wi="4.73.1";let o1=!1,fl,gb,yb,Wg,vb,_b,wb,Eb,Tb;function hz(t,e={auto:!1}){if(o1)throw new Error(`you must \`import 'openai/shims/${t.kind}'\` before importing anything else from openai`);if(fl)throw new Error(`can't \`import 'openai/shims/${t.kind}'\` after \`import 'openai/shims/${fl}'\``);o1=e.auto,fl=t.kind,gb=t.fetch,yb=t.FormData,Wg=t.File,vb=t.ReadableStream,_b=t.getMultipartRequestOptions,wb=t.getDefaultAgent,Eb=t.fileFromPath,Tb=t.isFsReadStream}class dz{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function fz({manuallyImported:t}={}){const e=t?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,s,i;try{n=fetch,r=Request,s=Response,i=Headers}catch(o){throw new Error(`this environment is missing the following Web Fetch API type: ${o.message}. ${e}`)}return{kind:"web",fetch:n,Request:r,Response:s,Headers:i,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(o,a)=>({...a,body:new dz(o)}),getDefaultAgent:o=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:o=>!1}}fl||hz(fz(),{auto:!0});class se extends Error{}class vt extends se{constructor(e,n,r,s){super(`${vt.makeMessage(e,n,r)}`),this.status=e,this.headers=s,this.request_id=s==null?void 0:s["x-request-id"];const i=n;this.error=i,this.code=i==null?void 0:i.code,this.param=i==null?void 0:i.param,this.type=i==null?void 0:i.type}static makeMessage(e,n,r){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,r,s){if(!e)return new ff({message:r,cause:qg(n)});const i=n==null?void 0:n.error;return e===400?new Sb(e,i,r,s):e===401?new Ib(e,i,r,s):e===403?new Pb(e,i,r,s):e===404?new Ab(e,i,r,s):e===409?new Rb(e,i,r,s):e===422?new xb(e,i,r,s):e===429?new Cb(e,i,r,s):e>=500?new bb(e,i,r,s):new vt(e,i,r,s)}}class Ln extends vt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}}class ff extends vt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),this.status=void 0,n&&(this.cause=n)}}class D_ extends ff{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Sb extends vt{constructor(){super(...arguments),this.status=400}}class Ib extends vt{constructor(){super(...arguments),this.status=401}}class Pb extends vt{constructor(){super(...arguments),this.status=403}}class Ab extends vt{constructor(){super(...arguments),this.status=404}}class Rb extends vt{constructor(){super(...arguments),this.status=409}}class xb extends vt{constructor(){super(...arguments),this.status=422}}class Cb extends vt{constructor(){super(...arguments),this.status=429}}class bb extends vt{}class kb extends se{constructor(){super("Could not parse response content as the length limit was reached")}}class Nb extends se{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Si{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let n=this.decodeText(e);if(this.trailingCR&&(n="\r"+n,this.trailingCR=!1),n.endsWith("\r")&&(this.trailingCR=!0,n=n.slice(0,-1)),!n)return[];const r=Si.NEWLINE_CHARS.has(n[n.length-1]||"");let s=n.split(Si.NEWLINE_REGEXP);return r&&s.pop(),s.length===1&&!r?(this.buffer.push(s[0]),[]):(this.buffer.length>0&&(s=[this.buffer.join("")+s[0],...s.slice(1)],this.buffer=[]),r||(this.buffer=[s.pop()||""]),s)}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new se(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new se(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new se("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}Si.NEWLINE_CHARS=new Set([`
`,"\r"]);Si.NEWLINE_REGEXP=/\r\n|[\n\r]/g;class Zn{constructor(e,n){this.iterator=e,this.controller=n}static fromSSEResponse(e,n){let r=!1;async function*s(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let i=!1;try{for await(const o of pz(e,n))if(!i){if(o.data.startsWith("[DONE]")){i=!0;continue}if(o.event===null){let a;try{a=JSON.parse(o.data)}catch(l){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),l}if(a&&a.error)throw new vt(void 0,a.error,void 0,void 0);yield a}else{let a;try{a=JSON.parse(o.data)}catch(l){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),l}if(o.event=="error")throw new vt(void 0,a.error,a.message,void 0);yield{event:o.event,data:a}}}i=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{i||n.abort()}}return new Zn(s,n)}static fromReadableStream(e,n){let r=!1;async function*s(){const o=new Si,a=Ob(e);for await(const l of a)for(const c of o.decode(l))yield c;for(const l of o.flush())yield l}async function*i(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let o=!1;try{for await(const a of s())o||a&&(yield JSON.parse(a));o=!0}catch(a){if(a instanceof Error&&a.name==="AbortError")return;throw a}finally{o||n.abort()}}return new Zn(i,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),s=i=>({next:()=>{if(i.length===0){const o=r.next();e.push(o),n.push(o)}return i.shift()}});return[new Zn(()=>s(e),this.controller),new Zn(()=>s(n),this.controller)]}toReadableStream(){const e=this;let n;const r=new TextEncoder;return new vb({async start(){n=e[Symbol.asyncIterator]()},async pull(s){try{const{value:i,done:o}=await n.next();if(o)return s.close();const a=r.encode(JSON.stringify(i)+`
`);s.enqueue(a)}catch(i){s.error(i)}},async cancel(){var s;await((s=n.return)==null?void 0:s.call(n))}})}}async function*pz(t,e){if(!t.body)throw e.abort(),new se("Attempted to iterate over a response with no body");const n=new yz,r=new Si,s=Ob(t.body);for await(const i of mz(s))for(const o of r.decode(i)){const a=n.decode(o);a&&(yield a)}for(const i of r.flush()){const o=n.decode(i);o&&(yield o)}}async function*mz(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?new TextEncoder().encode(n):n;let s=new Uint8Array(e.length+r.length);s.set(e),s.set(r,e.length),e=s;let i;for(;(i=gz(e))!==-1;)yield e.slice(0,i),e=e.slice(i)}e.length>0&&(yield e)}function gz(t){for(let r=0;r<t.length-2;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}class yz{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,s]=vz(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function vz(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}function Ob(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const Db=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function",Lb=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&pf(t),pf=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",_z=t=>Lb(t)||Db(t)||Tb(t);async function Vb(t,e,n){var s;if(t=await t,Lb(t))return t;if(Db(t)){const i=await t.blob();e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()??"unknown_file");const o=pf(i)?[await i.arrayBuffer()]:[i];return new Wg(o,e,n)}const r=await wz(t);if(e||(e=Tz(t)??"unknown_file"),!(n!=null&&n.type)){const i=(s=r[0])==null?void 0:s.type;typeof i=="string"&&(n={...n,type:i})}return new Wg(r,e,n)}async function wz(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(pf(t))e.push(await t.arrayBuffer());else if(Sz(t))for await(const r of t)e.push(r);else throw new Error(`Unexpected data type: ${typeof t}; constructor: ${(n=t==null?void 0:t.constructor)==null?void 0:n.name}; props: ${Ez(t)}`);return e}function Ez(t){return`[${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}function Tz(t){var e;return Wp(t.name)||Wp(t.filename)||((e=Wp(t.path))==null?void 0:e.split(/[\\/]/).pop())}const Wp=t=>{if(typeof t=="string")return t;if(typeof Buffer<"u"&&t instanceof Buffer)return String(t)},Sz=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",a1=t=>t&&typeof t=="object"&&t.body&&t[Symbol.toStringTag]==="MultipartBody",Wo=async t=>{const e=await Iz(t.body);return _b(e,t)},Iz=async t=>{const e=new yb;return await Promise.all(Object.entries(t||{}).map(([n,r])=>Hg(e,n,r))),e},Hg=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(_z(n)){const r=await Vb(n);t.append(e,r)}else if(Array.isArray(n))await Promise.all(n.map(r=>Hg(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,s])=>Hg(t,`${e}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var Eo={},Pz=function(t,e,n,r,s){if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n},Az=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},wc;async function Mb(t){const{response:e}=t;if(t.options.stream)return To("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller):Zn.fromSSEResponse(e,t.controller);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const n=e.headers.get("content-type");if((n==null?void 0:n.includes("application/json"))||(n==null?void 0:n.includes("application/vnd.api+json"))){const i=await e.json();return To("response",e.status,e.url,e.headers,i),Fb(i,e)}const s=await e.text();return To("response",e.status,e.url,e.headers,s),s}function Fb(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class mf extends Promise{constructor(e,n=Mb){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=n}_thenUnwrap(e){return new mf(this.responsePromise,async n=>Fb(e(await this.parseResponse(n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class Rz{constructor({baseURL:e,maxRetries:n=2,timeout:r=6e5,httpAgent:s,fetch:i}){this.baseURL=e,this.maxRetries=Hp("maxRetries",n),this.timeout=Hp("timeout",r),this.httpAgent=s,this.fetch=i??gb}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...Oz(),...this.authHeaders(e)}}validateHeaders(e,n){}defaultIdempotencyKey(){return`stainless-node-retry-${Mz()}`}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(async s=>{const i=s&&pf(s==null?void 0:s.body)?new DataView(await s.body.arrayBuffer()):(s==null?void 0:s.body)instanceof DataView?s.body:(s==null?void 0:s.body)instanceof ArrayBuffer?new DataView(s.body):s&&ArrayBuffer.isView(s==null?void 0:s.body)?new DataView(s.body.buffer):s==null?void 0:s.body;return{method:e,path:n,...s,body:i}}))}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:n=0}={}){var T;const{method:r,path:s,query:i,headers:o={}}=e,a=ArrayBuffer.isView(e.body)||e.__binaryRequest&&typeof e.body=="string"?e.body:a1(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,l=this.calculateContentLength(a),c=this.buildURL(s,i);"timeout"in e&&Hp("timeout",e.timeout);const h=e.timeout??this.timeout,d=e.httpAgent??this.httpAgent??wb(c),f=h+1e3;typeof((T=d==null?void 0:d.options)==null?void 0:T.timeout)=="number"&&f>(d.options.timeout??0)&&(d.options.timeout=f),this.idempotencyHeader&&r!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const y=this.buildHeaders({options:e,headers:o,contentLength:l,retryCount:n});return{req:{method:r,...a&&{body:a},headers:y,...d&&{agent:d},signal:e.signal??null},url:c,timeout:h}}buildHeaders({options:e,headers:n,contentLength:r,retryCount:s}){const i={};r&&(i["content-length"]=r);const o=this.defaultHeaders(e);return h1(i,o),h1(i,n),a1(e.body)&&fl!=="node"&&delete i["content-type"],d1(o,"x-stainless-retry-count")===void 0&&d1(n,"x-stainless-retry-count")===void 0&&(i["x-stainless-retry-count"]=String(s)),this.validateHeaders(i,n),i}async prepareOptions(e){}async prepareRequest(e,{url:n,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(n=>[...n])):{...e}:{}}makeStatusError(e,n,r,s){return vt.generate(e,n,r,s)}request(e,n=null){return new mf(this.makeRequest(e,n))}async makeRequest(e,n){var d,f;const r=await e,s=r.maxRetries??this.maxRetries;n==null&&(n=s),await this.prepareOptions(r);const{req:i,url:o,timeout:a}=this.buildRequest(r,{retryCount:s-n});if(await this.prepareRequest(i,{url:o,options:r}),To("request",o,r,i.headers),(d=r.signal)!=null&&d.aborted)throw new Ln;const l=new AbortController,c=await this.fetchWithTimeout(o,i,a,l).catch(qg);if(c instanceof Error){if((f=r.signal)!=null&&f.aborted)throw new Ln;if(n)return this.retryRequest(r,n);throw c.name==="AbortError"?new D_:new ff({cause:c})}const h=Cz(c.headers);if(!c.ok){if(n&&this.shouldRetry(c)){const g=`retrying, ${n} attempts remaining`;return To(`response (error; ${g})`,c.status,o,h),this.retryRequest(r,n,h)}const y=await c.text().catch(g=>qg(g).message),w=Dz(y),T=w?void 0:y;throw To(`response (error; ${n?"(error; no more retries left)":"(error; not retryable)"})`,c.status,o,h,T),this.makeStatusError(c.status,w,T,h)}return{response:c,options:r,controller:l}}requestAPIList(e,n){const r=this.makeRequest(n,null);return new xz(this,r,e)}buildURL(e,n){const r=Vz(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return jb(s)||(n={...s,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new se(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,n,r,s){const{signal:i,...o}=n||{};i&&i.addEventListener("abort",()=>s.abort());const a=setTimeout(()=>s.abort(),r);return this.getRequestClient().fetch.call(void 0,e,{signal:s.signal,...o}).finally(()=>{clearTimeout(a)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r){let s;const i=r==null?void 0:r["retry-after-ms"];if(i){const a=parseFloat(i);Number.isNaN(a)||(s=a)}const o=r==null?void 0:r["retry-after"];if(o&&!s){const a=parseFloat(o);Number.isNaN(a)?s=Date.parse(o)-Date.now():s=a*1e3}if(!(s&&0<=s&&s<60*1e3)){const a=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,a)}return await _u(s),this.makeRequest(e,n-1)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,o=Math.min(.5*Math.pow(2,i),8),a=1-Math.random()*.25;return o*a*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Wi}`}}class Ub{constructor(e,n,r,s){wc.set(this,void 0),Pz(this,wc,e),this.options=s,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new se("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const n={...this.options};if("params"in e&&typeof n.query=="object")n.query={...n.query,...e.params};else if("url"in e){const r=[...Object.entries(n.query||{}),...e.url.searchParams.entries()];for(const[s,i]of r)e.url.searchParams.set(s,i);n.query=void 0,n.path=e.url.toString()}return await Az(this,wc,"f").requestAPIList(this.constructor,n)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(wc=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class xz extends mf{constructor(e,n,r){super(n,async s=>new r(e,s.response,await Mb(s),s.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}const Cz=t=>new Proxy(Object.fromEntries(t.entries()),{get(e,n){const r=n.toString();return e[r.toLowerCase()]||e[r]}}),bz={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},Zt=t=>typeof t=="object"&&t!==null&&!jb(t)&&Object.keys(t).every(e=>Bb(bz,e)),kz=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wi,"X-Stainless-OS":u1(Deno.build.os),"X-Stainless-Arch":l1(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wi,"X-Stainless-OS":u1(process.platform),"X-Stainless-Arch":l1(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const t=Nz();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Nz(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,i=r[2]||0,o=r[3]||0;return{browser:e,version:`${s}.${i}.${o}`}}}return null}const l1=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",u1=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let c1;const Oz=()=>c1??(c1=kz()),Dz=t=>{try{return JSON.parse(t)}catch{return}},Lz=new RegExp("^(?:[a-z]+:)?//","i"),Vz=t=>Lz.test(t),_u=t=>new Promise(e=>setTimeout(e,t)),Hp=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new se(`${t} must be an integer`);if(e<0)throw new se(`${t} must be a positive integer`);return e},qg=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null)try{return new Error(JSON.stringify(t))}catch{}return new Error(t)},Ec=t=>{var e,n,r,s;if(typeof process<"u")return((e=Eo==null?void 0:Eo[t])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(s=(r=(n=Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,t))==null?void 0:s.trim()};function jb(t){if(!t)return!0;for(const e in t)return!1;return!0}function Bb(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function h1(t,e){for(const n in e){if(!Bb(e,n))continue;const r=n.toLowerCase();if(!r)continue;const s=e[n];s===null?delete t[r]:s!==void 0&&(t[r]=s)}}function To(t,...e){typeof process<"u"&&(Eo==null?void 0:Eo.DEBUG)==="true"&&console.log(`OpenAI:DEBUG:${t}`,...e)}const Mz=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),Fz=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",Uz=t=>typeof(t==null?void 0:t.get)=="function",d1=(t,e)=>{var r;const n=e.toLowerCase();if(Uz(t)){const s=((r=e[0])==null?void 0:r.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(i,o,a)=>o+a.toUpperCase());for(const i of[e,n,e.toUpperCase(),s]){const o=t.get(i);if(o)return o}}for(const[s,i]of Object.entries(t))if(s.toLowerCase()===n)return Array.isArray(i)?(i.length<=1||console.warn(`Received ${i.length} entries for the ${e} header, using the first entry.`),i[0]):i};function qp(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}class jz extends Ub{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class zn extends Ub{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[]}getPaginatedItems(){return this.data??[]}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const n=Object.fromEntries(e.url.searchParams);return Object.keys(n).length?n:null}nextPageInfo(){var r;const e=this.getPaginatedItems();if(!e.length)return null;const n=(r=e[e.length-1])==null?void 0:r.id;return n?{params:{after:n}}:null}}class Ee{constructor(e){this._client=e}}let $b=class extends Ee{create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}},L_=class extends Ee{constructor(){super(...arguments),this.completions=new $b(this._client)}};L_.Completions=$b;class zb extends Ee{create(e,n){return this._client.post("/audio/speech",{body:e,...n,__binaryResponse:!0})}}class Wb extends Ee{create(e,n){return this._client.post("/audio/transcriptions",Wo({body:e,...n}))}}class Hb extends Ee{create(e,n){return this._client.post("/audio/translations",Wo({body:e,...n}))}}class wu extends Ee{constructor(){super(...arguments),this.transcriptions=new Wb(this._client),this.translations=new Hb(this._client),this.speech=new zb(this._client)}}wu.Transcriptions=Wb;wu.Translations=Hb;wu.Speech=zb;class V_ extends Ee{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(`/batches/${e}`,n)}list(e={},n){return Zt(e)?this.list({},e):this._client.getAPIList("/batches",M_,{query:e,...n})}cancel(e,n){return this._client.post(`/batches/${e}/cancel`,n)}}class M_ extends zn{}V_.BatchesPage=M_;class F_ extends Ee{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,n){return this._client.get(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,n,r){return this._client.post(`/assistants/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},n){return Zt(e)?this.list({},e):this._client.getAPIList("/assistants",U_,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,n){return this._client.delete(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class U_ extends zn{}F_.AssistantsPage=U_;function f1(t){return typeof t.parse=="function"}const So=t=>(t==null?void 0:t.role)==="assistant",qb=t=>(t==null?void 0:t.role)==="function",Kb=t=>(t==null?void 0:t.role)==="tool";var Cn=function(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},Oe=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Kg,Xc,Yc,$a,za,Jc,Wa,gr,Ha,rd,sd,Hi,Gb;class Qb{constructor(){Kg.add(this),this.controller=new AbortController,Xc.set(this,void 0),Yc.set(this,()=>{}),$a.set(this,()=>{}),za.set(this,void 0),Jc.set(this,()=>{}),Wa.set(this,()=>{}),gr.set(this,{}),Ha.set(this,!1),rd.set(this,!1),sd.set(this,!1),Hi.set(this,!1),Cn(this,Xc,new Promise((e,n)=>{Cn(this,Yc,e,"f"),Cn(this,$a,n,"f")}),"f"),Cn(this,za,new Promise((e,n)=>{Cn(this,Jc,e,"f"),Cn(this,Wa,n,"f")}),"f"),Oe(this,Xc,"f").catch(()=>{}),Oe(this,za,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},Oe(this,Kg,"m",Gb).bind(this))},0)}_connected(){this.ended||(Oe(this,Yc,"f").call(this),this._emit("connect"))}get ended(){return Oe(this,Ha,"f")}get errored(){return Oe(this,rd,"f")}get aborted(){return Oe(this,sd,"f")}abort(){this.controller.abort()}on(e,n){return(Oe(this,gr,"f")[e]||(Oe(this,gr,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=Oe(this,gr,"f")[e];if(!r)return this;const s=r.findIndex(i=>i.listener===n);return s>=0&&r.splice(s,1),this}once(e,n){return(Oe(this,gr,"f")[e]||(Oe(this,gr,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{Cn(this,Hi,!0,"f"),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){Cn(this,Hi,!0,"f"),await Oe(this,za,"f")}_emit(e,...n){if(Oe(this,Ha,"f"))return;e==="end"&&(Cn(this,Ha,!0,"f"),Oe(this,Jc,"f").call(this));const r=Oe(this,gr,"f")[e];if(r&&(Oe(this,gr,"f")[e]=r.filter(s=>!s.once),r.forEach(({listener:s})=>s(...n))),e==="abort"){const s=n[0];!Oe(this,Hi,"f")&&!(r!=null&&r.length)&&Promise.reject(s),Oe(this,$a,"f").call(this,s),Oe(this,Wa,"f").call(this,s),this._emit("end");return}if(e==="error"){const s=n[0];!Oe(this,Hi,"f")&&!(r!=null&&r.length)&&Promise.reject(s),Oe(this,$a,"f").call(this,s),Oe(this,Wa,"f").call(this,s),this._emit("end")}}_emitFinal(){}}Xc=new WeakMap,Yc=new WeakMap,$a=new WeakMap,za=new WeakMap,Jc=new WeakMap,Wa=new WeakMap,gr=new WeakMap,Ha=new WeakMap,rd=new WeakMap,sd=new WeakMap,Hi=new WeakMap,Kg=new WeakSet,Gb=function(e){if(Cn(this,rd,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new Ln),e instanceof Ln)return Cn(this,sd,!0,"f"),this._emit("abort",e);if(e instanceof se)return this._emit("error",e);if(e instanceof Error){const n=new se(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new se(String(e)))};function Xb(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function Eu(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function Bz(t,e){return!e||!Yb(e)?{...t,choices:t.choices.map(n=>({...n,message:{...n.message,parsed:null,tool_calls:n.message.tool_calls??[]}}))}:j_(t,e)}function j_(t,e){const n=t.choices.map(r=>{var s;if(r.finish_reason==="length")throw new kb;if(r.finish_reason==="content_filter")throw new Nb;return{...r,message:{...r.message,tool_calls:((s=r.message.tool_calls)==null?void 0:s.map(i=>zz(e,i)))??[],parsed:r.message.content&&!r.message.refusal?$z(e,r.message.content):null}}});return{...t,choices:n}}function $z(t,e){var n,r;return((n=t.response_format)==null?void 0:n.type)!=="json_schema"?null:((r=t.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function zz(t,e){var r;const n=(r=t.tools)==null?void 0:r.find(s=>{var i;return((i=s.function)==null?void 0:i.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:Eu(n)?n.$parseRaw(e.function.arguments):n!=null&&n.function.strict?JSON.parse(e.function.arguments):null}}}function Wz(t,e){var r;if(!t)return!1;const n=(r=t.tools)==null?void 0:r.find(s=>{var i;return((i=s.function)==null?void 0:i.name)===e.function.name});return Eu(n)||(n==null?void 0:n.function.strict)||!1}function Yb(t){var e;return Xb(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(n=>Eu(n)||n.type==="function"&&n.function.strict===!0))??!1}function Hz(t){for(const e of t??[]){if(e.type!=="function")throw new se(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new se(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var Ht=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Pt,Gg,id,Qg,Xg,Yg,Jb,Jg;const p1=10;class Zb extends Qb{constructor(){super(...arguments),Pt.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=(r=e.choices[0])==null?void 0:r.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),(qb(e)||Kb(e))&&e.content)this._emit("functionCallResult",e.content);else if(So(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(So(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new se("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),Ht(this,Pt,"m",Gg).call(this)}async finalMessage(){return await this.done(),Ht(this,Pt,"m",id).call(this)}async finalFunctionCall(){return await this.done(),Ht(this,Pt,"m",Qg).call(this)}async finalFunctionCallResult(){return await this.done(),Ht(this,Pt,"m",Xg).call(this)}async totalUsage(){return await this.done(),Ht(this,Pt,"m",Yg).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=Ht(this,Pt,"m",id).call(this);n&&this._emit("finalMessage",n);const r=Ht(this,Pt,"m",Gg).call(this);r&&this._emit("finalContent",r);const s=Ht(this,Pt,"m",Qg).call(this);s&&this._emit("finalFunctionCall",s);const i=Ht(this,Pt,"m",Xg).call(this);i!=null&&this._emit("finalFunctionCallResult",i),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",Ht(this,Pt,"m",Yg).call(this))}async _createChatCompletion(e,n,r){const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),Ht(this,Pt,"m",Jb).call(this,n);const i=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(j_(i,n))}async _runChatCompletion(e,n,r){for(const s of n.messages)this._addMessage(s,!1);return await this._createChatCompletion(e,n,r)}async _runFunctions(e,n,r){var f;const s="function",{function_call:i="auto",stream:o,...a}=n,l=typeof i!="string"&&(i==null?void 0:i.name),{maxChatCompletions:c=p1}=r||{},h={};for(const y of n.functions)h[y.name||y.function.name]=y;const d=n.functions.map(y=>({name:y.name||y.function.name,parameters:y.parameters,description:y.description}));for(const y of n.messages)this._addMessage(y,!1);for(let y=0;y<c;++y){const T=(f=(await this._createChatCompletion(e,{...a,function_call:i,functions:d,messages:[...this.messages]},r)).choices[0])==null?void 0:f.message;if(!T)throw new se("missing message in ChatCompletion response");if(!T.function_call)return;const{name:P,arguments:E}=T.function_call,g=h[P];if(g){if(l&&l!==P){const V=`Invalid function_call: ${JSON.stringify(P)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:s,name:P,content:V});continue}}else{const V=`Invalid function_call: ${JSON.stringify(P)}. Available options are: ${d.map(S=>JSON.stringify(S.name)).join(", ")}. Please try again`;this._addMessage({role:s,name:P,content:V});continue}let _;try{_=f1(g)?await g.parse(E):E}catch(V){this._addMessage({role:s,name:P,content:V instanceof Error?V.message:String(V)});continue}const x=await g.function(_,this),D=Ht(this,Pt,"m",Jg).call(this,x);if(this._addMessage({role:s,name:P,content:D}),l)return}}async _runTools(e,n,r){var y,w,T;const s="tool",{tool_choice:i="auto",stream:o,...a}=n,l=typeof i!="string"&&((y=i==null?void 0:i.function)==null?void 0:y.name),{maxChatCompletions:c=p1}=r||{},h=n.tools.map(P=>{if(Eu(P)){if(!P.$callback)throw new se("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:P.$callback,name:P.function.name,description:P.function.description||"",parameters:P.function.parameters,parse:P.$parseRaw,strict:!0}}}return P}),d={};for(const P of h)P.type==="function"&&(d[P.function.name||P.function.function.name]=P.function);const f="tools"in n?h.map(P=>P.type==="function"?{type:"function",function:{name:P.function.name||P.function.function.name,parameters:P.function.parameters,description:P.function.description,strict:P.function.strict}}:P):void 0;for(const P of n.messages)this._addMessage(P,!1);for(let P=0;P<c;++P){const g=(w=(await this._createChatCompletion(e,{...a,tool_choice:i,tools:f,messages:[...this.messages]},r)).choices[0])==null?void 0:w.message;if(!g)throw new se("missing message in ChatCompletion response");if(!((T=g.tool_calls)!=null&&T.length))return;for(const _ of g.tool_calls){if(_.type!=="function")continue;const x=_.id,{name:D,arguments:V}=_.function,S=d[D];if(S){if(l&&l!==D){const R=`Invalid tool_call: ${JSON.stringify(D)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:s,tool_call_id:x,content:R});continue}}else{const R=`Invalid tool_call: ${JSON.stringify(D)}. Available options are: ${Object.keys(d).map(N=>JSON.stringify(N)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:x,content:R});continue}let v;try{v=f1(S)?await S.parse(V):V}catch(R){const N=R instanceof Error?R.message:String(R);this._addMessage({role:s,tool_call_id:x,content:N});continue}const A=await S.function(v,this),C=Ht(this,Pt,"m",Jg).call(this,A);if(this._addMessage({role:s,tool_call_id:x,content:C}),l)return}}}}Pt=new WeakSet,Gg=function(){return Ht(this,Pt,"m",id).call(this).content??null},id=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(So(n)){const{function_call:r,...s}=n,i={...s,content:n.content??null,refusal:n.refusal??null};return r&&(i.function_call=r),i}}throw new se("stream ended without producing a ChatCompletionMessage with role=assistant")},Qg=function(){var e,n;for(let r=this.messages.length-1;r>=0;r--){const s=this.messages[r];if(So(s)&&(s!=null&&s.function_call))return s.function_call;if(So(s)&&((e=s==null?void 0:s.tool_calls)!=null&&e.length))return(n=s.tool_calls.at(-1))==null?void 0:n.function}},Xg=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(qb(n)&&n.content!=null||Kb(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>{var s;return r.role==="assistant"&&((s=r.tool_calls)==null?void 0:s.some(i=>i.type==="function"&&i.id===n.tool_call_id))}))return n.content}},Yg=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},Jb=function(e){if(e.n!=null&&e.n>1)throw new se("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Jg=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Ql extends Zb{static runFunctions(e,n,r){const s=new Ql,i={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return s._run(()=>s._runFunctions(e,n,i)),s}static runTools(e,n,r){const s=new Ql,i={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,i)),s}_addMessage(e,n=!0){super._addMessage(e,n),So(e)&&e.content&&this._emit("content",e.content)}}const ek=1,tk=2,nk=4,rk=8,sk=16,ik=32,ok=64,ak=128,lk=256,uk=ak|lk,ck=sk|ik|uk|ok,hk=ek|tk|ck,dk=nk|rk,qz=hk|dk,nt={STR:ek,NUM:tk,ARR:nk,OBJ:rk,NULL:sk,BOOL:ik,NAN:ok,INFINITY:ak,MINUS_INFINITY:lk,INF:uk,SPECIAL:ck,ATOM:hk,COLLECTION:dk,ALL:qz};class Kz extends Error{}class Gz extends Error{}function Qz(t,e=nt.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return Xz(t.trim(),e)}const Xz=(t,e)=>{const n=t.length;let r=0;const s=f=>{throw new Kz(`${f} at position ${r}`)},i=f=>{throw new Gz(`${f} at position ${r}`)},o=()=>(d(),r>=n&&s("Unexpected end of input"),t[r]==='"'?a():t[r]==="{"?l():t[r]==="["?c():t.substring(r,r+4)==="null"||nt.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||nt.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||nt.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||nt.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||nt.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||nt.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):h()),a=()=>{const f=r;let y=!1;for(r++;r<n&&(t[r]!=='"'||y&&t[r-1]==="\\");)y=t[r]==="\\"?!y:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(f,++r-Number(y)))}catch(w){i(String(w))}else if(nt.STR&e)try{return JSON.parse(t.substring(f,r-Number(y))+'"')}catch{return JSON.parse(t.substring(f,t.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},l=()=>{r++,d();const f={};try{for(;t[r]!=="}";){if(d(),r>=n&&nt.OBJ&e)return f;const y=a();d(),r++;try{const w=o();Object.defineProperty(f,y,{value:w,writable:!0,enumerable:!0,configurable:!0})}catch(w){if(nt.OBJ&e)return f;throw w}d(),t[r]===","&&r++}}catch{if(nt.OBJ&e)return f;s("Expected '}' at end of object")}return r++,f},c=()=>{r++;const f=[];try{for(;t[r]!=="]";)f.push(o()),d(),t[r]===","&&r++}catch{if(nt.ARR&e)return f;s("Expected ']' at end of array")}return r++,f},h=()=>{if(r===0){t==="-"&&nt.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t)}catch(y){if(nt.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}i(String(y))}}const f=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(nt.NUM&e)&&s("Unterminated number literal");try{return JSON.parse(t.substring(f,r))}catch{t.substring(f,r)==="-"&&nt.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t.substring(f,t.lastIndexOf("e")))}catch(w){i(String(w))}}},d=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return o()},m1=t=>Qz(t,nt.ALL^nt.NUM);var Ui=function(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},Te=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Xe,pr,ji,Gr,Kp,Tc,Gp,Qp,Xp,Sc,Yp,g1;class Xl extends Zb{constructor(e){super(),Xe.add(this),pr.set(this,void 0),ji.set(this,void 0),Gr.set(this,void 0),Ui(this,pr,e,"f"),Ui(this,ji,[],"f")}get currentChatCompletionSnapshot(){return Te(this,Gr,"f")}static fromReadableStream(e){const n=new Xl(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const s=new Xl(n);return s._run(()=>s._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(e,n,r){var o;super._createChatCompletion;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),Te(this,Xe,"m",Kp).call(this);const i=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const a of i)Te(this,Xe,"m",Gp).call(this,a);if((o=i.controller.signal)!=null&&o.aborted)throw new Ln;return this._addChatCompletion(Te(this,Xe,"m",Sc).call(this))}async _fromReadableStream(e,n){var o;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Te(this,Xe,"m",Kp).call(this),this._connected();const s=Zn.fromReadableStream(e,this.controller);let i;for await(const a of s)i&&i!==a.id&&this._addChatCompletion(Te(this,Xe,"m",Sc).call(this)),Te(this,Xe,"m",Gp).call(this,a),i=a.id;if((o=s.controller.signal)!=null&&o.aborted)throw new Ln;return this._addChatCompletion(Te(this,Xe,"m",Sc).call(this))}[(pr=new WeakMap,ji=new WeakMap,Gr=new WeakMap,Xe=new WeakSet,Kp=function(){this.ended||Ui(this,Gr,void 0,"f")},Tc=function(n){let r=Te(this,ji,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},Te(this,ji,"f")[n.index]=r,r)},Gp=function(n){var s,i,o,a,l,c,h,d,f,y,w,T,P,E,g;if(this.ended)return;const r=Te(this,Xe,"m",g1).call(this,n);this._emit("chunk",n,r);for(const _ of n.choices){const x=r.choices[_.index];_.delta.content!=null&&((s=x.message)==null?void 0:s.role)==="assistant"&&((i=x.message)!=null&&i.content)&&(this._emit("content",_.delta.content,x.message.content),this._emit("content.delta",{delta:_.delta.content,snapshot:x.message.content,parsed:x.message.parsed})),_.delta.refusal!=null&&((o=x.message)==null?void 0:o.role)==="assistant"&&((a=x.message)!=null&&a.refusal)&&this._emit("refusal.delta",{delta:_.delta.refusal,snapshot:x.message.refusal}),((l=_.logprobs)==null?void 0:l.content)!=null&&((c=x.message)==null?void 0:c.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(h=_.logprobs)==null?void 0:h.content,snapshot:((d=x.logprobs)==null?void 0:d.content)??[]}),((f=_.logprobs)==null?void 0:f.refusal)!=null&&((y=x.message)==null?void 0:y.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(w=_.logprobs)==null?void 0:w.refusal,snapshot:((T=x.logprobs)==null?void 0:T.refusal)??[]});const D=Te(this,Xe,"m",Tc).call(this,x);x.finish_reason&&(Te(this,Xe,"m",Xp).call(this,x),D.current_tool_call_index!=null&&Te(this,Xe,"m",Qp).call(this,x,D.current_tool_call_index));for(const V of _.delta.tool_calls??[])D.current_tool_call_index!==V.index&&(Te(this,Xe,"m",Xp).call(this,x),D.current_tool_call_index!=null&&Te(this,Xe,"m",Qp).call(this,x,D.current_tool_call_index)),D.current_tool_call_index=V.index;for(const V of _.delta.tool_calls??[]){const S=(P=x.message.tool_calls)==null?void 0:P[V.index];S!=null&&S.type&&((S==null?void 0:S.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(E=S.function)==null?void 0:E.name,index:V.index,arguments:S.function.arguments,parsed_arguments:S.function.parsed_arguments,arguments_delta:((g=V.function)==null?void 0:g.arguments)??""}):(S==null||S.type,void 0))}}},Qp=function(n,r){var o,a,l;if(Te(this,Xe,"m",Tc).call(this,n).done_tool_calls.has(r))return;const i=(o=n.message.tool_calls)==null?void 0:o[r];if(!i)throw new Error("no tool call snapshot");if(!i.type)throw new Error("tool call snapshot missing `type`");if(i.type==="function"){const c=(l=(a=Te(this,pr,"f"))==null?void 0:a.tools)==null?void 0:l.find(h=>h.type==="function"&&h.function.name===i.function.name);this._emit("tool_calls.function.arguments.done",{name:i.function.name,index:r,arguments:i.function.arguments,parsed_arguments:Eu(c)?c.$parseRaw(i.function.arguments):c!=null&&c.function.strict?JSON.parse(i.function.arguments):null})}else i.type},Xp=function(n){var s,i;const r=Te(this,Xe,"m",Tc).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const o=Te(this,Xe,"m",Yp).call(this);this._emit("content.done",{content:n.message.content,parsed:o?o.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(s=n.logprobs)!=null&&s.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(i=n.logprobs)!=null&&i.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Sc=function(){if(this.ended)throw new se("stream has ended, this shouldn't happen");const n=Te(this,Gr,"f");if(!n)throw new se("request ended without sending any chunks");return Ui(this,Gr,void 0,"f"),Ui(this,ji,[],"f"),Yz(n,Te(this,pr,"f"))},Yp=function(){var r;const n=(r=Te(this,pr,"f"))==null?void 0:r.response_format;return Xb(n)?n:null},g1=function(n){var r,s,i,o;let a=Te(this,Gr,"f");const{choices:l,...c}=n;a?Object.assign(a,c):a=Ui(this,Gr,{...c,choices:[]},"f");for(const{delta:h,finish_reason:d,index:f,logprobs:y=null,...w}of n.choices){let T=a.choices[f];if(T||(T=a.choices[f]={finish_reason:d,index:f,message:{},logprobs:y,...w}),y)if(!T.logprobs)T.logprobs=Object.assign({},y);else{const{content:V,refusal:S,...v}=y;Object.assign(T.logprobs,v),V&&((r=T.logprobs).content??(r.content=[]),T.logprobs.content.push(...V)),S&&((s=T.logprobs).refusal??(s.refusal=[]),T.logprobs.refusal.push(...S))}if(d&&(T.finish_reason=d,Te(this,pr,"f")&&Yb(Te(this,pr,"f")))){if(d==="length")throw new kb;if(d==="content_filter")throw new Nb}if(Object.assign(T,w),!h)continue;const{content:P,refusal:E,function_call:g,role:_,tool_calls:x,...D}=h;if(Object.assign(T.message,D),E&&(T.message.refusal=(T.message.refusal||"")+E),_&&(T.message.role=_),g&&(T.message.function_call?(g.name&&(T.message.function_call.name=g.name),g.arguments&&((i=T.message.function_call).arguments??(i.arguments=""),T.message.function_call.arguments+=g.arguments)):T.message.function_call=g),P&&(T.message.content=(T.message.content||"")+P,!T.message.refusal&&Te(this,Xe,"m",Yp).call(this)&&(T.message.parsed=m1(T.message.content))),x){T.message.tool_calls||(T.message.tool_calls=[]);for(const{index:V,id:S,type:v,function:A,...C}of x){const R=(o=T.message.tool_calls)[V]??(o[V]={});Object.assign(R,C),S&&(R.id=S),v&&(R.type=v),A&&(R.function??(R.function={name:A.name??"",arguments:""})),A!=null&&A.name&&(R.function.name=A.name),A!=null&&A.arguments&&(R.function.arguments+=A.arguments,Wz(Te(this,pr,"f"),R)&&(R.function.parsed_arguments=m1(R.function.arguments)))}}}return a},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",s=>{const i=n.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,o)=>n.push({resolve:i,reject:o})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Zn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Yz(t,e){const{id:n,choices:r,created:s,model:i,system_fingerprint:o,...a}=t,l={...a,id:n,choices:r.map(({message:c,finish_reason:h,index:d,logprobs:f,...y})=>{if(!h)throw new se(`missing finish_reason for choice ${d}`);const{content:w=null,function_call:T,tool_calls:P,...E}=c,g=c.role;if(!g)throw new se(`missing role for choice ${d}`);if(T){const{arguments:_,name:x}=T;if(_==null)throw new se(`missing function_call.arguments for choice ${d}`);if(!x)throw new se(`missing function_call.name for choice ${d}`);return{...y,message:{content:w,function_call:{arguments:_,name:x},role:g,refusal:c.refusal??null},finish_reason:h,index:d,logprobs:f}}return P?{...y,index:d,finish_reason:h,logprobs:f,message:{...E,role:g,content:w,refusal:c.refusal??null,tool_calls:P.map((_,x)=>{const{function:D,type:V,id:S,...v}=_,{arguments:A,name:C,...R}=D||{};if(S==null)throw new se(`missing choices[${d}].tool_calls[${x}].id
${Ic(t)}`);if(V==null)throw new se(`missing choices[${d}].tool_calls[${x}].type
${Ic(t)}`);if(C==null)throw new se(`missing choices[${d}].tool_calls[${x}].function.name
${Ic(t)}`);if(A==null)throw new se(`missing choices[${d}].tool_calls[${x}].function.arguments
${Ic(t)}`);return{...v,id:S,type:V,function:{...R,name:C,arguments:A}}})}}:{...y,message:{...E,content:w,role:g,refusal:c.refusal??null},finish_reason:h,index:d,logprobs:f}}),created:s,model:i,object:"chat.completion",...o?{system_fingerprint:o}:{}};return Bz(l,e)}function Ic(t){return JSON.stringify(t)}class Io extends Xl{static fromReadableStream(e){const n=new Io(null);return n._run(()=>n._fromReadableStream(e)),n}static runFunctions(e,n,r){const s=new Io(null),i={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return s._run(()=>s._runFunctions(e,n,i)),s}static runTools(e,n,r){const s=new Io(n),i={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,i)),s}}let fk=class extends Ee{parse(e,n){return Hz(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(r=>j_(r,e))}runFunctions(e,n){return e.stream?Io.runFunctions(this._client,e,n):Ql.runFunctions(this._client,e,n)}runTools(e,n){return e.stream?Io.runTools(this._client,e,n):Ql.runTools(this._client,e,n)}stream(e,n){return Xl.createChatCompletion(this._client,e,n)}};class Zg extends Ee{constructor(){super(...arguments),this.completions=new fk(this._client)}}(function(t){t.Completions=fk})(Zg||(Zg={}));var q=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},tn=function(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},ht,ey,Gn,Zc,kn,ni,uo,Gs,od,nn,eh,th,pl,qa,Ka,y1,v1,_1,w1,E1,T1,S1;class Vn extends Qb{constructor(){super(...arguments),ht.add(this),ey.set(this,[]),Gn.set(this,{}),Zc.set(this,{}),kn.set(this,void 0),ni.set(this,void 0),uo.set(this,void 0),Gs.set(this,void 0),od.set(this,void 0),nn.set(this,void 0),eh.set(this,void 0),th.set(this,void 0),pl.set(this,void 0)}[(ey=new WeakMap,Gn=new WeakMap,Zc=new WeakMap,kn=new WeakMap,ni=new WeakMap,uo=new WeakMap,Gs=new WeakMap,od=new WeakMap,nn=new WeakMap,eh=new WeakMap,th=new WeakMap,pl=new WeakMap,ht=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const i=n.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,o)=>n.push({resolve:i,reject:o})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new Vn;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){var i;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=Zn.fromReadableStream(e,this.controller);for await(const o of s)q(this,ht,"m",qa).call(this,o);if((i=s.controller.signal)!=null&&i.aborted)throw new Ln;return this._addRun(q(this,ht,"m",Ka).call(this))}toReadableStream(){return new Zn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,s,i){const o=new Vn;return o._run(()=>o._runToolAssistantStream(e,n,r,s,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createToolAssistantStream(e,n,r,s,i){var c;const o=i==null?void 0:i.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const a={...s,stream:!0},l=await e.submitToolOutputs(n,r,a,{...i,signal:this.controller.signal});this._connected();for await(const h of l)q(this,ht,"m",qa).call(this,h);if((c=l.controller.signal)!=null&&c.aborted)throw new Ln;return this._addRun(q(this,ht,"m",Ka).call(this))}static createThreadAssistantStream(e,n,r){const s=new Vn;return s._run(()=>s._threadAssistantStream(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(e,n,r,s){const i=new Vn;return i._run(()=>i._runAssistantStream(e,n,r,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),i}currentEvent(){return q(this,eh,"f")}currentRun(){return q(this,th,"f")}currentMessageSnapshot(){return q(this,kn,"f")}currentRunStepSnapshot(){return q(this,pl,"f")}async finalRunSteps(){return await this.done(),Object.values(q(this,Gn,"f"))}async finalMessages(){return await this.done(),Object.values(q(this,Zc,"f"))}async finalRun(){if(await this.done(),!q(this,ni,"f"))throw Error("Final run was not received.");return q(this,ni,"f")}async _createThreadAssistantStream(e,n,r){var a;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const i={...n,stream:!0},o=await e.createAndRun(i,{...r,signal:this.controller.signal});this._connected();for await(const l of o)q(this,ht,"m",qa).call(this,l);if((a=o.controller.signal)!=null&&a.aborted)throw new Ln;return this._addRun(q(this,ht,"m",Ka).call(this))}async _createAssistantStream(e,n,r,s){var l;const i=s==null?void 0:s.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},a=await e.create(n,o,{...s,signal:this.controller.signal});this._connected();for await(const c of a)q(this,ht,"m",qa).call(this,c);if((l=a.controller.signal)!=null&&l.aborted)throw new Ln;return this._addRun(q(this,ht,"m",Ka).call(this))}static accumulateDelta(e,n){for(const[r,s]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=s;continue}let i=e[r];if(i==null){e[r]=s;continue}if(r==="index"||r==="type"){e[r]=s;continue}if(typeof i=="string"&&typeof s=="string")i+=s;else if(typeof i=="number"&&typeof s=="number")i+=s;else if(qp(i)&&qp(s))i=this.accumulateDelta(i,s);else if(Array.isArray(i)&&Array.isArray(s)){if(i.every(o=>typeof o=="string"||typeof o=="number")){i.push(...s);continue}for(const o of s){if(!qp(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);const a=o.index;if(a==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof a!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${a}`);const l=i[a];l==null?i.push(o):i[a]=this.accumulateDelta(l,o)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${s}, accValue: ${i}`);e[r]=i}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,s){return await this._createAssistantStream(n,e,r,s)}async _runToolAssistantStream(e,n,r,s,i){return await this._createToolAssistantStream(r,e,n,s,i)}}qa=function(e){if(!this.ended)switch(tn(this,eh,e,"f"),q(this,ht,"m",_1).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":q(this,ht,"m",S1).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":q(this,ht,"m",v1).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":q(this,ht,"m",y1).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Ka=function(){if(this.ended)throw new se("stream has ended, this shouldn't happen");if(!q(this,ni,"f"))throw Error("Final run has not been received");return q(this,ni,"f")},y1=function(e){const[n,r]=q(this,ht,"m",E1).call(this,e,q(this,kn,"f"));tn(this,kn,n,"f"),q(this,Zc,"f")[n.id]=n;for(const s of r){const i=n.content[s.index];(i==null?void 0:i.type)=="text"&&this._emit("textCreated",i.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const s of e.data.delta.content){if(s.type=="text"&&s.text){let i=s.text,o=n.content[s.index];if(o&&o.type=="text")this._emit("textDelta",i,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=q(this,uo,"f")){if(q(this,Gs,"f"))switch(q(this,Gs,"f").type){case"text":this._emit("textDone",q(this,Gs,"f").text,q(this,kn,"f"));break;case"image_file":this._emit("imageFileDone",q(this,Gs,"f").image_file,q(this,kn,"f"));break}tn(this,uo,s.index,"f")}tn(this,Gs,n.content[s.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(q(this,uo,"f")!==void 0){const s=e.data.content[q(this,uo,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,q(this,kn,"f"));break;case"text":this._emit("textDone",s.text,q(this,kn,"f"));break}}q(this,kn,"f")&&this._emit("messageDone",e.data),tn(this,kn,void 0,"f")}},v1=function(e){const n=q(this,ht,"m",w1).call(this,e);switch(tn(this,pl,n,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const i of r.step_details.tool_calls)i.index==q(this,od,"f")?this._emit("toolCallDelta",i,n.step_details.tool_calls[i.index]):(q(this,nn,"f")&&this._emit("toolCallDone",q(this,nn,"f")),tn(this,od,i.index,"f"),tn(this,nn,n.step_details.tool_calls[i.index],"f"),q(this,nn,"f")&&this._emit("toolCallCreated",q(this,nn,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":tn(this,pl,void 0,"f"),e.data.step_details.type=="tool_calls"&&q(this,nn,"f")&&(this._emit("toolCallDone",q(this,nn,"f")),tn(this,nn,void 0,"f")),this._emit("runStepDone",e.data,n);break}},_1=function(e){q(this,ey,"f").push(e),this._emit("event",e)},w1=function(e){switch(e.event){case"thread.run.step.created":return q(this,Gn,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=q(this,Gn,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const s=Vn.accumulateDelta(n,r.delta);q(this,Gn,"f")[e.data.id]=s}return q(this,Gn,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":q(this,Gn,"f")[e.data.id]=e.data;break}if(q(this,Gn,"f")[e.data.id])return q(this,Gn,"f")[e.data.id];throw new Error("No snapshot available")},E1=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=e.data;if(s.delta.content)for(const i of s.delta.content)if(i.index in n.content){let o=n.content[i.index];n.content[i.index]=q(this,ht,"m",T1).call(this,i,o)}else n.content[i.index]=i,r.push(i);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},T1=function(e,n){return Vn.accumulateDelta(n,e)},S1=function(e){switch(tn(this,th,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":tn(this,ni,e.data,"f"),q(this,nn,"f")&&(this._emit("toolCallDone",q(this,nn,"f")),tn(this,nn,void 0,"f"));break}};class B_ extends Ee{create(e,n,r){return this._client.post(`/threads/${e}/messages`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/threads/${e}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,n,r,s){return this._client.post(`/threads/${e}/messages/${n}`,{body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(e,n={},r){return Zt(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/messages`,$_,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,n,r){return this._client.delete(`/threads/${e}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class $_ extends zn{}B_.MessagesPage=$_;class z_ extends Ee{retrieve(e,n,r,s={},i){return Zt(s)?this.retrieve(e,n,r,{},s):this._client.get(`/threads/${e}/runs/${n}/steps/${r}`,{query:s,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,n,r={},s){return Zt(r)?this.list(e,n,{},r):this._client.getAPIList(`/threads/${e}/runs/${n}/steps`,W_,{query:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}}class W_ extends zn{}z_.RunStepsPage=W_;class Tu extends Ee{constructor(){super(...arguments),this.steps=new z_(this._client)}create(e,n,r){const{include:s,...i}=n;return this._client.post(`/threads/${e}/runs`,{query:{include:s},body:i,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:n.stream??!1})}retrieve(e,n,r){return this._client.get(`/threads/${e}/runs/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,n,r,s){return this._client.post(`/threads/${e}/runs/${n}`,{body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(e,n={},r){return Zt(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/runs`,H_,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,n,r){return this._client.post(`/threads/${e}/runs/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(e,s.id,r)}createAndStream(e,n,r){return Vn.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){const s={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:i,response:o}=await this.retrieve(e,n,{...r,headers:{...r==null?void 0:r.headers,...s}}).withResponse();switch(i.status){case"queued":case"in_progress":case"cancelling":let a=5e3;if(r!=null&&r.pollIntervalMs)a=r.pollIntervalMs;else{const l=o.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(a=c)}}await _u(a);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return i}}}stream(e,n,r){return Vn.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r,s){return this._client.post(`/threads/${e}/runs/${n}/submit_tool_outputs`,{body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(e,n,r,s){const i=await this.submitToolOutputs(e,n,r,s);return await this.poll(e,i.id,s)}submitToolOutputsStream(e,n,r,s){return Vn.createToolAssistantStream(e,n,this._client.beta.threads.runs,r,s)}}class H_ extends zn{}Tu.RunsPage=H_;Tu.Steps=z_;Tu.RunStepsPage=W_;class ra extends Ee{constructor(){super(...arguments),this.runs=new Tu(this._client),this.messages=new B_(this._client)}create(e={},n){return Zt(e)?this.create({},e):this._client.post("/threads",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,n){return this._client.get(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,n,r){return this._client.post(`/threads/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,n){return this._client.delete(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers},stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.thread_id,r.id,n)}createAndRunStream(e,n){return Vn.createThreadAssistantStream(e,this._client.beta.threads,n)}}ra.Runs=Tu;ra.RunsPage=H_;ra.Messages=B_;ra.MessagesPage=$_;const Jz=async t=>{const e=await Promise.allSettled(t),n=e.filter(s=>s.status==="rejected");if(n.length){for(const s of n)console.error(s.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const s of e)s.status==="fulfilled"&&r.push(s.value);return r};let q_=class extends Ee{create(e,n,r){return this._client.post(`/vector_stores/${e}/files`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/vector_stores/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e,n={},r){return Zt(n)?this.list(e,{},n):this._client.getAPIList(`/vector_stores/${e}/files`,gf,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,n,r){return this._client.delete(`/vector_stores/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(e,s.id,r)}async poll(e,n,r){const s={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const i=await this.retrieve(e,n,{...r,headers:s}).withResponse(),o=i.data;switch(o.status){case"in_progress":let a=5e3;if(r!=null&&r.pollIntervalMs)a=r.pollIntervalMs;else{const l=i.response.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(a=c)}}await _u(a);break;case"failed":case"completed":return o}}}async upload(e,n,r){const s=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:s.id},r)}async uploadAndPoll(e,n,r){const s=await this.upload(e,n,r);return await this.poll(e,s.id,r)}};class gf extends zn{}q_.VectorStoreFilesPage=gf;class pk extends Ee{create(e,n,r){return this._client.post(`/vector_stores/${e}/file_batches`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/vector_stores/${e}/file_batches/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,n,r){return this._client.post(`/vector_stores/${e}/file_batches/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,n,r){const s=await this.create(e,n);return await this.poll(e,s.id,r)}listFiles(e,n,r={},s){return Zt(r)?this.listFiles(e,n,{},r):this._client.getAPIList(`/vector_stores/${e}/file_batches/${n}/files`,gf,{query:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}async poll(e,n,r){const s={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:i,response:o}=await this.retrieve(e,n,{...r,headers:s}).withResponse();switch(i.status){case"in_progress":let a=5e3;if(r!=null&&r.pollIntervalMs)a=r.pollIntervalMs;else{const l=o.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(a=c)}}await _u(a);break;case"failed":case"cancelled":case"completed":return i}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},s){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const i=(s==null?void 0:s.maxConcurrency)??5,o=Math.min(i,n.length),a=this._client,l=n.values(),c=[...r];async function h(f){for(let y of f){const w=await a.files.create({file:y,purpose:"assistants"},s);c.push(w.id)}}const d=Array(o).fill(l).map(h);return await Jz(d),await this.createAndPoll(e,{file_ids:c})}}class sa extends Ee{constructor(){super(...arguments),this.files=new q_(this._client),this.fileBatches=new pk(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,n){return this._client.get(`/vector_stores/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,n,r){return this._client.post(`/vector_stores/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},n){return Zt(e)?this.list({},e):this._client.getAPIList("/vector_stores",K_,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,n){return this._client.delete(`/vector_stores/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class K_ extends zn{}sa.VectorStoresPage=K_;sa.Files=q_;sa.VectorStoreFilesPage=gf;sa.FileBatches=pk;class Ni extends Ee{constructor(){super(...arguments),this.vectorStores=new sa(this._client),this.chat=new Zg(this._client),this.assistants=new F_(this._client),this.threads=new ra(this._client)}}Ni.VectorStores=sa;Ni.VectorStoresPage=K_;Ni.Assistants=F_;Ni.AssistantsPage=U_;Ni.Threads=ra;class mk extends Ee{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class gk extends Ee{create(e,n){return this._client.post("/embeddings",{body:e,...n})}}class G_ extends Ee{create(e,n){return this._client.post("/files",Wo({body:e,...n}))}retrieve(e,n){return this._client.get(`/files/${e}`,n)}list(e={},n){return Zt(e)?this.list({},e):this._client.getAPIList("/files",Q_,{query:e,...n})}del(e,n){return this._client.delete(`/files/${e}`,n)}content(e,n){return this._client.get(`/files/${e}/content`,{...n,__binaryResponse:!0})}retrieveContent(e,n){return this._client.get(`/files/${e}/content`,{...n,headers:{Accept:"application/json",...n==null?void 0:n.headers}})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const s=new Set(["processed","error","deleted"]),i=Date.now();let o=await this.retrieve(e);for(;!o.status||!s.has(o.status);)if(await _u(n),o=await this.retrieve(e),Date.now()-i>r)throw new D_({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return o}}class Q_ extends zn{}G_.FileObjectsPage=Q_;class X_ extends Ee{list(e,n={},r){return Zt(n)?this.list(e,{},n):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,Y_,{query:n,...r})}}class Y_ extends zn{}X_.FineTuningJobCheckpointsPage=Y_;class ia extends Ee{constructor(){super(...arguments),this.checkpoints=new X_(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(`/fine_tuning/jobs/${e}`,n)}list(e={},n){return Zt(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",J_,{query:e,...n})}cancel(e,n){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return Zt(n)?this.listEvents(e,{},n):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,Z_,{query:n,...r})}}class J_ extends zn{}class Z_ extends zn{}ia.FineTuningJobsPage=J_;ia.FineTuningJobEventsPage=Z_;ia.Checkpoints=X_;ia.FineTuningJobCheckpointsPage=Y_;class Su extends Ee{constructor(){super(...arguments),this.jobs=new ia(this._client)}}Su.Jobs=ia;Su.FineTuningJobsPage=J_;Su.FineTuningJobEventsPage=Z_;class yk extends Ee{createVariation(e,n){return this._client.post("/images/variations",Wo({body:e,...n}))}edit(e,n){return this._client.post("/images/edits",Wo({body:e,...n}))}generate(e,n){return this._client.post("/images/generations",{body:e,...n})}}class e0 extends Ee{retrieve(e,n){return this._client.get(`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",t0,e)}del(e,n){return this._client.delete(`/models/${e}`,n)}}class t0 extends jz{}e0.ModelsPage=t0;class vk extends Ee{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class _k extends Ee{create(e,n,r){return this._client.post(`/uploads/${e}/parts`,Wo({body:n,...r}))}}class n0 extends Ee{constructor(){super(...arguments),this.parts=new _k(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(`/uploads/${e}/complete`,{body:n,...r})}}n0.Parts=_k;var wk;class he extends Rz{constructor({baseURL:e=Ec("OPENAI_BASE_URL"),apiKey:n=Ec("OPENAI_API_KEY"),organization:r=Ec("OPENAI_ORG_ID")??null,project:s=Ec("OPENAI_PROJECT_ID")??null,...i}={}){if(n===void 0)throw new se("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const o={apiKey:n,organization:r,project:s,...i,baseURL:e||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&Fz())throw new se(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:o.baseURL,timeout:o.timeout??6e5,httpAgent:o.httpAgent,maxRetries:o.maxRetries,fetch:o.fetch}),this.completions=new mk(this),this.chat=new L_(this),this.embeddings=new gk(this),this.files=new G_(this),this.images=new yk(this),this.audio=new wu(this),this.moderations=new vk(this),this.models=new e0(this),this.fineTuning=new Su(this),this.beta=new Ni(this),this.batches=new V_(this),this.uploads=new n0(this),this._options=o,this.apiKey=n,this.organization=r,this.project=s}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return cz(e,{arrayFormat:"brackets"})}}wk=he;he.OpenAI=wk;he.DEFAULT_TIMEOUT=6e5;he.OpenAIError=se;he.APIError=vt;he.APIConnectionError=ff;he.APIConnectionTimeoutError=D_;he.APIUserAbortError=Ln;he.NotFoundError=Ab;he.ConflictError=Rb;he.RateLimitError=Cb;he.BadRequestError=Sb;he.AuthenticationError=Ib;he.InternalServerError=bb;he.PermissionDeniedError=Pb;he.UnprocessableEntityError=xb;he.toFile=Vb;he.fileFromPath=Eb;he.Completions=mk;he.Chat=L_;he.Embeddings=gk;he.Files=G_;he.FileObjectsPage=Q_;he.Images=yk;he.Audio=wu;he.Moderations=vk;he.Models=e0;he.ModelsPage=t0;he.FineTuning=Su;he.Beta=Ni;he.Batches=V_;he.BatchesPage=M_;he.Uploads=n0;const Zz="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";var eW="firebase",tW="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nr(eW,tW,"app");const nW={apiKey:"AIzaSyBmnAgNW6aSpY_1wFMTFhx9hQRpe1-5YI0",authDomain:"misession-820ab.firebaseapp.com",projectId:"misession-820ab",storageBucket:"misession-820ab.appspot.com",messagingSenderId:"18832346524",appId:"1:18832346524:web:2783e5d54197e14a33cc59"},r0=nA(nW),rW=Yo(r0),On=U5(r0),sW=$x(r0),iW=()=>{const t=Ri(),[e,n]=O.useState(""),[r,s]=O.useState(""),[i,o]=O.useState(""),[a,l]=O.useState(null),[c,h]=O.useState([]),[d,f]=O.useState(""),[y,w]=O.useState(""),[T,P]=O.useState(""),E=new he({apiKey:Zz,dangerouslyAllowBrowser:!0}),g=async R=>{if(R.preventDefault(),e&&i&&r)try{const N=a?await S(a):null,b=await E.chat.completions.create({model:"gpt-4o-mini",messages:[{role:"system",content:"Fais un plan d'une heure pour aider les élèves dans l'apprentissage informatique."},{role:"user",content:i}]});console.log("ChatGPT retourne :",b.choices[0].message);const Z=b.choices[0].message.content;await db(Gl(On,"tasks"),{title:e,description:i,priorite:r,status:"Commencer",comments:[],assignedTo:"admin@example.com",submittedBy:d,createdAt:new Date,fileUrl:N,chatGptResponse:Z}),console.log("Tâche ajoutée avec succès avec le plan ChatGPT !"),n(""),o(""),s(""),l(null),ce.success("Tâche ajoutée avec succès !")}catch(N){console.error("Erreur lors de l'ajout de la tâche :",N),ce.error("Erreur lors de l'ajout de la tâche.")}else ce.warn("Veuillez remplir tous les champs.")},_=["wmbennabi05@gmail.com","dany123@gmail.com"];O.useEffect(()=>{const R=cv(rW,N=>{N?(f(N.email),_.includes(N.email)||(alert("You are not authorized to access this page."),t("/dashboard"))):t("/login")});return()=>R()},[t]),O.useEffect(()=>{const R=N_(Gl(On,"tasks"),N=>{const b=N.docs.map(Z=>({id:Z.id,...Z.data()}));h(b)});return()=>R()},[]);const x=async(R,N,b)=>{try{await fetch("/sendEmail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipient:R,subject:N,message:b})}),ce.success("Notification envoyée !")}catch(Z){console.error("Erreur lors de l'envoi de l'email :",Z),ce.error("Erreur lors de l'envoi de la notification.")}},D=async(R,N)=>{const b=Ks(On,"tasks",R),Z=c.find(de=>de.id===R);try{await _c(b,{status:N}),ce.info(`Statut de la tâche mis à jour à "${N}"`),x(Z.assignedTo,"Mise à jour de la tâche",`Le statut de la tâche "${Z.title}" a été mis à jour à "${N}".`)}catch(de){console.error("Error updating task status:",de),ce.error("Erreur lors de la mise à jour du statut.")}},V=async(R,N)=>{const b=Ks(On,"tasks",R),Z=c.find(de=>de.id===R);try{await _c(b,{assignedTo:N}),ce.info("Tâche réassignée avec succès !"),x(N,"Nouvelle tâche assignée",`Une nouvelle tâche intitulée "${Z.title}" vous a été assignée.`)}catch(de){console.error("Error reassigning task:",de),ce.error("Erreur lors de la réassignation.")}},S=R=>new Promise((N,b)=>{const Z=Bx(sW,`tasks/${R.name}`),de=L3(Z,R);de.on("state_changed",null,Dt=>b(Dt),async()=>{const Dt=await jx(de.snapshot.ref);N(Dt)})}),v=async R=>{const N=Ks(On,"tasks",R),Z=[...c.find(de=>de.id===R).comments||[],{author:d,text:y}];try{await _c(N,{comments:Z}),w(""),alert("Comment added successfully!")}catch(de){console.error("Error adding comment:",de)}},A=async(R,N)=>{try{const b=Ks(On,"tasks",R);await _c(b,N),alert("Task updated successfully!")}catch(b){console.error("Error updating task:",b)}},C=async R=>{try{const N=Ks(On,"tasks",R);await hb(N),alert("Task deleted successfully!")}catch(N){console.error("Error deleting task:",N)}};return k.jsxs("div",{className:"flex h-screen bg-gradient-to-r from-gray-100 via-white to-gray-50",children:[k.jsxs("div",{className:"relative w-1/3 bg-gradient-to-br from-purple-700 to-indigo-800 text-white p-8 flex flex-col justify-center items-center shadow-xl",children:[k.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Créer une Tâche"}),k.jsx("p",{className:"text-center text-lg mb-6",children:"Ajoutez une nouvelle tâche avec son titre, description et priorité. Vous pouvez aussi joindre un fichier si nécessaire."}),k.jsxs("form",{onSubmit:g,className:"space-y-4 w-full max-w-md flex flex-col",children:[k.jsx("input",{type:"text",placeholder:"Titre",value:e,onChange:R=>n(R.target.value),className:"p-3 rounded-lg w-full bg-gray-200 text-gray-800 placeholder-gray-400",required:!0}),k.jsx("textarea",{placeholder:"Description",value:i,onChange:R=>o(R.target.value),className:"p-3 rounded-lg w-full bg-gray-200 text-gray-800 placeholder-gray-400",required:!0}),k.jsxs("select",{value:r,onChange:R=>s(R.target.value),className:"p-3 rounded-lg w-full bg-gray-200 text-gray-800",required:!0,children:[k.jsx("option",{value:"",children:"Priorité"}),k.jsx("option",{value:"low",children:"Basse"}),k.jsx("option",{value:"medium",children:"Moyenne"}),k.jsx("option",{value:"high",children:"Élevée"})]}),k.jsx("input",{type:"file",onChange:R=>l(R.target.files[0]),className:"p-3 rounded-lg w-full bg-gray-200 text-gray-800"}),k.jsx("button",{type:"submit",className:"w-full bg-green-500 hover:bg-green-600 text-white p-3 rounded-lg font-semibold",children:"Ajouter"})]})]}),k.jsxs("div",{className:"w-2/3 p-10 overflow-y-auto",children:[k.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-8 text-center",children:"Toutes les Tâches"}),k.jsx("div",{className:"grid grid-cols-2 gap-6",children:c.map(R=>{var N;return k.jsxs(ei.div,{className:"p-6 bg-white rounded-lg shadow-lg hover:shadow-xl transition-all border-t-4",style:{borderColor:R.status==="Terminé"?"#16a34a":R.status==="En cours"?"#facc15":"#dc2626"},initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[k.jsx("h3",{className:"font-bold text-lg text-gray-700",children:R.title}),k.jsx("p",{children:R.description}),k.jsxs("p",{className:"text-gray-500 text-sm",children:["Priority: ",R.priorite]}),k.jsxs("p",{className:"text-gray-500 text-sm",children:["Assigned to: ",R.assignedTo]}),k.jsxs("p",{className:"text-gray-500 text-sm",children:["Submitted by: ",R.submittedBy]}),k.jsxs("p",{className:"text-gray-500 text-sm",children:["Status: ",k.jsx("span",{className:"font-bold",children:R.status||"Commencer"})]}),k.jsxs("p",{className:"text-gray-500 text-sm",children:["Date de soumission:"," ",R.createdAt?(R.createdAt.toDate?R.createdAt.toDate():new Date(R.createdAt)).toLocaleString():"Non disponible"]}),R.fileUrl&&k.jsx("div",{className:"mt-4",children:k.jsx("a",{href:R.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm",children:"Voir la pièce jointe"})}),k.jsxs("div",{className:"mt-4 flex gap-3",children:[k.jsx("button",{onClick:()=>D(R.id,"Commencer"),className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg text-sm",children:"Commencer"}),k.jsx("button",{onClick:()=>D(R.id,"En cours"),className:"bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-lg text-sm",children:"En cours"}),k.jsx("button",{onClick:()=>D(R.id,"Terminé"),className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg text-sm",children:"Terminé"})]}),k.jsxs("div",{className:"mt-4 flex gap-3",children:[k.jsx("button",{onClick:()=>A(R.id,{title:prompt("Modifier le titre",R.title)||R.title,description:prompt("Modifier la description",R.description)||R.description,priorite:prompt("Modifier la priorité",R.priorite)||R.priorite}),className:"bg-gray-800 hover:bg-gray-700 text-white px-4 py-2 rounded-lg w-1/2",children:"Modifier"}),k.jsx("button",{onClick:()=>C(R.id),className:"bg-gray-800 hover:bg-gray-700 text-white px-4 py-2 rounded-lg w-1/2",children:"Supprimer"})]}),k.jsx("textarea",{placeholder:"Ajouter un commentaire",value:y,onChange:b=>w(b.target.value),className:"w-full p-2 border rounded-md mt-4 text-sm"}),k.jsx("button",{onClick:()=>v(R.id),className:"w-full bg-gray-800 hover:bg-gray-700 text-white p-2 text-sm rounded-lg mt-2",children:"Ajouter un commentaire"}),k.jsx("input",{type:"text",placeholder:"Réassigner à",value:T,onChange:b=>P(b.target.value),className:"w-full p-2 border rounded-md mt-2 text-sm"}),k.jsx("button",{onClick:()=>V(R.id,T),className:"w-full bg-gray-800 hover:bg-gray-700 text-white p-2 text-sm rounded-lg mt-2",children:"Réassigner"}),k.jsxs("div",{className:"mt-4",children:[k.jsx("h4",{className:"font-semibold text-gray-700",children:"Commentaires :"}),(N=R.comments)==null?void 0:N.map((b,Z)=>k.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[k.jsxs("span",{className:"font-semibold",children:[b.author," :"]})," ",b.text]},Z))]})]},R.id)})})]})]})},oW=()=>{const[t,e]=O.useState([]),[n,r]=O.useState([]),[s,i]=O.useState(null),[o,a]=O.useState({priorite:"",status:"",assignedTo:"",keyword:""});O.useEffect(()=>{const c=N_(Gl(On,"tasks"),async h=>{const d=h.docs.map(w=>({id:w.id,...w.data()})),f=d.filter(w=>w.status==="Terminé");for(const w of f){await db(Gl(On,"history"),w);const T=Ks(On,"tasks",w.id);await hb(T)}const y=d.filter(w=>w.status!=="Terminé");e(y),r(y)});return()=>c()},[]),O.useEffect(()=>{let c=t;o.priorite&&(c=c.filter(h=>h.priorite===o.priorite)),o.status&&(c=c.filter(h=>h.status===o.status)),o.assignedTo&&(c=c.filter(h=>h.assignedTo.toLowerCase().includes(o.assignedTo.toLowerCase()))),o.keyword&&(c=c.filter(h=>{var d;return h.title.toLowerCase().includes(o.keyword.toLowerCase())||((d=h.description)==null?void 0:d.toLowerCase().includes(o.keyword.toLowerCase()))})),r(c)},[o,t]);const l=c=>{const{name:h,value:d}=c.target;a(f=>({...f,[h]:d}))};return k.jsx("div",{className:"flex flex-col h-screen bg-gradient-to-r from-gray-200 via-gray-300 to-gray-400",children:k.jsxs("div",{className:"flex flex-grow",children:[k.jsxs("div",{className:"w-1/3 bg-gray-50 p-8 text-black flex flex-col items-center justify-center shadow-lg",children:[k.jsx("h1",{className:"text-4xl font-extrabold mb-6",children:"Espace Utilisateur"}),k.jsxs("p",{className:"text-lg text-center leading-relaxed",children:["Consultez toutes les tâches disponibles ici. ",k.jsx("br",{}),"Visualisez leur statut, les commentaires, et les fichiers joints."]}),k.jsx("div",{className:"mt-6",children:k.jsx("dotlottie-player",{src:"https://lottie.host/03704ac6-2fc5-439b-8ec0-6ff2fee69082/ljqCSWGIT1.lottie",background:"transparent",speed:"1",style:{width:"300px",height:"300px"},loop:!0,autoplay:!0})})]}),k.jsxs("div",{className:"w-2/3 p-8 overflow-y-auto",children:[k.jsx(ei.h1,{className:"text-3xl font-bold text-gray-800 mb-8 text-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:1},children:"Liste des Tâches"}),k.jsxs(ei.div,{className:"mb-6 grid grid-cols-4 gap-4",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},children:[k.jsxs("select",{name:"priorite",value:o.priorite,onChange:l,className:"p-2 border rounded-lg bg-white shadow-md hover:shadow-lg transition-all",children:[k.jsx("option",{value:"",children:"Toutes les priorités"}),k.jsx("option",{value:"high",children:"Haute"}),k.jsx("option",{value:"medium",children:"Moyenne"}),k.jsx("option",{value:"low",children:"Basse"})]}),k.jsxs("select",{name:"status",value:o.status,onChange:l,className:"p-2 border rounded-lg bg-white shadow-md hover:shadow-lg transition-all",children:[k.jsx("option",{value:"",children:"Tous les statuts"}),k.jsx("option",{value:"Commencer",children:"Commencer"}),k.jsx("option",{value:"En cours",children:"En cours"})]}),k.jsx("input",{type:"text",name:"assignedTo",value:o.assignedTo,onChange:l,placeholder:"Responsable",className:"p-2 border rounded-lg bg-white shadow-md hover:shadow-lg transition-all"}),k.jsx("input",{type:"text",name:"keyword",value:o.keyword,onChange:l,placeholder:"Rechercher par mots-clés",className:"p-2 border rounded-lg bg-white shadow-md hover:shadow-lg transition-all"})]}),k.jsx(ei.div,{className:"grid grid-cols-2 gap-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.5},children:n.map(c=>{var h;return k.jsxs(ei.div,{className:"p-6 bg-white rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300 border-t-4",style:{borderColor:c.status==="En cours"?"#eab308":"#ef4444"},initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[k.jsx("h3",{className:"font-semibold text-lg text-gray-800 mb-2",children:c.title}),k.jsx("p",{className:"text-gray-600 mb-4 text-sm",children:c.description}),k.jsxs("p",{className:"text-gray-500 text-sm",children:[k.jsx("strong",{children:"Priorité :"})," ",c.priorite]}),k.jsxs("p",{className:"text-gray-500 text-sm",children:[k.jsx("strong",{children:"Assigné à :"})," ",c.assignedTo]}),k.jsxs("p",{className:"text-gray-500 text-sm",children:[k.jsx("strong",{children:"Soumis par :"})," ",c.submittedBy]}),k.jsxs("p",{className:"text-gray-500 text-sm",children:[k.jsx("strong",{children:"Statut :"})," ",c.status||"Commencer"]}),k.jsxs("p",{className:"text-gray-500 text-sm",children:[k.jsx("strong",{children:"Date de soumission :"})," ",c.createdAt?c.createdAt.toDate?c.createdAt.toDate().toLocaleString():new Date(c.createdAt).toLocaleString():"Non disponible"]}),k.jsxs("div",{className:"mt-2",children:[k.jsx("strong",{children:"Commentaires :"}),k.jsx("ul",{className:"mt-1 text-sm text-gray-600",children:(h=c.comments)==null?void 0:h.map((d,f)=>k.jsxs("li",{children:[k.jsxs("span",{className:"font-semibold",children:[d.author,":"]})," ",d.text]},f))})]}),c.chatGptResponse&&k.jsxs("div",{className:"mt-4 p-3 bg-blue-100 rounded-lg",children:[k.jsx("h4",{className:"text-lg font-semibold text-blue-600 mb-2",children:"Plan généré par ChatGPT"}),k.jsx("button",{onClick:()=>i(s===c.id?null:c.id),className:"text-blue-600 hover:underline",children:s===c.id?"Masquer le plan":"Afficher le plan"}),s===c.id&&k.jsx("p",{className:"mt-1 text-gray-700",children:c.chatGptResponse})]})]},c.id)})})]})]})})},aW=()=>{const[t,e]=O.useState([]);return O.useEffect(()=>{const n=N_(Gl(On,"history"),r=>{const s=r.docs.map(i=>({id:i.id,...i.data()}));e(s)});return()=>n()},[]),k.jsxs("div",{className:"p-8 bg-gray-100 min-h-screen",children:[k.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-8 text-center",children:"Historique des Tâches"}),k.jsx("div",{className:"grid grid-cols-2 gap-6",children:t.map(n=>k.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-md border-t-4 border-green-500 flex flex-col items-center",children:[k.jsx("lord-icon",{src:"https://cdn.lordicon.com/lomfljuq.json",trigger:"hover",style:{width:"100px",height:"100px",marginBottom:"10px"}}),k.jsx("h3",{className:"font-bold text-lg text-gray-800",children:n.title}),k.jsx("p",{className:"text-gray-600 mt-2 text-center",children:n.description}),k.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Assigné à : ",k.jsx("span",{className:"font-bold",children:n.assignedTo})]})]},n.id))})]})},lW=({children:t})=>{const e=Yo(),n=Ri(),[r,s]=O.useState(!0);return O.useEffect(()=>{const i=cv(e,o=>{o?s(!1):(console.log("unauthorized"),s(!1),n("/login"))});return()=>i()},[e,n]),r?k.jsx("p",{children:"Loading..."}):k.jsx("div",{children:t})},uW=()=>{const t=Ai(),e=["/login","/signup"];return k.jsxs(k.Fragment,{children:[!e.includes(t.pathname)&&k.jsx(lS,{}),k.jsxs(pL,{children:[k.jsx(mr,{path:"/",element:k.jsx(lW,{children:k.jsx(lS,{})})}),k.jsx(mr,{path:"/login",element:k.jsx(GB,{})}),k.jsx(mr,{path:"/signup",element:k.jsx(P$,{})}),k.jsx(mr,{path:"/profile",element:k.jsx(U3,{})}),k.jsx(mr,{path:"/task-form",element:k.jsx(iW,{})}),k.jsx(mr,{path:"/dashboard",element:k.jsx(oW,{})}),k.jsx(mr,{path:"/history",element:k.jsx(aW,{})}),k.jsx(mr,{path:"*",element:k.jsx(dL,{to:"/"})})]}),k.jsx(Y3,{position:"top-right",autoClose:3e3})]})};Jp.createRoot(document.getElementById("root")).render(k.jsx(ye.StrictMode,{children:k.jsx(TL,{children:k.jsx(uW,{})})}));
